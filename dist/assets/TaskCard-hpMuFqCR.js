import{c as x,P as i,j as e,a as h,S as f,A as j}from"./index-BWhNYll5.js";import{T as b}from"./trash-2-D4YKPC91.js";import{C as w}from"./calendar-DYNEwCHX.js";const N=x("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),v=x("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),C=x("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),T=(t,n,c)=>{let s=[...t];if(n.query){const r=n.query.toLowerCase();s=s.filter(a=>a.title.toLowerCase().includes(r)||a.description.toLowerCase().includes(r)||a.product.toLowerCase().includes(r))}return n.priority!=="ALL"&&(s=s.filter(r=>r.priority===n.priority)),n.onlyMyTasks&&(s=s.filter(r=>r.assigneeId===n.currentUserId)),c!=="NONE"&&s.sort((r,a)=>{if(c==="DUE_DATE")return new Date(r.dueDate).getTime()-new Date(a.dueDate).getTime();if(c==="PRIORITY"){const o={[i.HIGH]:3,[i.MEDIUM]:2,[i.LOW]:1};return o[a.priority]-o[r.priority]}if(c==="SMART"){const o={[i.HIGH]:100,[i.MEDIUM]:50,[i.LOW]:10},d=new Date().getTime(),l=new Date(r.dueDate).getTime(),g=new Date(a.dueDate).getTime(),p=(l-d)/(1e3*60*60*24),u=(g-d)/(1e3*60*60*24),y=o[r.priority]-p;return o[a.priority]-u-y}return 0}),s},m=t=>t?new Date(t).toLocaleDateString("ko-KR",{month:"numeric",day:"numeric",timeZone:"Asia/Seoul"}):"-",E=({task:t,draggedTaskId:n,onClick:c,onDragStart:s,onDragEnd:r,onDelete:a,onArchive:o,index:d})=>e.jsx("div",{draggable:!0,onDragStart:l=>s(l,t.id),onDragEnd:r,className:`clean-card rounded-2xl cursor-grab active:cursor-grabbing group relative bg-white transition-all duration-300 flex flex-col overflow-hidden
          ${n===t.id?"shadow-none":"hover:translate-y-[-2px]"}
      `,style:{animationDelay:`${d*50}ms`},onClick:()=>c(t),children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-[10px] font-bold px-2.5 py-1 rounded-md select-none flex items-center gap-1
                    ${t.priority===i.HIGH?"bg-red-50 text-red-600":t.priority===i.MEDIUM?"bg-orange-50 text-orange-600":"bg-green-50 text-green-600"}`,children:[t.priority===i.HIGH&&e.jsx(N,{className:"w-3 h-3"}),t.priority===i.HIGH?"높음":t.priority===i.MEDIUM?"중간":"낮음"]}),t.aiStatus==="GENERATING"&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-indigo-50 text-indigo-600 rounded-md text-[10px] font-bold animate-pulse",title:"AI 분석 중...",children:[e.jsx(h,{className:"w-3 h-3 animate-spin"}),e.jsx("span",{children:"AI"})]}),t.aiStatus==="COMPLETED"&&e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-emerald-50 text-emerald-600 rounded-md text-[10px] font-bold",title:"AI 분석 완료",children:[e.jsx(f,{className:"w-3 h-3"}),e.jsx("span",{children:"AI"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[o&&e.jsx("button",{onClick:l=>{l.stopPropagation(),o(t.id)},className:"flex items-center justify-center w-7 h-7 rounded-full border border-gray-200 text-gray-400 hover:bg-indigo-50 hover:border-indigo-200 hover:text-indigo-500 transition-all opacity-0 group-hover:opacity-100 z-10 bg-white",title:"보관함으로 이동",children:e.jsx(j,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:l=>{l.stopPropagation(),confirm("이 업무를 삭제하시겠습니까?")&&a(t.id)},className:"flex items-center justify-center w-7 h-7 rounded-full border border-gray-200 text-gray-400 hover:bg-red-50 hover:border-red-200 hover:text-red-500 transition-all opacity-0 group-hover:opacity-100 z-10 bg-white",title:"업무 삭제",children:e.jsx(b,{className:"w-3.5 h-3.5"})})]})]}),e.jsx("h4",{className:"text-gray-800 font-semibold text-[15px] mb-2 leading-snug group-hover:text-blue-600 transition-colors select-none",children:t.title}),e.jsx("p",{className:"text-gray-500 text-xs line-clamp-2 mb-4 font-light select-none leading-relaxed",children:t.description}),e.jsxs("div",{className:"flex items-end justify-between pt-3 border-t border-gray-100",children:[e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-gray-400",title:"생성일",children:[e.jsx(v,{className:"w-3 h-3"}),e.jsx("span",{children:m(t.createdAt||Date.now())})]}),e.jsxs("div",{className:`flex items-center gap-1.5 text-[11px] font-medium transition-colors
                      ${new Date(t.dueDate)<new Date?"text-red-500":"text-gray-500"}`,title:"마감일",children:[e.jsx(w,{className:"w-3 h-3"}),e.jsx("span",{children:m(t.dueDate)})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1.5",children:[e.jsx("span",{className:"text-[10px] font-medium text-gray-500 bg-gray-100 px-2 py-0.5 rounded-md max-w-[80px] truncate",children:t.product}),t.assigneeAvatar?e.jsx("img",{src:t.assigneeAvatar,alt:t.assigneeName,className:"w-6 h-6 rounded-full ring-2 ring-white shadow-sm select-none object-cover"}):e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 ring-2 ring-white shadow-sm flex items-center justify-center text-[8px] font-bold text-gray-500 select-none",children:t.assigneeName?t.assigneeName.charAt(0).toUpperCase():"U"})]})]})]})});export{C as S,E as T,T as g};
