import{c as g,P as i,r as u,j as t,a as f,S as w,A as j}from"./index-DyS2UZXT.js";import{T as b}from"./trash-2-B4FIQgNi.js";import{C as N}from"./calendar-BgtCyN6k.js";const D=g("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),v=g("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),T=g("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),E=(e,n,c)=>{let s=[...e];if(n.query){const r=n.query.toLowerCase();s=s.filter(a=>a.title.toLowerCase().includes(r)||a.description.toLowerCase().includes(r)||a.product.toLowerCase().includes(r))}return n.priority!=="ALL"&&(s=s.filter(r=>r.priority===n.priority)),n.onlyMyTasks&&(s=s.filter(r=>r.assigneeId===n.currentUserId)),c!=="NONE"&&s.sort((r,a)=>{if(c==="DUE_DATE")return new Date(r.dueDate).getTime()-new Date(a.dueDate).getTime();if(c==="PRIORITY"){const l={[i.HIGH]:3,[i.MEDIUM]:2,[i.LOW]:1};return l[a.priority]-l[r.priority]}if(c==="SMART"){const l={[i.HIGH]:100,[i.MEDIUM]:50,[i.LOW]:10},x=new Date().getTime(),m=new Date(r.dueDate).getTime(),d=new Date(a.dueDate).getTime(),o=(m-x)/(1e3*60*60*24),p=(d-x)/(1e3*60*60*24),y=l[r.priority]-o;return l[a.priority]-p-y}return 0}),s},h=e=>e?new Date(e).toLocaleDateString("ko-KR",{month:"numeric",day:"numeric",timeZone:"Asia/Seoul"}):"-",L=({task:e,draggedTaskId:n,onClick:c,onDragStart:s,onDragEnd:r,onDelete:a,onArchive:l,index:x})=>{const[m,d]=u.useState(!1);return u.useEffect(()=>{const o=e.updatedAt&&Date.now()-e.updatedAt<1e4;if(e.aiStatus==="COMPLETED"&&o){d(!0);const p=setTimeout(()=>{d(!1)},5e3);return()=>clearTimeout(p)}else d(!1)},[e.aiStatus,e.updatedAt]),t.jsx("div",{draggable:!0,onDragStart:o=>s(o,e.id),onDragEnd:r,className:`clean-card rounded-2xl cursor-grab active:cursor-grabbing group relative bg-white transition-all duration-300 flex flex-col overflow-hidden
          ${n===e.id?"shadow-none":"hover:translate-y-[-2px]"}
      `,style:{animationDelay:`${x*50}ms`},onClick:()=>c(e),children:t.jsxs("div",{className:"p-5",children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:`text-[10px] font-bold px-2.5 py-1 rounded-md select-none flex items-center gap-1
                    ${e.priority===i.HIGH?"bg-red-50 text-red-600":e.priority===i.MEDIUM?"bg-orange-50 text-orange-600":"bg-green-50 text-green-600"}`,children:[e.priority===i.HIGH&&t.jsx(D,{className:"w-3 h-3"}),e.priority===i.HIGH?"높음":e.priority===i.MEDIUM?"중간":"낮음"]}),e.aiStatus==="GENERATING"&&t.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-indigo-50 text-indigo-600 rounded-md text-[10px] font-bold animate-pulse",title:"AI 분석 중...",children:[t.jsx(f,{className:"w-3 h-3 animate-spin"}),t.jsx("span",{children:"AI"})]}),e.aiStatus==="COMPLETED"&&m&&t.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-emerald-50 text-emerald-600 rounded-md text-[10px] font-bold animate-fade-in",title:"AI 분석 완료",children:[t.jsx(w,{className:"w-3 h-3"}),t.jsx("span",{children:"AI"})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[l&&t.jsx("button",{onClick:o=>{o.stopPropagation(),l(e.id)},className:"flex items-center justify-center w-7 h-7 rounded-full border border-gray-200 text-gray-400 hover:bg-indigo-50 hover:border-indigo-200 hover:text-indigo-500 transition-all opacity-0 group-hover:opacity-100 z-10 bg-white",title:"보관함으로 이동",children:t.jsx(j,{className:"w-3.5 h-3.5"})}),t.jsx("button",{onClick:o=>{o.stopPropagation(),confirm("이 업무를 삭제하시겠습니까?")&&a(e.id)},className:"flex items-center justify-center w-7 h-7 rounded-full border border-gray-200 text-gray-400 hover:bg-red-50 hover:border-red-200 hover:text-red-500 transition-all opacity-0 group-hover:opacity-100 z-10 bg-white",title:"업무 삭제",children:t.jsx(b,{className:"w-3.5 h-3.5"})})]})]}),t.jsx("h4",{className:"text-gray-800 font-semibold text-[15px] mb-2 leading-snug group-hover:text-blue-600 transition-colors select-none",children:e.title}),t.jsx("p",{className:"text-gray-500 text-xs line-clamp-2 mb-4 font-light select-none leading-relaxed",children:e.description}),t.jsxs("div",{className:"flex items-end justify-between pt-3 border-t border-gray-100",children:[t.jsxs("div",{className:"flex flex-col gap-1.5",children:[t.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-gray-400",title:"생성일",children:[t.jsx(v,{className:"w-3 h-3"}),t.jsx("span",{children:h(e.createdAt||Date.now())})]}),t.jsxs("div",{className:`flex items-center gap-1.5 text-[11px] font-medium transition-colors
                      ${new Date(e.dueDate)<new Date?"text-red-500":"text-gray-500"}`,title:"마감일",children:[t.jsx(N,{className:"w-3 h-3"}),t.jsx("span",{children:h(e.dueDate)})]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-1.5",children:[t.jsx("span",{className:"text-[10px] font-medium text-gray-500 bg-gray-100 px-2 py-0.5 rounded-md max-w-[80px] truncate",children:e.product}),e.assigneeAvatar?t.jsx("img",{src:e.assigneeAvatar,alt:e.assigneeName,className:"w-6 h-6 rounded-full ring-2 ring-white shadow-sm select-none object-cover"}):t.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 ring-2 ring-white shadow-sm flex items-center justify-center text-[8px] font-bold text-gray-500 select-none",children:e.assigneeName?e.assigneeName.charAt(0).toUpperCase():"U"})]})]})]})})};export{T as S,L as T,E as g};
