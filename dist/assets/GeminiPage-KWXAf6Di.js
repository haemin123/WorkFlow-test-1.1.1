import{c as m,r as a,i as R,j as t,S as z,X as B,b as _}from"./index-BWhNYll5.js";import{C as V}from"./chevron-down-BzVFte0D.js";import{C as H}from"./calendar-DYNEwCHX.js";import{T as K}from"./trash-2-D4YKPC91.js";import{S as W}from"./send-CsUYsvxc.js";const q=m("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Q=m("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]),F=m("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),X=m("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Z=m("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),J=[{icon:t.jsx(F,{className:"w-5 h-5 text-purple-500"}),text:"Create an image",sub:"of a futuristic workspace"},{icon:t.jsx(X,{className:"w-5 h-5 text-yellow-500"}),text:"Brainstorm ideas",sub:"for a marketing campaign"},{icon:t.jsx(q,{className:"w-5 h-5 text-blue-500"}),text:"Write code",sub:"for a React component"},{icon:t.jsx(Q,{className:"w-5 h-5 text-green-500"}),text:"Plan a trip",sub:"to Seoul with team"}],le=()=>{const[u,c]=a.useState([]),[h,f]=a.useState(""),[d,S]=a.useState(!1),[p,x]=a.useState(!1),[n,C]=a.useState(null),[Y,$]=a.useState("image/png"),g=a.useRef(null),[i,L]=a.useState(R[0]),[b,w]=a.useState(!1),y=a.useRef(null),M=a.useRef(null),D=a.useRef(null);a.useEffect(()=>{var e;(e=M.current)==null||e.scrollIntoView({behavior:"smooth"})},[u,n]),a.useEffect(()=>{const e=s=>{y.current&&!y.current.contains(s.target)&&w(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const U=e=>{if(e.target.files&&e.target.files[0]){const s=e.target.files[0],r=new FileReader;r.onloadend=()=>{const o=r.result;C(o),$(s.type)},r.readAsDataURL(s)}},I=()=>{C(null),g.current&&(g.current.value="")},A=()=>{if(!("webkitSpeechRecognition"in window)){alert("이 브라우저는 음성 인식을 지원하지 않습니다.");return}if(p){x(!1);return}const e=new window.webkitSpeechRecognition;e.lang="ko-KR",e.continuous=!1,e.interimResults=!1,e.onstart=()=>{x(!0)},e.onresult=s=>{const r=s.results[0][0].transcript;f(o=>o+(o?" ":"")+r),x(!1)},e.onerror=s=>{console.error("Speech recognition error",s.error),x(!1)},e.onend=()=>{x(!1)},e.start()},j=async(e=h)=>{var E;if(!e.trim()&&!n||d)return;const s=n,r={id:Date.now().toString(),role:"user",text:e,image:s||void 0,timestamp:Date.now()};c(l=>[...l,r]),f(""),I(),S(!0);const o=u.map(l=>({role:l.role,parts:[{text:l.text}]}));try{const l=(Date.now()+1).toString();c(N=>[...N,{id:l,role:"model",text:"생각 중...",isStreaming:!0,modelName:i.name,timestamp:Date.now()}]);const v={id:"general-chat",title:"일반 대화",description:"사용자와의 자유로운 대화",status:"REQUESTED",priority:"MEDIUM",product:"일반",type:"일반",dueDate:"",assigneeId:"",requesterId:"",subtasks:[],createdAt:Date.now(),updatedAt:Date.now()},P=await _(o,e,v);c(N=>N.map(k=>k.id===l?{...k,text:P,isStreaming:!1}:k))}catch(l){console.error("Gemini Chat Error:",l),c(v=>[...v,{id:Date.now().toString(),role:"model",text:"죄송합니다. 처리 중 오류가 발생했습니다.",timestamp:Date.now()}])}finally{S(!1),(E=D.current)==null||E.focus()}},G=e=>{c(s=>s.filter(r=>r.id!==e))},T=(e,s)=>{j(`${e} ${s}`)},O=e=>{L(e),w(!1)};return t.jsxs("div",{className:"flex flex-col h-full bg-white text-gray-900 font-sans relative overflow-hidden",children:[t.jsx("input",{type:"file",ref:g,onChange:U,accept:"image/*",className:"hidden"}),t.jsxs("div",{className:"absolute top-0 left-0 right-0 h-16 flex items-center justify-between px-4 md:px-6 z-20 bg-white/80 backdrop-blur-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 relative",ref:y,children:[t.jsxs("button",{onClick:()=>w(!b),className:"flex items-center gap-1 text-lg font-medium text-gray-600 hover:bg-gray-100 px-3 py-1.5 rounded-lg transition-colors",children:[t.jsx("span",{children:i.name}),t.jsx(V,{className:`w-4 h-4 transition-transform duration-200 ${b?"rotate-180":""}`})]}),b&&t.jsx("div",{className:"absolute top-full left-0 mt-2 w-72 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden animate-fade-in",children:t.jsx("div",{className:"p-1.5",children:R.map(e=>t.jsxs("button",{onClick:()=>O(e),className:`w-full text-left p-3 rounded-lg flex items-start gap-3 transition-colors
                                            ${i.id===e.id?"bg-blue-50":"hover:bg-gray-50"}`,children:[t.jsx("div",{className:`mt-1 w-4 h-4 rounded-full border flex items-center justify-center flex-shrink-0
                                            ${i.id===e.id?"border-blue-600":"border-gray-300"}`,children:i.id===e.id&&t.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`font-medium ${i.id===e.id?"text-blue-700":"text-gray-700"}`,children:e.name}),e.isPro&&t.jsx("span",{className:"text-[10px] font-bold bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-1.5 py-0.5 rounded",children:"PRO"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5 leading-snug",children:e.description})]})]},e.id))})})]}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 text-xs font-bold",children:"U"})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 pt-20 pb-32 relative",children:u.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-[500px] animate-fade-in",children:[t.jsxs("div",{className:"text-left w-full max-w-4xl px-4 mb-12",children:[t.jsx("h1",{className:"text-5xl md:text-6xl font-medium tracking-tight mb-2",children:t.jsx("span",{className:"bg-gradient-to-r from-[#4285F4] via-[#9B72CB] to-[#D96570] bg-clip-text text-transparent",children:"Hello, User"})}),t.jsx("h2",{className:"text-5xl md:text-6xl font-medium text-[#C4C7C5] tracking-tight",children:"How can I help you today?"})]}),t.jsx("div",{className:"w-full max-w-4xl px-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:J.map((e,s)=>t.jsxs("button",{onClick:()=>T(e.text,e.sub),className:"p-4 h-40 rounded-2xl bg-[#F0F4F9] hover:bg-[#DCE3E9] transition-colors text-left flex flex-col justify-between group relative overflow-hidden",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-gray-800 font-medium text-sm",children:e.text}),t.jsx("p",{className:"text-gray-500 text-sm mt-1",children:e.sub})]}),t.jsx("div",{className:"w-8 h-8 rounded-full bg-white flex items-center justify-center shadow-sm self-end group-hover:scale-110 transition-transform",children:e.icon})]},s))})]}):t.jsxs("div",{className:"w-full max-w-3xl mx-auto space-y-8",children:[u.map(e=>t.jsxs("div",{className:`group/message flex gap-4 ${e.role==="user"?"flex-row-reverse":""}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 mt-1 
                                    ${e.role==="model"?"bg-white border border-gray-100":"bg-indigo-600"}`,children:e.role==="model"?t.jsx("img",{src:"https://www.gstatic.com/lamda/images/gemini_sparkle_v002_d4735304ff6292a690345.svg",className:"w-full h-full",alt:"Gemini"}):t.jsx("span",{className:"text-xs font-bold text-white",children:"U"})}),t.jsxs("div",{className:`flex flex-col max-w-[80%] ${e.role==="user"?"items-end":"items-start"}`,children:[e.image&&t.jsx("div",{className:"mb-2 overflow-hidden rounded-lg border border-gray-200 shadow-sm max-w-[200px]",children:t.jsx("img",{src:e.image,alt:"Uploaded content",className:"w-full h-auto"})}),t.jsxs("div",{className:`flex-1 text-base leading-relaxed whitespace-pre-wrap ${e.role==="user"?"bg-[#F0F4F9] px-5 py-3 rounded-[20px] rounded-tr-sm":"pt-1 text-gray-800"}`,children:[e.text,e.isStreaming&&t.jsx("span",{className:"inline-block w-1.5 h-4 ml-1 bg-blue-500 animate-pulse align-middle"})]}),t.jsxs("div",{className:`mt-2 flex items-center gap-2 ${e.role==="user"?"flex-row-reverse":"flex-row"}`,children:[t.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-red-50 text-red-500 border border-red-100 select-none shadow-sm",children:[t.jsx(H,{className:"w-3 h-3"}),t.jsxs("span",{className:"text-[11px] font-bold tracking-wide",children:[new Date(e.timestamp||Date.now()).getMonth()+1,". ",new Date(e.timestamp||Date.now()).getDate(),"."]})]}),t.jsx("button",{onClick:()=>G(e.id),className:"group/delete flex items-center justify-center w-7 h-7 rounded-full bg-white border border-gray-200 shadow-sm hover:bg-red-50 hover:border-red-200 transition-all",title:"메시지 삭제",children:t.jsx(K,{className:"w-3.5 h-3.5 text-gray-400 group-hover/delete:text-red-500 transition-colors"})}),e.role==="model"&&e.modelName&&t.jsxs("span",{className:`ml-1 text-[10px] font-bold px-2 py-0.5 rounded-full border flex items-center gap-1 shadow-sm select-none
                                                ${e.modelName.includes("Pro")?"bg-indigo-50 text-indigo-600 border-indigo-100":"bg-white text-gray-600 border-gray-200"}`,children:[t.jsx(z,{className:"w-3 h-3"}),e.modelName]})]})]})]},e.id)),t.jsx("div",{ref:M})]})}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-white p-6 pb-8",children:t.jsxs("div",{className:"w-full max-w-3xl mx-auto relative group flex flex-col gap-2",children:[n&&t.jsxs("div",{className:"bg-[#F0F4F9] rounded-2xl p-3 w-fit relative animate-fade-in shadow-sm border border-gray-200",children:[t.jsx("div",{className:"relative h-24 w-auto rounded-lg overflow-hidden",children:t.jsx("img",{src:n,alt:"Preview",className:"h-full w-auto object-contain"})}),t.jsx("button",{onClick:I,className:"absolute -top-2 -right-2 bg-gray-800 text-white rounded-full p-1 hover:bg-black transition-colors",children:t.jsx(B,{className:"w-3 h-3"})})]}),t.jsxs("div",{className:`flex items-center gap-2 bg-[#F0F4F9] rounded-full px-4 py-3 transition-all focus-within:shadow-md focus-within:bg-white focus-within:ring-1 focus-within:ring-gray-200 ${d?"opacity-70 cursor-not-allowed":""}`,children:[t.jsx("button",{onClick:()=>{var e;return(e=g.current)==null?void 0:e.click()},className:"p-2 rounded-full hover:bg-gray-200 text-gray-600 transition-colors relative",title:"이미지 업로드",children:t.jsx(F,{className:"w-5 h-5"})}),t.jsx("button",{onClick:A,className:`p-2 rounded-full hover:bg-gray-200 transition-colors relative 
                                ${p?"text-red-500 bg-red-50 animate-pulse":"text-gray-600"}`,title:"음성 입력",children:t.jsx(Z,{className:"w-5 h-5"})}),t.jsx("input",{ref:D,type:"text",value:h,onChange:e=>f(e.target.value),onKeyDown:e=>e.key==="Enter"&&!d&&j(),placeholder:p?"듣고 있는 중...":"Enter a prompt here",className:"flex-1 bg-transparent border-none focus:ring-0 text-gray-800 placeholder-gray-500 text-base",disabled:d}),(h.trim()||n)&&t.jsx("button",{onClick:()=>j(),disabled:d,className:"p-2 rounded-full bg-black text-white hover:bg-gray-800 transition-all animate-fade-in",children:t.jsx(W,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"text-center mt-1 text-xs text-gray-400",children:"Gemini may display inaccurate info, including about people, so double-check its responses."})]})})]})};export{le as GeminiPage};
