import{c as f,r as a,i as A,j as e,L as G,S as X,X as Z,b as J,s as Y}from"./index-DyS2UZXT.js";import{C as U}from"./chevron-down-STyv7Nyb.js";import{M as ee,S as te}from"./send--HtAELx-.js";import{C as se}from"./calendar-BgtCyN6k.js";import{T as ae}from"./trash-2-B4FIQgNi.js";const le=f("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),re=f("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]),T=f("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),ne=f("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),ie=f("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),oe=[{icon:e.jsx(T,{className:"w-5 h-5 text-purple-500"}),text:"Create an image",sub:"of a futuristic workspace"},{icon:e.jsx(ne,{className:"w-5 h-5 text-yellow-500"}),text:"Brainstorm ideas",sub:"for a marketing campaign"},{icon:e.jsx(le,{className:"w-5 h-5 text-blue-500"}),text:"Write code",sub:"for a React component"},{icon:e.jsx(re,{className:"w-5 h-5 text-green-500"}),text:"Plan a trip",sub:"to Seoul with team"}],he=({tasks:M=[],currentUser:l})=>{const[r,D]=a.useState("general"),[P,O]=a.useState([]),[z,B]=a.useState([]),b=r==="general"?P:z,x=t=>{r==="general"?O(t):B(t)},[y,j]=a.useState(""),[m,I]=a.useState(!1),[N,g]=a.useState(!1),[d,E]=a.useState(null),[de,_]=a.useState("image/png"),w=a.useRef(null),[c,V]=a.useState(A[0]),[v,k]=a.useState(!1),C=a.useRef(null),R=a.useRef(null),$=a.useRef(null);a.useEffect(()=>{var t;(t=R.current)==null||t.scrollIntoView({behavior:"smooth"})},[b,d,r]),a.useEffect(()=>{const t=s=>{C.current&&!C.current.contains(s.target)&&k(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const W=t=>{if(t.target.files&&t.target.files[0]){const s=t.target.files[0],n=new FileReader;n.onloadend=()=>{const o=n.result;E(o),_(s.type)},n.readAsDataURL(s)}},F=()=>{E(null),w.current&&(w.current.value="")},q=()=>{if(!("webkitSpeechRecognition"in window)){alert("ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„± ì¸ì‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");return}if(N){g(!1);return}const t=new window.webkitSpeechRecognition;t.lang="ko-KR",t.continuous=!1,t.interimResults=!1,t.onstart=()=>{g(!0)},t.onresult=s=>{const n=s.results[0][0].transcript;j(o=>o+(o?" ":"")+n),g(!1)},t.onerror=s=>{console.error("Speech recognition error",s.error),g(!1)},t.onend=()=>{g(!1)},t.start()},u=async(t=y)=>{var L;if(!t.trim()&&!d||m)return;const s=d,n={id:Date.now().toString(),role:"user",text:t,image:s||void 0,timestamp:Date.now()};x(i=>[...i,n]),j(""),F(),I(!0);const o=b.map(i=>({role:i.role,parts:[{text:i.text}]}));try{const i=(Date.now()+1).toString();x(p=>[...p,{id:i,role:"model",text:"ìƒê° ì¤‘...",isStreaming:!0,modelName:c.name,timestamp:Date.now()}]);let h="";if(r==="general"){const p={id:"general",title:"General Chat",description:"General conversation",status:"REQUESTED",priority:"MEDIUM",product:"General",type:"General",dueDate:"",assigneeId:"",requesterId:"",subtasks:[],createdAt:Date.now(),updatedAt:Date.now()};h=await J(o,t,p)}else h=await Y(o,t,M);x(p=>p.map(S=>S.id===i?{...S,text:h,isStreaming:!1}:S))}catch(i){console.error("Gemini Chat Error:",i),x(h=>[...h,{id:Date.now().toString(),role:"model",text:"ì£„ì†¡í•©ë‹ˆë‹¤. ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",timestamp:Date.now()}])}finally{I(!1),(L=$.current)==null||L.focus()}},K=t=>{x(s=>s.filter(n=>n.id!==t))},H=(t,s)=>{u(`${t} ${s}`)},Q=t=>{V(t),k(!1)};return e.jsxs("div",{className:"flex flex-col h-full bg-white text-gray-900 font-sans relative overflow-hidden",children:[e.jsx("input",{type:"file",ref:w,onChange:W,accept:"image/*",className:"hidden"}),e.jsxs("div",{className:"absolute top-0 left-0 right-0 h-20 z-20 bg-white/90 backdrop-blur-md border-b border-gray-100 flex items-center justify-between px-6",children:[e.jsxs("div",{className:"flex items-center gap-2 relative w-48",ref:C,children:[e.jsxs("button",{onClick:()=>k(!v),className:"flex items-center gap-1 text-sm font-medium text-gray-600 hover:bg-gray-100 px-3 py-1.5 rounded-lg transition-colors",children:[e.jsx("span",{children:c.name}),e.jsx(U,{className:`w-4 h-4 transition-transform duration-200 ${v?"rotate-180":""}`})]}),v&&e.jsx("div",{className:"absolute top-full left-0 mt-2 w-72 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden animate-fade-in z-50",children:e.jsx("div",{className:"p-1.5",children:A.map(t=>e.jsxs("button",{onClick:()=>Q(t),className:`w-full text-left p-3 rounded-lg flex items-start gap-3 transition-colors
                                            ${c.id===t.id?"bg-blue-50":"hover:bg-gray-50"}`,children:[e.jsx("div",{className:`mt-1 w-4 h-4 rounded-full border flex items-center justify-center flex-shrink-0
                                            ${c.id===t.id?"border-blue-600":"border-gray-300"}`,children:c.id===t.id&&e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-medium ${c.id===t.id?"text-blue-700":"text-gray-700"}`,children:t.name}),t.isPro&&e.jsx("span",{className:"text-[10px] font-bold bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-1.5 py-0.5 rounded",children:"PRO"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5 leading-snug",children:t.description})]})]},t.id))})})]}),e.jsx("div",{className:"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2",children:e.jsxs("div",{className:"flex bg-gray-100 p-1.5 rounded-full shadow-inner",children:[e.jsxs("button",{onClick:()=>D("general"),className:`flex items-center gap-2 px-6 py-2.5 rounded-full text-sm font-bold transition-all duration-300
                                ${r==="general"?"bg-white text-blue-600 shadow-sm scale-105":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(ee,{className:"w-4 h-4"}),"ì¼ë°˜ ì±„íŒ…"]}),e.jsxs("button",{onClick:()=>D("project"),className:`flex items-center gap-2 px-6 py-2.5 rounded-full text-sm font-bold transition-all duration-300
                                ${r==="project"?"bg-white text-blue-600 shadow-sm scale-105":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(G,{className:"w-4 h-4"}),"í”„ë¡œì íŠ¸ ì±„íŒ…"]})]})}),e.jsxs("div",{className:"flex items-center gap-2 w-48 justify-end",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 hidden sm:block truncate max-w-[100px]",children:(l==null?void 0:l.displayName)||"User"}),e.jsx("div",{className:"w-9 h-9 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 text-sm font-bold border border-gray-200",children:l!=null&&l.displayName?l.displayName.charAt(0).toUpperCase():"U"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 pt-24 pb-32 relative",children:b.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-[400px] animate-fade-in",children:[e.jsxs("div",{className:"text-center w-full max-w-4xl px-4 mb-12",children:[e.jsx("h1",{className:"text-5xl md:text-6xl font-medium tracking-tight mb-4",children:e.jsxs("span",{className:"bg-gradient-to-r from-[#4285F4] via-[#9B72CB] to-[#D96570] bg-clip-text text-transparent",children:["Hello, ",l!=null&&l.displayName?l.displayName.split(" ")[0]:"User"]})}),e.jsx("h2",{className:"text-3xl md:text-4xl font-medium text-[#C4C7C5] tracking-tight mb-4",children:r==="general"?"ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”":"í”„ë¡œì íŠ¸ì— ëŒ€í•´ ì´ì•¼ê¸°í•´ë³¼ê¹Œìš”?"}),e.jsx("p",{className:"text-gray-400 text-lg",children:r==="general"?"ìžìœ ë¡œìš´ ì£¼ì œë¡œ ëŒ€í™”ë¥¼ ë‚˜ëˆŒ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.":"í˜„ìž¬ ì§„í–‰ ì¤‘ì¸ ì—…ë¬´ ìƒí™©ì„ ë°”íƒ•ìœ¼ë¡œ AIê°€ ì¡°ì–¸í•´ ë“œë¦½ë‹ˆë‹¤."})]}),r==="general"&&e.jsx("div",{className:"w-full max-w-4xl px-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:oe.map((t,s)=>e.jsxs("button",{onClick:()=>H(t.text,t.sub),className:"p-4 h-40 rounded-2xl bg-[#F0F4F9] hover:bg-[#DCE3E9] transition-colors text-left flex flex-col justify-between group relative overflow-hidden",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-800 font-medium text-sm",children:t.text}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:t.sub})]}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-white flex items-center justify-center shadow-sm self-end group-hover:scale-110 transition-transform",children:t.icon})]},s))}),r==="project"&&e.jsx("div",{className:"w-full max-w-2xl px-4",children:e.jsxs("div",{className:"p-8 bg-blue-50 rounded-3xl border border-blue-100 flex flex-col gap-4 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center mx-auto shadow-sm text-blue-600",children:e.jsx(G,{className:"w-6 h-6"})}),e.jsx("h3",{className:"text-xl font-bold text-blue-900",children:"í˜„ìž¬ í”„ë¡œì íŠ¸ í˜„í™©"}),e.jsxs("p",{className:"text-blue-700/80",children:["ì´ ",e.jsx("span",{className:"font-bold",children:M.length}),"ê°œì˜ ì—…ë¬´ê°€ ë“±ë¡ë˜ì–´ ìžˆìŠµë‹ˆë‹¤.",e.jsx("br",{}),"AIê°€ ëª¨ë“  ì—…ë¬´ì˜ ì§„í–‰ ìƒí™©ê³¼ ì™„ë£Œ ì¡°ê±´ì„ ì•Œê³  ìžˆìŠµë‹ˆë‹¤."]}),e.jsxs("div",{className:"flex justify-center gap-3 mt-4",children:[e.jsx("button",{onClick:()=>u("í˜„ìž¬ ê°€ìž¥ ê¸‰í•œ ì—…ë¬´ê°€ ë­ì•¼?"),className:"px-5 py-2.5 bg-white text-blue-600 text-sm font-bold rounded-xl hover:bg-blue-100 transition-colors shadow-sm border border-blue-100",children:"ðŸ”¥ ê°€ìž¥ ê¸‰í•œ ì—…ë¬´?"}),e.jsx("button",{onClick:()=>u("ì´ë²ˆ ì£¼ ì—…ë¬´ ë¦¬í¬íŠ¸ ì¨ì¤˜"),className:"px-5 py-2.5 bg-white text-blue-600 text-sm font-bold rounded-xl hover:bg-blue-100 transition-colors shadow-sm border border-blue-100",children:"ðŸ“Š ì£¼ê°„ ë¦¬í¬íŠ¸ ìž‘ì„±"})]})]})})]}):e.jsxs("div",{className:"w-full max-w-3xl mx-auto space-y-8",children:[b.map(t=>e.jsxs("div",{className:`group/message flex gap-4 ${t.role==="user"?"flex-row-reverse":""}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 mt-1 
                                    ${t.role==="model"?"bg-white border border-gray-100":"bg-indigo-600"}`,children:t.role==="model"?e.jsx("img",{src:"https://www.gstatic.com/lamda/images/gemini_sparkle_v002_d4735304ff6292a690345.svg",className:"w-full h-full",alt:"Gemini"}):e.jsx("span",{className:"text-xs font-bold text-white",children:l!=null&&l.displayName?l.displayName.charAt(0).toUpperCase():"U"})}),e.jsxs("div",{className:`flex flex-col max-w-[80%] ${t.role==="user"?"items-end":"items-start"}`,children:[t.image&&e.jsx("div",{className:"mb-2 overflow-hidden rounded-lg border border-gray-200 shadow-sm max-w-[200px]",children:e.jsx("img",{src:t.image,alt:"Uploaded content",className:"w-full h-auto"})}),e.jsxs("div",{className:`flex-1 text-base leading-relaxed whitespace-pre-wrap ${t.role==="user"?"bg-[#F0F4F9] px-5 py-3 rounded-[20px] rounded-tr-sm":"pt-1 text-gray-800"}`,children:[t.text,t.isStreaming&&e.jsx("span",{className:"inline-block w-1.5 h-4 ml-1 bg-blue-500 animate-pulse align-middle"})]}),e.jsxs("div",{className:`mt-2 flex items-center gap-2 ${t.role==="user"?"flex-row-reverse":"flex-row"}`,children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-red-50 text-red-500 border border-red-100 select-none shadow-sm",children:[e.jsx(se,{className:"w-3 h-3"}),e.jsxs("span",{className:"text-[11px] font-bold tracking-wide",children:[new Date(t.timestamp||Date.now()).getMonth()+1,". ",new Date(t.timestamp||Date.now()).getDate(),"."]})]}),e.jsx("button",{onClick:()=>K(t.id),className:"group/delete flex items-center justify-center w-7 h-7 rounded-full bg-white border border-gray-200 shadow-sm hover:bg-red-50 hover:border-red-200 transition-all",title:"ë©”ì‹œì§€ ì‚­ì œ",children:e.jsx(ae,{className:"w-3.5 h-3.5 text-gray-400 group-hover/delete:text-red-500 transition-colors"})}),t.role==="model"&&t.modelName&&e.jsxs("span",{className:`ml-1 text-[10px] font-bold px-2 py-0.5 rounded-full border flex items-center gap-1 shadow-sm select-none
                                                ${t.modelName.includes("Pro")?"bg-indigo-50 text-indigo-600 border-indigo-100":"bg-white text-gray-600 border-gray-200"}`,children:[e.jsx(X,{className:"w-3 h-3"}),t.modelName]})]})]})]},t.id)),e.jsx("div",{ref:R})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-white p-6 pb-8",children:e.jsxs("div",{className:"w-full max-w-3xl mx-auto relative group flex flex-col gap-2",children:[d&&e.jsxs("div",{className:"bg-[#F0F4F9] rounded-2xl p-3 w-fit relative animate-fade-in shadow-sm border border-gray-200",children:[e.jsx("div",{className:"relative h-24 w-auto rounded-lg overflow-hidden",children:e.jsx("img",{src:d,alt:"Preview",className:"h-full w-auto object-contain"})}),e.jsx("button",{onClick:F,className:"absolute -top-2 -right-2 bg-gray-800 text-white rounded-full p-1 hover:bg-black transition-colors",children:e.jsx(Z,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:`flex items-center gap-2 bg-[#F0F4F9] rounded-full px-4 py-3 transition-all focus-within:shadow-md focus-within:bg-white focus-within:ring-1 focus-within:ring-gray-200 ${m?"opacity-70 cursor-not-allowed":""}`,children:[e.jsx("button",{onClick:()=>{var t;return(t=w.current)==null?void 0:t.click()},className:"p-2 rounded-full hover:bg-gray-200 text-gray-600 transition-colors relative",title:"ì´ë¯¸ì§€ ì—…ë¡œë“œ",children:e.jsx(T,{className:"w-5 h-5"})}),e.jsx("button",{onClick:q,className:`p-2 rounded-full hover:bg-gray-200 transition-colors relative 
                                ${N?"text-red-500 bg-red-50 animate-pulse":"text-gray-600"}`,title:"ìŒì„± ìž…ë ¥",children:e.jsx(ie,{className:"w-5 h-5"})}),e.jsx("input",{ref:$,type:"text",value:y,onChange:t=>j(t.target.value),onKeyDown:t=>t.key==="Enter"&&!m&&u(),placeholder:N?"ë“£ê³  ìžˆëŠ” ì¤‘...":r==="general"?"Enter a prompt here":"Ask about your project...",className:"flex-1 bg-transparent border-none focus:ring-0 text-gray-800 placeholder-gray-500 text-base",disabled:m}),(y.trim()||d)&&e.jsx("button",{onClick:()=>u(),disabled:m,className:"p-2 rounded-full bg-black text-white hover:bg-gray-800 transition-all animate-fade-in",children:e.jsx(te,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"text-center mt-1 text-xs text-gray-400",children:"Gemini may display inaccurate info, including about people, so double-check its responses."})]})})]})};export{he as GeminiPage};
