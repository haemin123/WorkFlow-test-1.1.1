import{c as d,r as k,T as l,P as D,j as e,S as I,l as S}from"./index-BWhNYll5.js";const A=d("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),H=d("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),B=d("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),U=d("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),R=d("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),G=d("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),z=d("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Q=({tasks:a})=>{var E;const[f,u]=k.useState(""),[j,p]=k.useState(!0),c=Date.now(),x=24*60*60*1e3,g=7*x,h=a.filter(t=>t.status===l.DONE?!1:new Date(t.dueDate).getTime()<c).length,w=a.filter(t=>t.status===l.DONE&&t.updatedAt&&t.updatedAt>=c-g).length,N=a.filter(t=>t.status===l.DONE&&t.updatedAt&&t.updatedAt>=c-2*g&&t.updatedAt<c-g).length;let m=0;N===0?m=w>0?100:0:m=Math.round((w-N)/N*100);const M=m>0?`+${m}%`:`${m}%`,T=a.filter(t=>{if(t.status===l.DONE)return!1;const s=t.updatedAt||t.createdAt||0;return c-s>2*x}).length,v=a.filter(t=>t.priority===D.HIGH).length,$=a.filter(t=>t.priority===D.HIGH&&t.status===l.DONE).length,O=v>0?Math.round($/v*100):0,y=a.reduce((t,s)=>{const r=s.assigneeName&&s.assigneeName.trim()!==""?s.assigneeName:"미지정";return t[r]=(t[r]||0)+1,t},{}),P=Math.max(...Object.values(y),1),C=((E=Object.entries(y).sort((t,s)=>s[1]-t[1])[0])==null?void 0:E[0])||"특정 팀원";return k.useEffect(()=>{(async()=>{p(!0);try{const s={total:a.length,completionRate:a.length>0?Math.round(a.filter(n=>n.status===l.DONE).length/a.length*100):0,inProgress:a.filter(n=>n.status===l.WIP).length,overdue:h,busiestMember:C},r=await S(a,s);u(r)}catch{u("AI 분석 데이터를 불러오는 중 문제가 발생했습니다.")}finally{p(!1)}})()},[a,h,C]),e.jsx("div",{className:"h-full overflow-y-auto custom-scrollbar p-8 bg-gray-50/50 font-sans",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 animate-fade-in",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"프로젝트 인사이트"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"실시간 데이터 기반으로 팀의 업무 효율을 분석합니다."})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(b,{title:"Overdue Tasks",value:`${h} 건`,subText:"마감 기한 초과",icon:e.jsx(A,{className:"w-5 h-5"}),iconBg:"bg-gray-900",iconColor:"text-white",badgeText:h>0?"Warning":"Good",badgeBg:"bg-gray-900",badgeColor:"text-white"}),e.jsx(b,{title:"Weekly Velocity",value:`${w} tasks`,subText:"이번 주 완료",icon:e.jsx(z,{className:"w-5 h-5"}),iconBg:"bg-gray-900",iconColor:"text-white",badgeText:M,badgeBg:"bg-gray-900",badgeColor:"text-white"}),e.jsx(b,{title:"Stuck Tasks",value:`${T} 건`,subText:"2일 이상 변동 없음",icon:e.jsx(U,{className:"w-5 h-5"}),iconBg:"bg-gray-900",iconColor:"text-white",badgeText:T>0?"Check":"Stable",badgeBg:"bg-gray-900",badgeColor:"text-white"}),e.jsx(b,{title:"High Pri. Resolution",value:`${O}%`,subText:`of ${v} 긴급 업무`,icon:e.jsx(B,{className:"w-5 h-5"}),iconBg:"bg-gray-900",iconColor:"text-white",badgeText:"Quality",badgeBg:"bg-gray-900",badgeColor:"text-white"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(H,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"상태별 업무 현황"})]}),e.jsx("div",{className:"space-y-5",children:[l.REQUESTED,l.WIP,l.CHECKED,l.DONE].map(t=>{const s=a.length,r=a.filter(W=>W.status===t).length,n=s>0?r/s*100:0;let i="bg-gray-400",o="기타";switch(t){case l.REQUESTED:i="bg-gray-400",o="요청됨";break;case l.WIP:i="bg-blue-500",o="진행 중";break;case l.CHECKED:i="bg-purple-500",o="검토/승인";break;case l.DONE:i="bg-green-500",o="완료";break}return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"font-medium text-gray-600 flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${i}`}),o]}),e.jsxs("span",{className:"font-bold text-gray-800",children:[r,"건 ",e.jsxs("span",{className:"text-gray-400 font-normal ml-1",children:["(",Math.round(n),"%)"]})]})]}),e.jsx("div",{className:"h-2.5 w-full bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${i} transition-all duration-1000 ease-out`,style:{width:`${n}%`}})})]},t)})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(G,{className:"w-5 h-5 text-gray-400"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"팀원별 업무량 (Workload)"})]}),e.jsxs("div",{className:"flex-1 flex items-end justify-around gap-4 pb-2 min-h-[200px]",children:[Object.entries(y).sort(([,t],[,s])=>s-t).map(([t,s])=>{const r=s/P*100,n=Math.max(r,5),i=a.length,o=i>0?Math.round(s/i*100):0;return e.jsxs("div",{className:"flex flex-col items-center gap-3 w-full group cursor-default relative",children:[e.jsxs("div",{className:"absolute bottom-full mb-2 p-2 px-3 bg-gray-800 text-white text-xs rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap pointer-events-none",children:[e.jsx("p",{className:"font-bold",children:t}),e.jsxs("p",{children:[s,"건 (",o,"%)"]})]}),e.jsxs("div",{className:"relative w-full max-w-[40px] flex items-end justify-center h-[180px] bg-gray-50 rounded-t-lg overflow-hidden",children:[e.jsx("div",{className:"w-full bg-[#306364]/80 group-hover:bg-[#306364] transition-all duration-500 rounded-t-lg relative group-hover:shadow-lg",style:{height:`${n}%`}}),e.jsx("span",{className:"absolute bottom-2 text-xs font-bold text-[#306364] bg-white/80 px-1.5 py-0.5 rounded shadow-sm backdrop-blur-sm",children:s})]}),e.jsx("span",{className:"text-[11px] font-medium text-gray-500 truncate w-full text-center px-1",title:t,children:t})]},t)}),Object.keys(y).length===0&&e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm",children:"데이터가 없습니다."})]})]})]}),e.jsxs("div",{className:"bg-gray-900 rounded-2xl p-8 text-white relative overflow-hidden shadow-xl ring-1 ring-white/10 min-h-[180px]",children:[e.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10 transform translate-x-10 -translate-y-10",children:e.jsx(I,{className:"w-64 h-64 text-white"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center backdrop-blur-md border border-white/20",children:[e.jsx(I,{className:"w-4 h-4 text-white"})," "]}),e.jsx("h3",{className:"text-lg font-bold text-white",children:"Weekly AI Insight"})]}),e.jsx("div",{className:"space-y-4 max-w-3xl",children:j?e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 bg-white/10 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-white/10 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-white/10 rounded w-5/6"}),e.jsx("span",{className:"text-xs text-gray-400 mt-2 block animate-pulse",children:"AI가 데이터를 분석 중입니다..."})]}):e.jsx("p",{className:"text-gray-300 leading-relaxed text-sm whitespace-pre-line",children:f})})]})]})]})})},b=({title:a,value:f,subText:u,icon:j,iconBg:p,iconColor:c,badgeText:x,badgeBg:g,badgeColor:h})=>e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-all duration-300 group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl ${p} flex items-center justify-center ${c} group-hover:scale-110 transition-transform`,children:j}),e.jsxs("div",{className:`flex items-center gap-1.5 text-xs font-bold px-2.5 py-1 rounded-full ${g} ${h}`,children:[x==="Warning"||x==="Check"?e.jsx(A,{className:"w-3.5 h-3.5"}):e.jsx(R,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:x})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-gray-500 text-xs font-bold tracking-wide uppercase block",children:a}),e.jsx("h4",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:f}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:u})]})]});export{Q as Insights};
