(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function WI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var b_={exports:{}},Ga={},F_={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ps=Symbol.for("react.element"),KI=Symbol.for("react.portal"),JI=Symbol.for("react.fragment"),QI=Symbol.for("react.strict_mode"),YI=Symbol.for("react.profiler"),XI=Symbol.for("react.provider"),jI=Symbol.for("react.context"),ZI=Symbol.for("react.forward_ref"),ew=Symbol.for("react.suspense"),tw=Symbol.for("react.memo"),nw=Symbol.for("react.lazy"),Op=Symbol.iterator;function rw(t){return t===null||typeof t!="object"?null:(t=Op&&t[Op]||t["@@iterator"],typeof t=="function"?t:null)}var U_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O_=Object.assign,G_={};function Ji(t,e,n){this.props=t,this.context=e,this.refs=G_,this.updater=n||U_}Ji.prototype.isReactComponent={};Ji.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ji.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function B_(){}B_.prototype=Ji.prototype;function jd(t,e,n){this.props=t,this.context=e,this.refs=G_,this.updater=n||U_}var Zd=jd.prototype=new B_;Zd.constructor=jd;O_(Zd,Ji.prototype);Zd.isPureReactComponent=!0;var Gp=Array.isArray,q_=Object.prototype.hasOwnProperty,ef={current:null},H_={key:!0,ref:!0,__self:!0,__source:!0};function $_(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)q_.call(e,r)&&!H_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ps,type:t,key:o,ref:s,props:i,_owner:ef.current}}function iw(t,e){return{$$typeof:Ps,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ps}function ow(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Bp=/\/+/g;function Hu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ow(""+t.key):e.toString(36)}function Nl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Ps:case KI:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Hu(s,0):r,Gp(i)?(n="",t!=null&&(n=t.replace(Bp,"$&/")+"/"),Nl(i,e,n,"",function(f){return f})):i!=null&&(tf(i)&&(i=iw(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Bp,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Gp(t))for(var l=0;l<t.length;l++){o=t[l];var u=r+Hu(o,l);s+=Nl(o,e,n,u,i)}else if(u=rw(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=r+Hu(o,l++),s+=Nl(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function nl(t,e,n){if(t==null)return t;var r=[],i=0;return Nl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function sw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gt={current:null},Pl={transition:null},lw={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:Pl,ReactCurrentOwner:ef};function z_(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:nl,forEach:function(t,e,n){nl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nl(t,function(){e++}),e},toArray:function(t){return nl(t,function(e){return e})||[]},only:function(t){if(!tf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=Ji;oe.Fragment=JI;oe.Profiler=YI;oe.PureComponent=jd;oe.StrictMode=QI;oe.Suspense=ew;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lw;oe.act=z_;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=O_({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=ef.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)q_.call(e,u)&&!H_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:Ps,type:t.type,key:i,ref:o,props:r,_owner:s}};oe.createContext=function(t){return t={$$typeof:jI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:XI,_context:t},t.Consumer=t};oe.createElement=$_;oe.createFactory=function(t){var e=$_.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:ZI,render:t}};oe.isValidElement=tf;oe.lazy=function(t){return{$$typeof:nw,_payload:{_status:-1,_result:t},_init:sw}};oe.memo=function(t,e){return{$$typeof:tw,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Pl.transition;Pl.transition={};try{t()}finally{Pl.transition=e}};oe.unstable_act=z_;oe.useCallback=function(t,e){return gt.current.useCallback(t,e)};oe.useContext=function(t){return gt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return gt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return gt.current.useEffect(t,e)};oe.useId=function(){return gt.current.useId()};oe.useImperativeHandle=function(t,e,n){return gt.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return gt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return gt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return gt.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return gt.current.useReducer(t,e,n)};oe.useRef=function(t){return gt.current.useRef(t)};oe.useState=function(t){return gt.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return gt.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return gt.current.useTransition()};oe.version="18.3.1";F_.exports=oe;var j=F_.exports;const W_=WI(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw=j,uw=Symbol.for("react.element"),cw=Symbol.for("react.fragment"),dw=Object.prototype.hasOwnProperty,fw=aw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hw={key:!0,ref:!0,__self:!0,__source:!0};function K_(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)dw.call(e,r)&&!hw.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:uw,type:t,key:o,ref:s,props:i,_owner:fw.current}}Ga.Fragment=cw;Ga.jsx=K_;Ga.jsxs=K_;b_.exports=Ga;var y=b_.exports,Cc={},J_={exports:{}},kt={},Q_={exports:{}},Y_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,Q){var X=O.length;O.push(Q);e:for(;0<X;){var de=X-1>>>1,ge=O[de];if(0<i(ge,Q))O[de]=Q,O[X]=ge,X=de;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var Q=O[0],X=O.pop();if(X!==Q){O[0]=X;e:for(var de=0,ge=O.length,qt=ge>>>1;de<qt;){var Mt=2*(de+1)-1,Ir=O[Mt],Ht=Mt+1,Mn=O[Ht];if(0>i(Ir,X))Ht<ge&&0>i(Mn,Ir)?(O[de]=Mn,O[Ht]=X,de=Ht):(O[de]=Ir,O[Mt]=X,de=Mt);else if(Ht<ge&&0>i(Mn,X))O[de]=Mn,O[Ht]=X,de=Ht;else break e}}return Q}function i(O,Q){var X=O.sortIndex-Q.sortIndex;return X!==0?X:O.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],f=[],h=1,p=null,m=3,v=!1,P=!1,k=!1,L=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(O){for(var Q=n(f);Q!==null;){if(Q.callback===null)r(f);else if(Q.startTime<=O)r(f),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(f)}}function M(O){if(k=!1,x(O),!P)if(n(u)!==null)P=!0,J(V);else{var Q=n(f);Q!==null&&ie(M,Q.startTime-O)}}function V(O,Q){P=!1,k&&(k=!1,A(E),E=-1),v=!0;var X=m;try{for(x(Q),p=n(u);p!==null&&(!(p.expirationTime>Q)||O&&!S());){var de=p.callback;if(typeof de=="function"){p.callback=null,m=p.priorityLevel;var ge=de(p.expirationTime<=Q);Q=t.unstable_now(),typeof ge=="function"?p.callback=ge:p===n(u)&&r(u),x(Q)}else r(u);p=n(u)}if(p!==null)var qt=!0;else{var Mt=n(f);Mt!==null&&ie(M,Mt.startTime-Q),qt=!1}return qt}finally{p=null,m=X,v=!1}}var F=!1,w=null,E=-1,C=5,R=-1;function S(){return!(t.unstable_now()-R<C)}function D(){if(w!==null){var O=t.unstable_now();R=O;var Q=!0;try{Q=w(!0,O)}finally{Q?N():(F=!1,w=null)}}else F=!1}var N;if(typeof T=="function")N=function(){T(D)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Ye=he.port2;he.port1.onmessage=D,N=function(){Ye.postMessage(null)}}else N=function(){L(D,0)};function J(O){w=O,F||(F=!0,N())}function ie(O,Q){E=L(function(){O(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){P||v||(P=!0,J(V))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var X=m;m=Q;try{return O()}finally{m=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,Q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var X=m;m=O;try{return Q()}finally{m=X}},t.unstable_scheduleCallback=function(O,Q,X){var de=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?de+X:de):X=de,O){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=X+ge,O={id:h++,callback:Q,priorityLevel:O,startTime:X,expirationTime:ge,sortIndex:-1},X>de?(O.sortIndex=X,e(f,O),n(u)===null&&O===n(f)&&(k?(A(E),E=-1):k=!0,ie(M,X-de))):(O.sortIndex=ge,e(u,O),P||v||(P=!0,J(V))),O},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(O){var Q=m;return function(){var X=m;m=Q;try{return O.apply(this,arguments)}finally{m=X}}}})(Y_);Q_.exports=Y_;var pw=Q_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw=j,Pt=pw;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var X_=new Set,is={};function Wr(t,e){Li(t,e),Li(t+"Capture",e)}function Li(t,e){for(is[t]=e,t=0;t<e.length;t++)X_.add(e[t])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xc=Object.prototype.hasOwnProperty,gw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qp={},Hp={};function yw(t){return xc.call(Hp,t)?!0:xc.call(qp,t)?!1:gw.test(t)?Hp[t]=!0:(qp[t]=!0,!1)}function _w(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vw(t,e,n,r){if(e===null||typeof e>"u"||_w(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var nf=/[\-:]([a-z])/g;function rf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nf,rf);tt[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nf,rf);tt[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nf,rf);tt[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function of(t,e,n,r){var i=tt.hasOwnProperty(e)?tt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vw(e,n,i,r)&&(n=null),r||i===null?yw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Pn=mw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rl=Symbol.for("react.element"),ai=Symbol.for("react.portal"),ui=Symbol.for("react.fragment"),sf=Symbol.for("react.strict_mode"),Ac=Symbol.for("react.profiler"),j_=Symbol.for("react.provider"),Z_=Symbol.for("react.context"),lf=Symbol.for("react.forward_ref"),Rc=Symbol.for("react.suspense"),Nc=Symbol.for("react.suspense_list"),af=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),ev=Symbol.for("react.offscreen"),$p=Symbol.iterator;function wo(t){return t===null||typeof t!="object"?null:(t=$p&&t[$p]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,$u;function Lo(t){if($u===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$u=e&&e[1]||""}return`
`+$u+t}var zu=!1;function Wu(t,e){if(!t||zu)return"";zu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var u=`
`+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=l);break}}}finally{zu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Lo(t):""}function Ew(t){switch(t.tag){case 5:return Lo(t.type);case 16:return Lo("Lazy");case 13:return Lo("Suspense");case 19:return Lo("SuspenseList");case 0:case 2:case 15:return t=Wu(t.type,!1),t;case 11:return t=Wu(t.type.render,!1),t;case 1:return t=Wu(t.type,!0),t;default:return""}}function Pc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ui:return"Fragment";case ai:return"Portal";case Ac:return"Profiler";case sf:return"StrictMode";case Rc:return"Suspense";case Nc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Z_:return(t.displayName||"Context")+".Consumer";case j_:return(t._context.displayName||"Context")+".Provider";case lf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case af:return e=t.displayName||null,e!==null?e:Pc(t.type)||"Memo";case Bn:e=t._payload,t=t._init;try{return Pc(t(e))}catch{}}return null}function Tw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pc(e);case 8:return e===sf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function lr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Iw(t){var e=tv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function il(t){t._valueTracker||(t._valueTracker=Iw(t))}function nv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kc(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=lr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rv(t,e){e=e.checked,e!=null&&of(t,"checked",e,!1)}function Dc(t,e){rv(t,e);var n=lr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mc(t,e.type,lr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mc(t,e,n){(e!=="number"||Xl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bo=Array.isArray;function Ii(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+lr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Vc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(bo(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:lr(n)}}function iv(t,e){var n=lr(e.value),r=lr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Jp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ov(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ov(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ol,sv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ol=ol||document.createElement("div"),ol.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ol.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function os(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ho={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ww=["Webkit","ms","Moz","O"];Object.keys(Ho).forEach(function(t){ww.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ho[e]=Ho[t]})});function lv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ho.hasOwnProperty(t)&&Ho[t]?(""+e).trim():e+"px"}function av(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=lv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Sw=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bc(t,e){if(e){if(Sw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Fc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uc=null;function uf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oc=null,wi=null,Si=null;function Qp(t){if(t=Ms(t)){if(typeof Oc!="function")throw Error(q(280));var e=t.stateNode;e&&(e=za(e),Oc(t.stateNode,t.type,e))}}function uv(t){wi?Si?Si.push(t):Si=[t]:wi=t}function cv(){if(wi){var t=wi,e=Si;if(Si=wi=null,Qp(t),e)for(t=0;t<e.length;t++)Qp(e[t])}}function dv(t,e){return t(e)}function fv(){}var Ku=!1;function hv(t,e,n){if(Ku)return t(e,n);Ku=!0;try{return dv(t,e,n)}finally{Ku=!1,(wi!==null||Si!==null)&&(fv(),cv())}}function ss(t,e){var n=t.stateNode;if(n===null)return null;var r=za(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Gc=!1;if(Tn)try{var So={};Object.defineProperty(So,"passive",{get:function(){Gc=!0}}),window.addEventListener("test",So,So),window.removeEventListener("test",So,So)}catch{Gc=!1}function Cw(t,e,n,r,i,o,s,l,u){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(h){this.onError(h)}}var $o=!1,jl=null,Zl=!1,Bc=null,xw={onError:function(t){$o=!0,jl=t}};function Aw(t,e,n,r,i,o,s,l,u){$o=!1,jl=null,Cw.apply(xw,arguments)}function Rw(t,e,n,r,i,o,s,l,u){if(Aw.apply(this,arguments),$o){if($o){var f=jl;$o=!1,jl=null}else throw Error(q(198));Zl||(Zl=!0,Bc=f)}}function Kr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yp(t){if(Kr(t)!==t)throw Error(q(188))}function Nw(t){var e=t.alternate;if(!e){if(e=Kr(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Yp(i),t;if(o===r)return Yp(i),e;o=o.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function mv(t){return t=Nw(t),t!==null?gv(t):null}function gv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gv(t);if(e!==null)return e;t=t.sibling}return null}var yv=Pt.unstable_scheduleCallback,Xp=Pt.unstable_cancelCallback,Pw=Pt.unstable_shouldYield,kw=Pt.unstable_requestPaint,be=Pt.unstable_now,Dw=Pt.unstable_getCurrentPriorityLevel,cf=Pt.unstable_ImmediatePriority,_v=Pt.unstable_UserBlockingPriority,ea=Pt.unstable_NormalPriority,Mw=Pt.unstable_LowPriority,vv=Pt.unstable_IdlePriority,Ba=null,an=null;function Vw(t){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Ba,t,void 0,(t.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:Fw,Lw=Math.log,bw=Math.LN2;function Fw(t){return t>>>=0,t===0?32:31-(Lw(t)/bw|0)|0}var sl=64,ll=4194304;function Fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ta(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=Fo(l):(o&=s,o!==0&&(r=Fo(o)))}else s=n&~i,s!==0?r=Fo(s):o!==0&&(r=Fo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Jt(e),i=1<<n,r|=t[n],e&=~i;return r}function Uw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ow(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Jt(o),l=1<<s,u=i[s];u===-1?(!(l&n)||l&r)&&(i[s]=Uw(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function qc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ev(){var t=sl;return sl<<=1,!(sl&4194240)&&(sl=64),t}function Ju(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ks(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jt(e),t[e]=n}function Gw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Jt(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function df(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Jt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var me=0;function Tv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Iv,ff,wv,Sv,Cv,Hc=!1,al=[],Jn=null,Qn=null,Yn=null,ls=new Map,as=new Map,Hn=[],Bw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jp(t,e){switch(t){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":ls.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":as.delete(e.pointerId)}}function Co(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Ms(e),e!==null&&ff(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function qw(t,e,n,r,i){switch(e){case"focusin":return Jn=Co(Jn,t,e,n,r,i),!0;case"dragenter":return Qn=Co(Qn,t,e,n,r,i),!0;case"mouseover":return Yn=Co(Yn,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ls.set(o,Co(ls.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,as.set(o,Co(as.get(o)||null,t,e,n,r,i)),!0}return!1}function xv(t){var e=Mr(t.target);if(e!==null){var n=Kr(e);if(n!==null){if(e=n.tag,e===13){if(e=pv(n),e!==null){t.blockedOn=e,Cv(t.priority,function(){wv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function kl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$c(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Uc=r,n.target.dispatchEvent(r),Uc=null}else return e=Ms(n),e!==null&&ff(e),t.blockedOn=n,!1;e.shift()}return!0}function Zp(t,e,n){kl(t)&&n.delete(e)}function Hw(){Hc=!1,Jn!==null&&kl(Jn)&&(Jn=null),Qn!==null&&kl(Qn)&&(Qn=null),Yn!==null&&kl(Yn)&&(Yn=null),ls.forEach(Zp),as.forEach(Zp)}function xo(t,e){t.blockedOn===e&&(t.blockedOn=null,Hc||(Hc=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,Hw)))}function us(t){function e(i){return xo(i,t)}if(0<al.length){xo(al[0],t);for(var n=1;n<al.length;n++){var r=al[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Jn!==null&&xo(Jn,t),Qn!==null&&xo(Qn,t),Yn!==null&&xo(Yn,t),ls.forEach(e),as.forEach(e),n=0;n<Hn.length;n++)r=Hn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)xv(n),n.blockedOn===null&&Hn.shift()}var Ci=Pn.ReactCurrentBatchConfig,na=!0;function $w(t,e,n,r){var i=me,o=Ci.transition;Ci.transition=null;try{me=1,hf(t,e,n,r)}finally{me=i,Ci.transition=o}}function zw(t,e,n,r){var i=me,o=Ci.transition;Ci.transition=null;try{me=4,hf(t,e,n,r)}finally{me=i,Ci.transition=o}}function hf(t,e,n,r){if(na){var i=$c(t,e,n,r);if(i===null)ic(t,e,r,ra,n),jp(t,r);else if(qw(i,t,e,n,r))r.stopPropagation();else if(jp(t,r),e&4&&-1<Bw.indexOf(t)){for(;i!==null;){var o=Ms(i);if(o!==null&&Iv(o),o=$c(t,e,n,r),o===null&&ic(t,e,r,ra,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else ic(t,e,r,null,n)}}var ra=null;function $c(t,e,n,r){if(ra=null,t=uf(r),t=Mr(t),t!==null)if(e=Kr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ra=t,null}function Av(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dw()){case cf:return 1;case _v:return 4;case ea:case Mw:return 16;case vv:return 536870912;default:return 16}default:return 16}}var zn=null,pf=null,Dl=null;function Rv(){if(Dl)return Dl;var t,e=pf,n=e.length,r,i="value"in zn?zn.value:zn.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Dl=i.slice(t,1<r?1-r:void 0)}function Ml(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ul(){return!0}function em(){return!1}function Dt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ul:em,this.isPropagationStopped=em,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ul)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ul)},persist:function(){},isPersistent:ul}),e}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mf=Dt(Qi),Ds=ke({},Qi,{view:0,detail:0}),Ww=Dt(Ds),Qu,Yu,Ao,qa=ke({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ao&&(Ao&&t.type==="mousemove"?(Qu=t.screenX-Ao.screenX,Yu=t.screenY-Ao.screenY):Yu=Qu=0,Ao=t),Qu)},movementY:function(t){return"movementY"in t?t.movementY:Yu}}),tm=Dt(qa),Kw=ke({},qa,{dataTransfer:0}),Jw=Dt(Kw),Qw=ke({},Ds,{relatedTarget:0}),Xu=Dt(Qw),Yw=ke({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Xw=Dt(Yw),jw=ke({},Qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Zw=Dt(jw),eS=ke({},Qi,{data:0}),nm=Dt(eS),tS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rS[t])?!!e[t]:!1}function gf(){return iS}var oS=ke({},Ds,{key:function(t){if(t.key){var e=tS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ml(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gf,charCode:function(t){return t.type==="keypress"?Ml(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ml(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sS=Dt(oS),lS=ke({},qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rm=Dt(lS),aS=ke({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gf}),uS=Dt(aS),cS=ke({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),dS=Dt(cS),fS=ke({},qa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hS=Dt(fS),pS=[9,13,27,32],yf=Tn&&"CompositionEvent"in window,zo=null;Tn&&"documentMode"in document&&(zo=document.documentMode);var mS=Tn&&"TextEvent"in window&&!zo,Nv=Tn&&(!yf||zo&&8<zo&&11>=zo),im=" ",om=!1;function Pv(t,e){switch(t){case"keyup":return pS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ci=!1;function gS(t,e){switch(t){case"compositionend":return kv(e);case"keypress":return e.which!==32?null:(om=!0,im);case"textInput":return t=e.data,t===im&&om?null:t;default:return null}}function yS(t,e){if(ci)return t==="compositionend"||!yf&&Pv(t,e)?(t=Rv(),Dl=pf=zn=null,ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nv&&e.locale!=="ko"?null:e.data;default:return null}}var _S={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_S[t.type]:e==="textarea"}function Dv(t,e,n,r){uv(r),e=ia(e,"onChange"),0<e.length&&(n=new mf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wo=null,cs=null;function vS(t){Hv(t,0)}function Ha(t){var e=hi(t);if(nv(e))return t}function ES(t,e){if(t==="change")return e}var Mv=!1;if(Tn){var ju;if(Tn){var Zu="oninput"in document;if(!Zu){var lm=document.createElement("div");lm.setAttribute("oninput","return;"),Zu=typeof lm.oninput=="function"}ju=Zu}else ju=!1;Mv=ju&&(!document.documentMode||9<document.documentMode)}function am(){Wo&&(Wo.detachEvent("onpropertychange",Vv),cs=Wo=null)}function Vv(t){if(t.propertyName==="value"&&Ha(cs)){var e=[];Dv(e,cs,t,uf(t)),hv(vS,e)}}function TS(t,e,n){t==="focusin"?(am(),Wo=e,cs=n,Wo.attachEvent("onpropertychange",Vv)):t==="focusout"&&am()}function IS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ha(cs)}function wS(t,e){if(t==="click")return Ha(e)}function SS(t,e){if(t==="input"||t==="change")return Ha(e)}function CS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xt=typeof Object.is=="function"?Object.is:CS;function ds(t,e){if(Xt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xc.call(e,i)||!Xt(t[i],e[i]))return!1}return!0}function um(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cm(t,e){var n=um(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=um(n)}}function Lv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Lv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bv(){for(var t=window,e=Xl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xl(t.document)}return e}function _f(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xS(t){var e=bv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Lv(n.ownerDocument.documentElement,n)){if(r!==null&&_f(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=cm(n,o);var s=cm(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AS=Tn&&"documentMode"in document&&11>=document.documentMode,di=null,zc=null,Ko=null,Wc=!1;function dm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wc||di==null||di!==Xl(r)||(r=di,"selectionStart"in r&&_f(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ko&&ds(Ko,r)||(Ko=r,r=ia(zc,"onSelect"),0<r.length&&(e=new mf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=di)))}function cl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fi={animationend:cl("Animation","AnimationEnd"),animationiteration:cl("Animation","AnimationIteration"),animationstart:cl("Animation","AnimationStart"),transitionend:cl("Transition","TransitionEnd")},ec={},Fv={};Tn&&(Fv=document.createElement("div").style,"AnimationEvent"in window||(delete fi.animationend.animation,delete fi.animationiteration.animation,delete fi.animationstart.animation),"TransitionEvent"in window||delete fi.transitionend.transition);function $a(t){if(ec[t])return ec[t];if(!fi[t])return t;var e=fi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Fv)return ec[t]=e[n];return t}var Uv=$a("animationend"),Ov=$a("animationiteration"),Gv=$a("animationstart"),Bv=$a("transitionend"),qv=new Map,fm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(t,e){qv.set(t,e),Wr(e,[t])}for(var tc=0;tc<fm.length;tc++){var nc=fm[tc],RS=nc.toLowerCase(),NS=nc[0].toUpperCase()+nc.slice(1);gr(RS,"on"+NS)}gr(Uv,"onAnimationEnd");gr(Ov,"onAnimationIteration");gr(Gv,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(Bv,"onTransitionEnd");Li("onMouseEnter",["mouseout","mouseover"]);Li("onMouseLeave",["mouseout","mouseover"]);Li("onPointerEnter",["pointerout","pointerover"]);Li("onPointerLeave",["pointerout","pointerover"]);Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uo));function hm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Rw(r,e,void 0,t),t.currentTarget=null}function Hv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==o&&i.isPropagationStopped())break e;hm(i,l,f),o=u}else for(s=0;s<r.length;s++){if(l=r[s],u=l.instance,f=l.currentTarget,l=l.listener,u!==o&&i.isPropagationStopped())break e;hm(i,l,f),o=u}}}if(Zl)throw t=Bc,Zl=!1,Bc=null,t}function we(t,e){var n=e[Xc];n===void 0&&(n=e[Xc]=new Set);var r=t+"__bubble";n.has(r)||($v(e,t,2,!1),n.add(r))}function rc(t,e,n){var r=0;e&&(r|=4),$v(n,t,r,e)}var dl="_reactListening"+Math.random().toString(36).slice(2);function fs(t){if(!t[dl]){t[dl]=!0,X_.forEach(function(n){n!=="selectionchange"&&(PS.has(n)||rc(n,!1,t),rc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dl]||(e[dl]=!0,rc("selectionchange",!1,e))}}function $v(t,e,n,r){switch(Av(e)){case 1:var i=$w;break;case 4:i=zw;break;default:i=hf}n=i.bind(null,e,n,t),i=void 0,!Gc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ic(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Mr(l),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}l=l.parentNode}}r=r.return}hv(function(){var f=o,h=uf(n),p=[];e:{var m=qv.get(t);if(m!==void 0){var v=mf,P=t;switch(t){case"keypress":if(Ml(n)===0)break e;case"keydown":case"keyup":v=sS;break;case"focusin":P="focus",v=Xu;break;case"focusout":P="blur",v=Xu;break;case"beforeblur":case"afterblur":v=Xu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=tm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Jw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=uS;break;case Uv:case Ov:case Gv:v=Xw;break;case Bv:v=dS;break;case"scroll":v=Ww;break;case"wheel":v=hS;break;case"copy":case"cut":case"paste":v=Zw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=rm}var k=(e&4)!==0,L=!k&&t==="scroll",A=k?m!==null?m+"Capture":null:m;k=[];for(var T=f,x;T!==null;){x=T;var M=x.stateNode;if(x.tag===5&&M!==null&&(x=M,A!==null&&(M=ss(T,A),M!=null&&k.push(hs(T,M,x)))),L)break;T=T.return}0<k.length&&(m=new v(m,P,null,n,h),p.push({event:m,listeners:k}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==Uc&&(P=n.relatedTarget||n.fromElement)&&(Mr(P)||P[In]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(P=n.relatedTarget||n.toElement,v=f,P=P?Mr(P):null,P!==null&&(L=Kr(P),P!==L||P.tag!==5&&P.tag!==6)&&(P=null)):(v=null,P=f),v!==P)){if(k=tm,M="onMouseLeave",A="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(k=rm,M="onPointerLeave",A="onPointerEnter",T="pointer"),L=v==null?m:hi(v),x=P==null?m:hi(P),m=new k(M,T+"leave",v,n,h),m.target=L,m.relatedTarget=x,M=null,Mr(h)===f&&(k=new k(A,T+"enter",P,n,h),k.target=x,k.relatedTarget=L,M=k),L=M,v&&P)t:{for(k=v,A=P,T=0,x=k;x;x=ni(x))T++;for(x=0,M=A;M;M=ni(M))x++;for(;0<T-x;)k=ni(k),T--;for(;0<x-T;)A=ni(A),x--;for(;T--;){if(k===A||A!==null&&k===A.alternate)break t;k=ni(k),A=ni(A)}k=null}else k=null;v!==null&&pm(p,m,v,k,!1),P!==null&&L!==null&&pm(p,L,P,k,!0)}}e:{if(m=f?hi(f):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var V=ES;else if(sm(m))if(Mv)V=SS;else{V=IS;var F=TS}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=wS);if(V&&(V=V(t,f))){Dv(p,V,n,h);break e}F&&F(t,m,f),t==="focusout"&&(F=m._wrapperState)&&F.controlled&&m.type==="number"&&Mc(m,"number",m.value)}switch(F=f?hi(f):window,t){case"focusin":(sm(F)||F.contentEditable==="true")&&(di=F,zc=f,Ko=null);break;case"focusout":Ko=zc=di=null;break;case"mousedown":Wc=!0;break;case"contextmenu":case"mouseup":case"dragend":Wc=!1,dm(p,n,h);break;case"selectionchange":if(AS)break;case"keydown":case"keyup":dm(p,n,h)}var w;if(yf)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ci?Pv(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Nv&&n.locale!=="ko"&&(ci||E!=="onCompositionStart"?E==="onCompositionEnd"&&ci&&(w=Rv()):(zn=h,pf="value"in zn?zn.value:zn.textContent,ci=!0)),F=ia(f,E),0<F.length&&(E=new nm(E,t,null,n,h),p.push({event:E,listeners:F}),w?E.data=w:(w=kv(n),w!==null&&(E.data=w)))),(w=mS?gS(t,n):yS(t,n))&&(f=ia(f,"onBeforeInput"),0<f.length&&(h=new nm("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:f}),h.data=w))}Hv(p,e)})}function hs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ia(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ss(t,n),o!=null&&r.unshift(hs(t,o,i)),o=ss(t,e),o!=null&&r.push(hs(t,o,i))),t=t.return}return r}function ni(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pm(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,u=l.alternate,f=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&f!==null&&(l=f,i?(u=ss(n,o),u!=null&&s.unshift(hs(n,u,l))):i||(u=ss(n,o),u!=null&&s.push(hs(n,u,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var kS=/\r\n?/g,DS=/\u0000|\uFFFD/g;function mm(t){return(typeof t=="string"?t:""+t).replace(kS,`
`).replace(DS,"")}function fl(t,e,n){if(e=mm(e),mm(t)!==e&&n)throw Error(q(425))}function oa(){}var Kc=null,Jc=null;function Qc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yc=typeof setTimeout=="function"?setTimeout:void 0,MS=typeof clearTimeout=="function"?clearTimeout:void 0,gm=typeof Promise=="function"?Promise:void 0,VS=typeof queueMicrotask=="function"?queueMicrotask:typeof gm<"u"?function(t){return gm.resolve(null).then(t).catch(LS)}:Yc;function LS(t){setTimeout(function(){throw t})}function oc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),us(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);us(e)}function Xn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ym(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yi=Math.random().toString(36).slice(2),ln="__reactFiber$"+Yi,ps="__reactProps$"+Yi,In="__reactContainer$"+Yi,Xc="__reactEvents$"+Yi,bS="__reactListeners$"+Yi,FS="__reactHandles$"+Yi;function Mr(t){var e=t[ln];if(e)return e;for(var n=t.parentNode;n;){if(e=n[In]||n[ln]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ym(t);t!==null;){if(n=t[ln])return n;t=ym(t)}return e}t=n,n=t.parentNode}return null}function Ms(t){return t=t[ln]||t[In],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function za(t){return t[ps]||null}var jc=[],pi=-1;function yr(t){return{current:t}}function Ae(t){0>pi||(t.current=jc[pi],jc[pi]=null,pi--)}function Te(t,e){pi++,jc[pi]=t.current,t.current=e}var ar={},dt=yr(ar),It=yr(!1),Or=ar;function bi(t,e){var n=t.type.contextTypes;if(!n)return ar;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function wt(t){return t=t.childContextTypes,t!=null}function sa(){Ae(It),Ae(dt)}function _m(t,e,n){if(dt.current!==ar)throw Error(q(168));Te(dt,e),Te(It,n)}function zv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,Tw(t)||"Unknown",i));return ke({},n,r)}function la(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ar,Or=dt.current,Te(dt,t),Te(It,It.current),!0}function vm(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=zv(t,e,Or),r.__reactInternalMemoizedMergedChildContext=t,Ae(It),Ae(dt),Te(dt,t)):Ae(It),Te(It,n)}var yn=null,Wa=!1,sc=!1;function Wv(t){yn===null?yn=[t]:yn.push(t)}function US(t){Wa=!0,Wv(t)}function _r(){if(!sc&&yn!==null){sc=!0;var t=0,e=me;try{var n=yn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yn=null,Wa=!1}catch(i){throw yn!==null&&(yn=yn.slice(t+1)),yv(cf,_r),i}finally{me=e,sc=!1}}return null}var mi=[],gi=0,aa=null,ua=0,Vt=[],Lt=0,Gr=null,_n=1,vn="";function Nr(t,e){mi[gi++]=ua,mi[gi++]=aa,aa=t,ua=e}function Kv(t,e,n){Vt[Lt++]=_n,Vt[Lt++]=vn,Vt[Lt++]=Gr,Gr=t;var r=_n;t=vn;var i=32-Jt(r)-1;r&=~(1<<i),n+=1;var o=32-Jt(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,_n=1<<32-Jt(e)+i|n<<i|r,vn=o+t}else _n=1<<o|n<<i|r,vn=t}function vf(t){t.return!==null&&(Nr(t,1),Kv(t,1,0))}function Ef(t){for(;t===aa;)aa=mi[--gi],mi[gi]=null,ua=mi[--gi],mi[gi]=null;for(;t===Gr;)Gr=Vt[--Lt],Vt[Lt]=null,vn=Vt[--Lt],Vt[Lt]=null,_n=Vt[--Lt],Vt[Lt]=null}var Nt=null,At=null,Re=!1,Kt=null;function Jv(t,e){var n=Ft(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Em(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nt=t,At=Xn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nt=t,At=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gr!==null?{id:_n,overflow:vn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ft(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nt=t,At=null,!0):!1;default:return!1}}function Zc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ed(t){if(Re){var e=At;if(e){var n=e;if(!Em(t,e)){if(Zc(t))throw Error(q(418));e=Xn(n.nextSibling);var r=Nt;e&&Em(t,e)?Jv(r,n):(t.flags=t.flags&-4097|2,Re=!1,Nt=t)}}else{if(Zc(t))throw Error(q(418));t.flags=t.flags&-4097|2,Re=!1,Nt=t}}}function Tm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nt=t}function hl(t){if(t!==Nt)return!1;if(!Re)return Tm(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qc(t.type,t.memoizedProps)),e&&(e=At)){if(Zc(t))throw Qv(),Error(q(418));for(;e;)Jv(t,e),e=Xn(e.nextSibling)}if(Tm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){At=Xn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}At=null}}else At=Nt?Xn(t.stateNode.nextSibling):null;return!0}function Qv(){for(var t=At;t;)t=Xn(t.nextSibling)}function Fi(){At=Nt=null,Re=!1}function Tf(t){Kt===null?Kt=[t]:Kt.push(t)}var OS=Pn.ReactCurrentBatchConfig;function Ro(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function pl(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Im(t){var e=t._init;return e(t._payload)}function Yv(t){function e(A,T){if(t){var x=A.deletions;x===null?(A.deletions=[T],A.flags|=16):x.push(T)}}function n(A,T){if(!t)return null;for(;T!==null;)e(A,T),T=T.sibling;return null}function r(A,T){for(A=new Map;T!==null;)T.key!==null?A.set(T.key,T):A.set(T.index,T),T=T.sibling;return A}function i(A,T){return A=tr(A,T),A.index=0,A.sibling=null,A}function o(A,T,x){return A.index=x,t?(x=A.alternate,x!==null?(x=x.index,x<T?(A.flags|=2,T):x):(A.flags|=2,T)):(A.flags|=1048576,T)}function s(A){return t&&A.alternate===null&&(A.flags|=2),A}function l(A,T,x,M){return T===null||T.tag!==6?(T=hc(x,A.mode,M),T.return=A,T):(T=i(T,x),T.return=A,T)}function u(A,T,x,M){var V=x.type;return V===ui?h(A,T,x.props.children,M,x.key):T!==null&&(T.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Bn&&Im(V)===T.type)?(M=i(T,x.props),M.ref=Ro(A,T,x),M.return=A,M):(M=Gl(x.type,x.key,x.props,null,A.mode,M),M.ref=Ro(A,T,x),M.return=A,M)}function f(A,T,x,M){return T===null||T.tag!==4||T.stateNode.containerInfo!==x.containerInfo||T.stateNode.implementation!==x.implementation?(T=pc(x,A.mode,M),T.return=A,T):(T=i(T,x.children||[]),T.return=A,T)}function h(A,T,x,M,V){return T===null||T.tag!==7?(T=Ur(x,A.mode,M,V),T.return=A,T):(T=i(T,x),T.return=A,T)}function p(A,T,x){if(typeof T=="string"&&T!==""||typeof T=="number")return T=hc(""+T,A.mode,x),T.return=A,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case rl:return x=Gl(T.type,T.key,T.props,null,A.mode,x),x.ref=Ro(A,null,T),x.return=A,x;case ai:return T=pc(T,A.mode,x),T.return=A,T;case Bn:var M=T._init;return p(A,M(T._payload),x)}if(bo(T)||wo(T))return T=Ur(T,A.mode,x,null),T.return=A,T;pl(A,T)}return null}function m(A,T,x,M){var V=T!==null?T.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return V!==null?null:l(A,T,""+x,M);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case rl:return x.key===V?u(A,T,x,M):null;case ai:return x.key===V?f(A,T,x,M):null;case Bn:return V=x._init,m(A,T,V(x._payload),M)}if(bo(x)||wo(x))return V!==null?null:h(A,T,x,M,null);pl(A,x)}return null}function v(A,T,x,M,V){if(typeof M=="string"&&M!==""||typeof M=="number")return A=A.get(x)||null,l(T,A,""+M,V);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case rl:return A=A.get(M.key===null?x:M.key)||null,u(T,A,M,V);case ai:return A=A.get(M.key===null?x:M.key)||null,f(T,A,M,V);case Bn:var F=M._init;return v(A,T,x,F(M._payload),V)}if(bo(M)||wo(M))return A=A.get(x)||null,h(T,A,M,V,null);pl(T,M)}return null}function P(A,T,x,M){for(var V=null,F=null,w=T,E=T=0,C=null;w!==null&&E<x.length;E++){w.index>E?(C=w,w=null):C=w.sibling;var R=m(A,w,x[E],M);if(R===null){w===null&&(w=C);break}t&&w&&R.alternate===null&&e(A,w),T=o(R,T,E),F===null?V=R:F.sibling=R,F=R,w=C}if(E===x.length)return n(A,w),Re&&Nr(A,E),V;if(w===null){for(;E<x.length;E++)w=p(A,x[E],M),w!==null&&(T=o(w,T,E),F===null?V=w:F.sibling=w,F=w);return Re&&Nr(A,E),V}for(w=r(A,w);E<x.length;E++)C=v(w,A,E,x[E],M),C!==null&&(t&&C.alternate!==null&&w.delete(C.key===null?E:C.key),T=o(C,T,E),F===null?V=C:F.sibling=C,F=C);return t&&w.forEach(function(S){return e(A,S)}),Re&&Nr(A,E),V}function k(A,T,x,M){var V=wo(x);if(typeof V!="function")throw Error(q(150));if(x=V.call(x),x==null)throw Error(q(151));for(var F=V=null,w=T,E=T=0,C=null,R=x.next();w!==null&&!R.done;E++,R=x.next()){w.index>E?(C=w,w=null):C=w.sibling;var S=m(A,w,R.value,M);if(S===null){w===null&&(w=C);break}t&&w&&S.alternate===null&&e(A,w),T=o(S,T,E),F===null?V=S:F.sibling=S,F=S,w=C}if(R.done)return n(A,w),Re&&Nr(A,E),V;if(w===null){for(;!R.done;E++,R=x.next())R=p(A,R.value,M),R!==null&&(T=o(R,T,E),F===null?V=R:F.sibling=R,F=R);return Re&&Nr(A,E),V}for(w=r(A,w);!R.done;E++,R=x.next())R=v(w,A,E,R.value,M),R!==null&&(t&&R.alternate!==null&&w.delete(R.key===null?E:R.key),T=o(R,T,E),F===null?V=R:F.sibling=R,F=R);return t&&w.forEach(function(D){return e(A,D)}),Re&&Nr(A,E),V}function L(A,T,x,M){if(typeof x=="object"&&x!==null&&x.type===ui&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case rl:e:{for(var V=x.key,F=T;F!==null;){if(F.key===V){if(V=x.type,V===ui){if(F.tag===7){n(A,F.sibling),T=i(F,x.props.children),T.return=A,A=T;break e}}else if(F.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Bn&&Im(V)===F.type){n(A,F.sibling),T=i(F,x.props),T.ref=Ro(A,F,x),T.return=A,A=T;break e}n(A,F);break}else e(A,F);F=F.sibling}x.type===ui?(T=Ur(x.props.children,A.mode,M,x.key),T.return=A,A=T):(M=Gl(x.type,x.key,x.props,null,A.mode,M),M.ref=Ro(A,T,x),M.return=A,A=M)}return s(A);case ai:e:{for(F=x.key;T!==null;){if(T.key===F)if(T.tag===4&&T.stateNode.containerInfo===x.containerInfo&&T.stateNode.implementation===x.implementation){n(A,T.sibling),T=i(T,x.children||[]),T.return=A,A=T;break e}else{n(A,T);break}else e(A,T);T=T.sibling}T=pc(x,A.mode,M),T.return=A,A=T}return s(A);case Bn:return F=x._init,L(A,T,F(x._payload),M)}if(bo(x))return P(A,T,x,M);if(wo(x))return k(A,T,x,M);pl(A,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,T!==null&&T.tag===6?(n(A,T.sibling),T=i(T,x),T.return=A,A=T):(n(A,T),T=hc(x,A.mode,M),T.return=A,A=T),s(A)):n(A,T)}return L}var Ui=Yv(!0),Xv=Yv(!1),ca=yr(null),da=null,yi=null,If=null;function wf(){If=yi=da=null}function Sf(t){var e=ca.current;Ae(ca),t._currentValue=e}function td(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xi(t,e){da=t,If=yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tt=!0),t.firstContext=null)}function Gt(t){var e=t._currentValue;if(If!==t)if(t={context:t,memoizedValue:e,next:null},yi===null){if(da===null)throw Error(q(308));yi=t,da.dependencies={lanes:0,firstContext:t}}else yi=yi.next=t;return e}var Vr=null;function Cf(t){Vr===null?Vr=[t]:Vr.push(t)}function jv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Cf(e)):(n.next=i.next,i.next=n),e.interleaved=n,wn(t,r)}function wn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qn=!1;function xf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function En(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,wn(t,n)}return i=r.interleaved,i===null?(e.next=e,Cf(r)):(e.next=i.next,i.next=e),r.interleaved=e,wn(t,n)}function Vl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,df(t,n)}}function wm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fa(t,e,n,r){var i=t.updateQueue;qn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,f=u.next;u.next=null,s===null?o=f:s.next=f,s=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==s&&(l===null?h.firstBaseUpdate=f:l.next=f,h.lastBaseUpdate=u))}if(o!==null){var p=i.baseState;s=0,h=f=u=null,l=o;do{var m=l.lane,v=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,k=l;switch(m=e,v=n,k.tag){case 1:if(P=k.payload,typeof P=="function"){p=P.call(v,p,m);break e}p=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=k.payload,m=typeof P=="function"?P.call(v,p,m):P,m==null)break e;p=ke({},p,m);break e;case 2:qn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(f=h=v,u=p):h=h.next=v,s|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(u=p),i.baseState=u,i.firstBaseUpdate=f,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);qr|=s,t.lanes=s,t.memoizedState=p}}function Sm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var Vs={},un=yr(Vs),ms=yr(Vs),gs=yr(Vs);function Lr(t){if(t===Vs)throw Error(q(174));return t}function Af(t,e){switch(Te(gs,e),Te(ms,t),Te(un,Vs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lc(e,t)}Ae(un),Te(un,e)}function Oi(){Ae(un),Ae(ms),Ae(gs)}function e0(t){Lr(gs.current);var e=Lr(un.current),n=Lc(e,t.type);e!==n&&(Te(ms,t),Te(un,n))}function Rf(t){ms.current===t&&(Ae(un),Ae(ms))}var Ne=yr(0);function ha(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lc=[];function Nf(){for(var t=0;t<lc.length;t++)lc[t]._workInProgressVersionPrimary=null;lc.length=0}var Ll=Pn.ReactCurrentDispatcher,ac=Pn.ReactCurrentBatchConfig,Br=0,Pe=null,He=null,Je=null,pa=!1,Jo=!1,ys=0,GS=0;function it(){throw Error(q(321))}function Pf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xt(t[n],e[n]))return!1;return!0}function kf(t,e,n,r,i,o){if(Br=o,Pe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ll.current=t===null||t.memoizedState===null?$S:zS,t=n(r,i),Jo){o=0;do{if(Jo=!1,ys=0,25<=o)throw Error(q(301));o+=1,Je=He=null,e.updateQueue=null,Ll.current=WS,t=n(r,i)}while(Jo)}if(Ll.current=ma,e=He!==null&&He.next!==null,Br=0,Je=He=Pe=null,pa=!1,e)throw Error(q(300));return t}function Df(){var t=ys!==0;return ys=0,t}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Pe.memoizedState=Je=t:Je=Je.next=t,Je}function Bt(){if(He===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Je===null?Pe.memoizedState:Je.next;if(e!==null)Je=e,He=t;else{if(t===null)throw Error(q(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Je===null?Pe.memoizedState=Je=t:Je=Je.next=t}return Je}function _s(t,e){return typeof e=="function"?e(t):e}function uc(t){var e=Bt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=He,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,u=null,f=o;do{var h=f.lane;if((Br&h)===h)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var p={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=p,s=r):u=u.next=p,Pe.lanes|=h,qr|=h}f=f.next}while(f!==null&&f!==o);u===null?s=r:u.next=l,Xt(r,e.memoizedState)||(Tt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Pe.lanes|=o,qr|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function cc(t){var e=Bt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Xt(o,e.memoizedState)||(Tt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function t0(){}function n0(t,e){var n=Pe,r=Bt(),i=e(),o=!Xt(r.memoizedState,i);if(o&&(r.memoizedState=i,Tt=!0),r=r.queue,Mf(o0.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,vs(9,i0.bind(null,n,r,i,e),void 0,null),Qe===null)throw Error(q(349));Br&30||r0(n,e,i)}return i}function r0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function i0(t,e,n,r){e.value=n,e.getSnapshot=r,s0(e)&&l0(t)}function o0(t,e,n){return n(function(){s0(e)&&l0(t)})}function s0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xt(t,n)}catch{return!0}}function l0(t){var e=wn(t,1);e!==null&&Qt(e,t,1,-1)}function Cm(t){var e=rn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:t},e.queue=t,t=t.dispatch=HS.bind(null,Pe,t),[e.memoizedState,t]}function vs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Pe.updateQueue,e===null?(e={lastEffect:null,stores:null},Pe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function a0(){return Bt().memoizedState}function bl(t,e,n,r){var i=rn();Pe.flags|=t,i.memoizedState=vs(1|e,n,void 0,r===void 0?null:r)}function Ka(t,e,n,r){var i=Bt();r=r===void 0?null:r;var o=void 0;if(He!==null){var s=He.memoizedState;if(o=s.destroy,r!==null&&Pf(r,s.deps)){i.memoizedState=vs(e,n,o,r);return}}Pe.flags|=t,i.memoizedState=vs(1|e,n,o,r)}function xm(t,e){return bl(8390656,8,t,e)}function Mf(t,e){return Ka(2048,8,t,e)}function u0(t,e){return Ka(4,2,t,e)}function c0(t,e){return Ka(4,4,t,e)}function d0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function f0(t,e,n){return n=n!=null?n.concat([t]):null,Ka(4,4,d0.bind(null,e,t),n)}function Vf(){}function h0(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function p0(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function m0(t,e,n){return Br&21?(Xt(n,e)||(n=Ev(),Pe.lanes|=n,qr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=n)}function BS(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=ac.transition;ac.transition={};try{t(!1),e()}finally{me=n,ac.transition=r}}function g0(){return Bt().memoizedState}function qS(t,e,n){var r=er(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},y0(t))_0(e,n);else if(n=jv(t,e,n,r),n!==null){var i=mt();Qt(n,t,r,i),v0(n,e,r)}}function HS(t,e,n){var r=er(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(y0(t))_0(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,Xt(l,s)){var u=e.interleaved;u===null?(i.next=i,Cf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=jv(t,e,i,r),n!==null&&(i=mt(),Qt(n,t,r,i),v0(n,e,r))}}function y0(t){var e=t.alternate;return t===Pe||e!==null&&e===Pe}function _0(t,e){Jo=pa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function v0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,df(t,n)}}var ma={readContext:Gt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},$S={readContext:Gt,useCallback:function(t,e){return rn().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:xm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bl(4194308,4,d0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bl(4194308,4,t,e)},useInsertionEffect:function(t,e){return bl(4,2,t,e)},useMemo:function(t,e){var n=rn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=qS.bind(null,Pe,t),[r.memoizedState,t]},useRef:function(t){var e=rn();return t={current:t},e.memoizedState=t},useState:Cm,useDebugValue:Vf,useDeferredValue:function(t){return rn().memoizedState=t},useTransition:function(){var t=Cm(!1),e=t[0];return t=BS.bind(null,t[1]),rn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Pe,i=rn();if(Re){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Qe===null)throw Error(q(349));Br&30||r0(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,xm(o0.bind(null,r,o,t),[t]),r.flags|=2048,vs(9,i0.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=rn(),e=Qe.identifierPrefix;if(Re){var n=vn,r=_n;n=(r&~(1<<32-Jt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ys++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=GS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zS={readContext:Gt,useCallback:h0,useContext:Gt,useEffect:Mf,useImperativeHandle:f0,useInsertionEffect:u0,useLayoutEffect:c0,useMemo:p0,useReducer:uc,useRef:a0,useState:function(){return uc(_s)},useDebugValue:Vf,useDeferredValue:function(t){var e=Bt();return m0(e,He.memoizedState,t)},useTransition:function(){var t=uc(_s)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:t0,useSyncExternalStore:n0,useId:g0,unstable_isNewReconciler:!1},WS={readContext:Gt,useCallback:h0,useContext:Gt,useEffect:Mf,useImperativeHandle:f0,useInsertionEffect:u0,useLayoutEffect:c0,useMemo:p0,useReducer:cc,useRef:a0,useState:function(){return cc(_s)},useDebugValue:Vf,useDeferredValue:function(t){var e=Bt();return He===null?e.memoizedState=t:m0(e,He.memoizedState,t)},useTransition:function(){var t=cc(_s)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:t0,useSyncExternalStore:n0,useId:g0,unstable_isNewReconciler:!1};function zt(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ja={isMounted:function(t){return(t=t._reactInternals)?Kr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mt(),i=er(t),o=En(r,i);o.payload=e,n!=null&&(o.callback=n),e=jn(t,o,i),e!==null&&(Qt(e,t,i,r),Vl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mt(),i=er(t),o=En(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=jn(t,o,i),e!==null&&(Qt(e,t,i,r),Vl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mt(),r=er(t),i=En(n,r);i.tag=2,e!=null&&(i.callback=e),e=jn(t,i,r),e!==null&&(Qt(e,t,r,n),Vl(e,t,r))}};function Am(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!ds(n,r)||!ds(i,o):!0}function E0(t,e,n){var r=!1,i=ar,o=e.contextType;return typeof o=="object"&&o!==null?o=Gt(o):(i=wt(e)?Or:dt.current,r=e.contextTypes,o=(r=r!=null)?bi(t,i):ar),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ja,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Rm(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ja.enqueueReplaceState(e,e.state,null)}function rd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},xf(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Gt(o):(o=wt(e)?Or:dt.current,i.context=bi(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(nd(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ja.enqueueReplaceState(i,i.state,null),fa(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Gi(t,e){try{var n="",r=e;do n+=Ew(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function dc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function id(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var KS=typeof WeakMap=="function"?WeakMap:Map;function T0(t,e,n){n=En(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ya||(ya=!0,pd=r),id(t,e)},n}function I0(t,e,n){n=En(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){id(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){id(t,e),typeof r!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Nm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new KS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=lC.bind(null,t,e,n),e.then(t,t))}function Pm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function km(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=En(-1,1),e.tag=2,jn(n,e,1))),n.lanes|=1),t)}var JS=Pn.ReactCurrentOwner,Tt=!1;function pt(t,e,n,r){e.child=t===null?Xv(e,null,n,r):Ui(e,t.child,n,r)}function Dm(t,e,n,r,i){n=n.render;var o=e.ref;return xi(e,i),r=kf(t,e,n,r,o,i),n=Df(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sn(t,e,i)):(Re&&n&&vf(e),e.flags|=1,pt(t,e,r,i),e.child)}function Mm(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!qf(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,w0(t,e,o,r,i)):(t=Gl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:ds,n(s,r)&&t.ref===e.ref)return Sn(t,e,i)}return e.flags|=1,t=tr(o,r),t.ref=e.ref,t.return=e,e.child=t}function w0(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(ds(o,r)&&t.ref===e.ref)if(Tt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Tt=!0);else return e.lanes=t.lanes,Sn(t,e,i)}return od(t,e,n,r,i)}function S0(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(vi,xt),xt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(vi,xt),xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Te(vi,xt),xt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Te(vi,xt),xt|=r;return pt(t,e,i,n),e.child}function C0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function od(t,e,n,r,i){var o=wt(n)?Or:dt.current;return o=bi(e,o),xi(e,i),n=kf(t,e,n,r,o,i),r=Df(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sn(t,e,i)):(Re&&r&&vf(e),e.flags|=1,pt(t,e,n,i),e.child)}function Vm(t,e,n,r,i){if(wt(n)){var o=!0;la(e)}else o=!1;if(xi(e,i),e.stateNode===null)Fl(t,e),E0(e,n,r),rd(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var u=s.context,f=n.contextType;typeof f=="object"&&f!==null?f=Gt(f):(f=wt(n)?Or:dt.current,f=bi(e,f));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||u!==f)&&Rm(e,s,r,f),qn=!1;var m=e.memoizedState;s.state=m,fa(e,r,s,i),u=e.memoizedState,l!==r||m!==u||It.current||qn?(typeof h=="function"&&(nd(e,n,h,r),u=e.memoizedState),(l=qn||Am(e,n,l,r,m,u,f))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=f,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Zv(t,e),l=e.memoizedProps,f=e.type===e.elementType?l:zt(e.type,l),s.props=f,p=e.pendingProps,m=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=Gt(u):(u=wt(n)?Or:dt.current,u=bi(e,u));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==p||m!==u)&&Rm(e,s,r,u),qn=!1,m=e.memoizedState,s.state=m,fa(e,r,s,i);var P=e.memoizedState;l!==p||m!==P||It.current||qn?(typeof v=="function"&&(nd(e,n,v,r),P=e.memoizedState),(f=qn||Am(e,n,f,r,m,P,u)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,P,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,P,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),s.props=r,s.state=P,s.context=u,r=f):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return sd(t,e,n,r,o,i)}function sd(t,e,n,r,i,o){C0(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&vm(e,n,!1),Sn(t,e,o);r=e.stateNode,JS.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Ui(e,t.child,null,o),e.child=Ui(e,null,l,o)):pt(t,e,l,o),e.memoizedState=r.state,i&&vm(e,n,!0),e.child}function x0(t){var e=t.stateNode;e.pendingContext?_m(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_m(t,e.context,!1),Af(t,e.containerInfo)}function Lm(t,e,n,r,i){return Fi(),Tf(i),e.flags|=256,pt(t,e,n,r),e.child}var ld={dehydrated:null,treeContext:null,retryLane:0};function ad(t){return{baseLanes:t,cachePool:null,transitions:null}}function A0(t,e,n){var r=e.pendingProps,i=Ne.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Te(Ne,i&1),t===null)return ed(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Xa(s,r,0,null),t=Ur(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=ad(n),e.memoizedState=ld,t):Lf(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return QS(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=tr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=tr(l,o):(o=Ur(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?ad(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=ld,r}return o=t.child,t=o.sibling,r=tr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lf(t,e){return e=Xa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ml(t,e,n,r){return r!==null&&Tf(r),Ui(e,t.child,null,n),t=Lf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QS(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=dc(Error(q(422))),ml(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Xa({mode:"visible",children:r.children},i,0,null),o=Ur(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ui(e,t.child,null,s),e.child.memoizedState=ad(s),e.memoizedState=ld,o);if(!(e.mode&1))return ml(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(q(419)),r=dc(o,r,void 0),ml(t,e,s,r)}if(l=(s&t.childLanes)!==0,Tt||l){if(r=Qe,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,wn(t,i),Qt(r,t,i,-1))}return Bf(),r=dc(Error(q(421))),ml(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=aC.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,At=Xn(i.nextSibling),Nt=e,Re=!0,Kt=null,t!==null&&(Vt[Lt++]=_n,Vt[Lt++]=vn,Vt[Lt++]=Gr,_n=t.id,vn=t.overflow,Gr=e),e=Lf(e,r.children),e.flags|=4096,e)}function bm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),td(t.return,e,n)}function fc(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function R0(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(pt(t,e,r.children,n),r=Ne.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bm(t,n,e);else if(t.tag===19)bm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Ne,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ha(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),fc(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ha(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}fc(e,!0,n,null,o);break;case"together":fc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Sn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function YS(t,e,n){switch(e.tag){case 3:x0(e),Fi();break;case 5:e0(e);break;case 1:wt(e.type)&&la(e);break;case 4:Af(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Te(ca,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?A0(t,e,n):(Te(Ne,Ne.current&1),t=Sn(t,e,n),t!==null?t.sibling:null);Te(Ne,Ne.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return R0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(Ne,Ne.current),r)break;return null;case 22:case 23:return e.lanes=0,S0(t,e,n)}return Sn(t,e,n)}var N0,ud,P0,k0;N0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ud=function(){};P0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Lr(un.current);var o=null;switch(n){case"input":i=kc(t,i),r=kc(t,r),o=[];break;case"select":i=ke({},i,{value:void 0}),r=ke({},r,{value:void 0}),o=[];break;case"textarea":i=Vc(t,i),r=Vc(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=oa)}bc(n,r);var s;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var l=i[f];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(is.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var u=r[f];if(l=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(is.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&we("scroll",t),o||l===u||(o=[])):(o=o||[]).push(f,u))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};k0=function(t,e,n,r){n!==r&&(e.flags|=4)};function No(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function XS(t,e,n){var r=e.pendingProps;switch(Ef(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return wt(e.type)&&sa(),ot(e),null;case 3:return r=e.stateNode,Oi(),Ae(It),Ae(dt),Nf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kt!==null&&(yd(Kt),Kt=null))),ud(t,e),ot(e),null;case 5:Rf(e);var i=Lr(gs.current);if(n=e.type,t!==null&&e.stateNode!=null)P0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return ot(e),null}if(t=Lr(un.current),hl(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ln]=e,r[ps]=o,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(i=0;i<Uo.length;i++)we(Uo[i],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":zp(r,o),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},we("invalid",r);break;case"textarea":Kp(r,o),we("invalid",r)}bc(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&fl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&fl(r.textContent,l,t),i=["children",""+l]):is.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&we("scroll",r)}switch(n){case"input":il(r),Wp(r,o,!0);break;case"textarea":il(r),Jp(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=oa)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ov(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[ln]=e,t[ps]=r,N0(t,e,!1,!1),e.stateNode=t;e:{switch(s=Fc(n,r),n){case"dialog":we("cancel",t),we("close",t),i=r;break;case"iframe":case"object":case"embed":we("load",t),i=r;break;case"video":case"audio":for(i=0;i<Uo.length;i++)we(Uo[i],t);i=r;break;case"source":we("error",t),i=r;break;case"img":case"image":case"link":we("error",t),we("load",t),i=r;break;case"details":we("toggle",t),i=r;break;case"input":zp(t,r),i=kc(t,r),we("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ke({},r,{value:void 0}),we("invalid",t);break;case"textarea":Kp(t,r),i=Vc(t,r),we("invalid",t);break;default:i=r}bc(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?av(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&sv(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&os(t,u):typeof u=="number"&&os(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(is.hasOwnProperty(o)?u!=null&&o==="onScroll"&&we("scroll",t):u!=null&&of(t,o,u,s))}switch(n){case"input":il(t),Wp(t,r,!1);break;case"textarea":il(t),Jp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+lr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Ii(t,!!r.multiple,o,!1):r.defaultValue!=null&&Ii(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=oa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)k0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Lr(gs.current),Lr(un.current),hl(e)){if(r=e.stateNode,n=e.memoizedProps,r[ln]=e,(o=r.nodeValue!==n)&&(t=Nt,t!==null))switch(t.tag){case 3:fl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ln]=e,e.stateNode=r}return ot(e),null;case 13:if(Ae(Ne),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&At!==null&&e.mode&1&&!(e.flags&128))Qv(),Fi(),e.flags|=98560,o=!1;else if(o=hl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(q(317));o[ln]=e}else Fi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),o=!1}else Kt!==null&&(yd(Kt),Kt=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?$e===0&&($e=3):Bf())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return Oi(),ud(t,e),t===null&&fs(e.stateNode.containerInfo),ot(e),null;case 10:return Sf(e.type._context),ot(e),null;case 17:return wt(e.type)&&sa(),ot(e),null;case 19:if(Ae(Ne),o=e.memoizedState,o===null)return ot(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)No(o,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=ha(t),s!==null){for(e.flags|=128,No(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Ne,Ne.current&1|2),e.child}t=t.sibling}o.tail!==null&&be()>Bi&&(e.flags|=128,r=!0,No(o,!1),e.lanes=4194304)}else{if(!r)if(t=ha(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),No(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Re)return ot(e),null}else 2*be()-o.renderingStartTime>Bi&&n!==1073741824&&(e.flags|=128,r=!0,No(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=be(),e.sibling=null,n=Ne.current,Te(Ne,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return Gf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function jS(t,e){switch(Ef(e),e.tag){case 1:return wt(e.type)&&sa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oi(),Ae(It),Ae(dt),Nf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rf(e),null;case 13:if(Ae(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Fi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Ne),null;case 4:return Oi(),null;case 10:return Sf(e.type._context),null;case 22:case 23:return Gf(),null;case 24:return null;default:return null}}var gl=!1,at=!1,ZS=typeof WeakSet=="function"?WeakSet:Set,K=null;function _i(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function cd(t,e,n){try{n()}catch(r){Ve(t,e,r)}}var Fm=!1;function eC(t,e){if(Kc=na,t=bv(),_f(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,u=-1,f=0,h=0,p=t,m=null;t:for(;;){for(var v;p!==n||i!==0&&p.nodeType!==3||(l=s+i),p!==o||r!==0&&p.nodeType!==3||(u=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(v=p.firstChild)!==null;)m=p,p=v;for(;;){if(p===t)break t;if(m===n&&++f===i&&(l=s),m===o&&++h===r&&(u=s),(v=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=v}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jc={focusedElem:t,selectionRange:n},na=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var k=P.memoizedProps,L=P.memoizedState,A=e.stateNode,T=A.getSnapshotBeforeUpdate(e.elementType===e.type?k:zt(e.type,k),L);A.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(M){Ve(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return P=Fm,Fm=!1,P}function Qo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&cd(e,n,o)}i=i.next}while(i!==r)}}function Qa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function D0(t){var e=t.alternate;e!==null&&(t.alternate=null,D0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ln],delete e[ps],delete e[Xc],delete e[bS],delete e[FS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function M0(t){return t.tag===5||t.tag===3||t.tag===4}function Um(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||M0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=oa));else if(r!==4&&(t=t.child,t!==null))for(fd(t,e,n),t=t.sibling;t!==null;)fd(t,e,n),t=t.sibling}function hd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(hd(t,e,n),t=t.sibling;t!==null;)hd(t,e,n),t=t.sibling}var Xe=null,Wt=!1;function Gn(t,e,n){for(n=n.child;n!==null;)V0(t,e,n),n=n.sibling}function V0(t,e,n){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Ba,n)}catch{}switch(n.tag){case 5:at||_i(n,e);case 6:var r=Xe,i=Wt;Xe=null,Gn(t,e,n),Xe=r,Wt=i,Xe!==null&&(Wt?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(Wt?(t=Xe,n=n.stateNode,t.nodeType===8?oc(t.parentNode,n):t.nodeType===1&&oc(t,n),us(t)):oc(Xe,n.stateNode));break;case 4:r=Xe,i=Wt,Xe=n.stateNode.containerInfo,Wt=!0,Gn(t,e,n),Xe=r,Wt=i;break;case 0:case 11:case 14:case 15:if(!at&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&cd(n,e,s),i=i.next}while(i!==r)}Gn(t,e,n);break;case 1:if(!at&&(_i(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ve(n,e,l)}Gn(t,e,n);break;case 21:Gn(t,e,n);break;case 22:n.mode&1?(at=(r=at)||n.memoizedState!==null,Gn(t,e,n),at=r):Gn(t,e,n);break;default:Gn(t,e,n)}}function Om(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ZS),e.forEach(function(r){var i=uC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $t(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:Xe=l.stateNode,Wt=!1;break e;case 3:Xe=l.stateNode.containerInfo,Wt=!0;break e;case 4:Xe=l.stateNode.containerInfo,Wt=!0;break e}l=l.return}if(Xe===null)throw Error(q(160));V0(o,s,i),Xe=null,Wt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(f){Ve(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)L0(e,t),e=e.sibling}function L0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($t(e,t),nn(t),r&4){try{Qo(3,t,t.return),Qa(3,t)}catch(k){Ve(t,t.return,k)}try{Qo(5,t,t.return)}catch(k){Ve(t,t.return,k)}}break;case 1:$t(e,t),nn(t),r&512&&n!==null&&_i(n,n.return);break;case 5:if($t(e,t),nn(t),r&512&&n!==null&&_i(n,n.return),t.flags&32){var i=t.stateNode;try{os(i,"")}catch(k){Ve(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&rv(i,o),Fc(l,s);var f=Fc(l,o);for(s=0;s<u.length;s+=2){var h=u[s],p=u[s+1];h==="style"?av(i,p):h==="dangerouslySetInnerHTML"?sv(i,p):h==="children"?os(i,p):of(i,h,p,f)}switch(l){case"input":Dc(i,o);break;case"textarea":iv(i,o);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?Ii(i,!!o.multiple,v,!1):m!==!!o.multiple&&(o.defaultValue!=null?Ii(i,!!o.multiple,o.defaultValue,!0):Ii(i,!!o.multiple,o.multiple?[]:"",!1))}i[ps]=o}catch(k){Ve(t,t.return,k)}}break;case 6:if($t(e,t),nn(t),r&4){if(t.stateNode===null)throw Error(q(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(k){Ve(t,t.return,k)}}break;case 3:if($t(e,t),nn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{us(e.containerInfo)}catch(k){Ve(t,t.return,k)}break;case 4:$t(e,t),nn(t);break;case 13:$t(e,t),nn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Uf=be())),r&4&&Om(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(at=(f=at)||h,$t(e,t),at=f):$t(e,t),nn(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(p=K=h;K!==null;){switch(m=K,v=m.child,m.tag){case 0:case 11:case 14:case 15:Qo(4,m,m.return);break;case 1:_i(m,m.return);var P=m.stateNode;if(typeof P.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(k){Ve(r,n,k)}}break;case 5:_i(m,m.return);break;case 22:if(m.memoizedState!==null){Bm(p);continue}}v!==null?(v.return=m,K=v):Bm(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,f?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=p.stateNode,u=p.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=lv("display",s))}catch(k){Ve(t,t.return,k)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(k){Ve(t,t.return,k)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:$t(e,t),nn(t),r&4&&Om(t);break;case 21:break;default:$t(e,t),nn(t)}}function nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(M0(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(os(i,""),r.flags&=-33);var o=Um(t);hd(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=Um(t);fd(t,l,s);break;default:throw Error(q(161))}}catch(u){Ve(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tC(t,e,n){K=t,b0(t)}function b0(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||gl;if(!s){var l=i.alternate,u=l!==null&&l.memoizedState!==null||at;l=gl;var f=at;if(gl=s,(at=u)&&!f)for(K=i;K!==null;)s=K,u=s.child,s.tag===22&&s.memoizedState!==null?qm(i):u!==null?(u.return=s,K=u):qm(i);for(;o!==null;)K=o,b0(o),o=o.sibling;K=i,gl=l,at=f}Gm(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,K=o):Gm(t)}}function Gm(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:at||Qa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!at)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:zt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Sm(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Sm(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&us(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}at||e.flags&512&&dd(e)}catch(m){Ve(e,e.return,m)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Bm(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function qm(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qa(4,e)}catch(u){Ve(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ve(e,i,u)}}var o=e.return;try{dd(e)}catch(u){Ve(e,o,u)}break;case 5:var s=e.return;try{dd(e)}catch(u){Ve(e,s,u)}}}catch(u){Ve(e,e.return,u)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var nC=Math.ceil,ga=Pn.ReactCurrentDispatcher,bf=Pn.ReactCurrentOwner,Ut=Pn.ReactCurrentBatchConfig,ce=0,Qe=null,Ue=null,et=0,xt=0,vi=yr(0),$e=0,Es=null,qr=0,Ya=0,Ff=0,Yo=null,vt=null,Uf=0,Bi=1/0,gn=null,ya=!1,pd=null,Zn=null,yl=!1,Wn=null,_a=0,Xo=0,md=null,Ul=-1,Ol=0;function mt(){return ce&6?be():Ul!==-1?Ul:Ul=be()}function er(t){return t.mode&1?ce&2&&et!==0?et&-et:OS.transition!==null?(Ol===0&&(Ol=Ev()),Ol):(t=me,t!==0||(t=window.event,t=t===void 0?16:Av(t.type)),t):1}function Qt(t,e,n,r){if(50<Xo)throw Xo=0,md=null,Error(q(185));ks(t,n,r),(!(ce&2)||t!==Qe)&&(t===Qe&&(!(ce&2)&&(Ya|=n),$e===4&&$n(t,et)),St(t,r),n===1&&ce===0&&!(e.mode&1)&&(Bi=be()+500,Wa&&_r()))}function St(t,e){var n=t.callbackNode;Ow(t,e);var r=ta(t,t===Qe?et:0);if(r===0)n!==null&&Xp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Xp(n),e===1)t.tag===0?US(Hm.bind(null,t)):Wv(Hm.bind(null,t)),VS(function(){!(ce&6)&&_r()}),n=null;else{switch(Tv(r)){case 1:n=cf;break;case 4:n=_v;break;case 16:n=ea;break;case 536870912:n=vv;break;default:n=ea}n=$0(n,F0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function F0(t,e){if(Ul=-1,Ol=0,ce&6)throw Error(q(327));var n=t.callbackNode;if(Ai()&&t.callbackNode!==n)return null;var r=ta(t,t===Qe?et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=va(t,r);else{e=r;var i=ce;ce|=2;var o=O0();(Qe!==t||et!==e)&&(gn=null,Bi=be()+500,Fr(t,e));do try{oC();break}catch(l){U0(t,l)}while(!0);wf(),ga.current=o,ce=i,Ue!==null?e=0:(Qe=null,et=0,e=$e)}if(e!==0){if(e===2&&(i=qc(t),i!==0&&(r=i,e=gd(t,i))),e===1)throw n=Es,Fr(t,0),$n(t,r),St(t,be()),n;if(e===6)$n(t,r);else{if(i=t.current.alternate,!(r&30)&&!rC(i)&&(e=va(t,r),e===2&&(o=qc(t),o!==0&&(r=o,e=gd(t,o))),e===1))throw n=Es,Fr(t,0),$n(t,r),St(t,be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:Pr(t,vt,gn);break;case 3:if($n(t,r),(r&130023424)===r&&(e=Uf+500-be(),10<e)){if(ta(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){mt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Yc(Pr.bind(null,t,vt,gn),e);break}Pr(t,vt,gn);break;case 4:if($n(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Jt(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nC(r/1960))-r,10<r){t.timeoutHandle=Yc(Pr.bind(null,t,vt,gn),r);break}Pr(t,vt,gn);break;case 5:Pr(t,vt,gn);break;default:throw Error(q(329))}}}return St(t,be()),t.callbackNode===n?F0.bind(null,t):null}function gd(t,e){var n=Yo;return t.current.memoizedState.isDehydrated&&(Fr(t,e).flags|=256),t=va(t,e),t!==2&&(e=vt,vt=n,e!==null&&yd(e)),t}function yd(t){vt===null?vt=t:vt.push.apply(vt,t)}function rC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Xt(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $n(t,e){for(e&=~Ff,e&=~Ya,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jt(e),r=1<<n;t[n]=-1,e&=~r}}function Hm(t){if(ce&6)throw Error(q(327));Ai();var e=ta(t,0);if(!(e&1))return St(t,be()),null;var n=va(t,e);if(t.tag!==0&&n===2){var r=qc(t);r!==0&&(e=r,n=gd(t,r))}if(n===1)throw n=Es,Fr(t,0),$n(t,e),St(t,be()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pr(t,vt,gn),St(t,be()),null}function Of(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(Bi=be()+500,Wa&&_r())}}function Hr(t){Wn!==null&&Wn.tag===0&&!(ce&6)&&Ai();var e=ce;ce|=1;var n=Ut.transition,r=me;try{if(Ut.transition=null,me=1,t)return t()}finally{me=r,Ut.transition=n,ce=e,!(ce&6)&&_r()}}function Gf(){xt=vi.current,Ae(vi)}function Fr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,MS(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(Ef(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sa();break;case 3:Oi(),Ae(It),Ae(dt),Nf();break;case 5:Rf(r);break;case 4:Oi();break;case 13:Ae(Ne);break;case 19:Ae(Ne);break;case 10:Sf(r.type._context);break;case 22:case 23:Gf()}n=n.return}if(Qe=t,Ue=t=tr(t.current,null),et=xt=e,$e=0,Es=null,Ff=Ya=qr=0,vt=Yo=null,Vr!==null){for(e=0;e<Vr.length;e++)if(n=Vr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Vr=null}return t}function U0(t,e){do{var n=Ue;try{if(wf(),Ll.current=ma,pa){for(var r=Pe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}pa=!1}if(Br=0,Je=He=Pe=null,Jo=!1,ys=0,bf.current=null,n===null||n.return===null){$e=1,Es=e,Ue=null;break}e:{var o=t,s=n.return,l=n,u=e;if(e=et,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Pm(s);if(v!==null){v.flags&=-257,km(v,s,l,o,e),v.mode&1&&Nm(o,f,e),e=v,u=f;var P=e.updateQueue;if(P===null){var k=new Set;k.add(u),e.updateQueue=k}else P.add(u);break e}else{if(!(e&1)){Nm(o,f,e),Bf();break e}u=Error(q(426))}}else if(Re&&l.mode&1){var L=Pm(s);if(L!==null){!(L.flags&65536)&&(L.flags|=256),km(L,s,l,o,e),Tf(Gi(u,l));break e}}o=u=Gi(u,l),$e!==4&&($e=2),Yo===null?Yo=[o]:Yo.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var A=T0(o,u,e);wm(o,A);break e;case 1:l=u;var T=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Zn===null||!Zn.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var M=I0(o,l,e);wm(o,M);break e}}o=o.return}while(o!==null)}B0(n)}catch(V){e=V,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function O0(){var t=ga.current;return ga.current=ma,t===null?ma:t}function Bf(){($e===0||$e===3||$e===2)&&($e=4),Qe===null||!(qr&268435455)&&!(Ya&268435455)||$n(Qe,et)}function va(t,e){var n=ce;ce|=2;var r=O0();(Qe!==t||et!==e)&&(gn=null,Fr(t,e));do try{iC();break}catch(i){U0(t,i)}while(!0);if(wf(),ce=n,ga.current=r,Ue!==null)throw Error(q(261));return Qe=null,et=0,$e}function iC(){for(;Ue!==null;)G0(Ue)}function oC(){for(;Ue!==null&&!Pw();)G0(Ue)}function G0(t){var e=H0(t.alternate,t,xt);t.memoizedProps=t.pendingProps,e===null?B0(t):Ue=e,bf.current=null}function B0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=jS(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Ue=null;return}}else if(n=XS(n,e,xt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);$e===0&&($e=5)}function Pr(t,e,n){var r=me,i=Ut.transition;try{Ut.transition=null,me=1,sC(t,e,n,r)}finally{Ut.transition=i,me=r}return null}function sC(t,e,n,r){do Ai();while(Wn!==null);if(ce&6)throw Error(q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Gw(t,o),t===Qe&&(Ue=Qe=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yl||(yl=!0,$0(ea,function(){return Ai(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ut.transition,Ut.transition=null;var s=me;me=1;var l=ce;ce|=4,bf.current=null,eC(t,n),L0(n,t),xS(Jc),na=!!Kc,Jc=Kc=null,t.current=n,tC(n),kw(),ce=l,me=s,Ut.transition=o}else t.current=n;if(yl&&(yl=!1,Wn=t,_a=i),o=t.pendingLanes,o===0&&(Zn=null),Vw(n.stateNode),St(t,be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ya)throw ya=!1,t=pd,pd=null,t;return _a&1&&t.tag!==0&&Ai(),o=t.pendingLanes,o&1?t===md?Xo++:(Xo=0,md=t):Xo=0,_r(),null}function Ai(){if(Wn!==null){var t=Tv(_a),e=Ut.transition,n=me;try{if(Ut.transition=null,me=16>t?16:t,Wn===null)var r=!1;else{if(t=Wn,Wn=null,_a=0,ce&6)throw Error(q(331));var i=ce;for(ce|=4,K=t.current;K!==null;){var o=K,s=o.child;if(K.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for(K=f;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:Qo(8,h,o)}var p=h.child;if(p!==null)p.return=h,K=p;else for(;K!==null;){h=K;var m=h.sibling,v=h.return;if(D0(h),h===f){K=null;break}if(m!==null){m.return=v,K=m;break}K=v}}}var P=o.alternate;if(P!==null){var k=P.child;if(k!==null){P.child=null;do{var L=k.sibling;k.sibling=null,k=L}while(k!==null)}}K=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,K=s;else e:for(;K!==null;){if(o=K,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Qo(9,o,o.return)}var A=o.sibling;if(A!==null){A.return=o.return,K=A;break e}K=o.return}}var T=t.current;for(K=T;K!==null;){s=K;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,K=x;else e:for(s=T;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Qa(9,l)}}catch(V){Ve(l,l.return,V)}if(l===s){K=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,K=M;break e}K=l.return}}if(ce=i,_r(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Ba,t)}catch{}r=!0}return r}finally{me=n,Ut.transition=e}}return!1}function $m(t,e,n){e=Gi(n,e),e=T0(t,e,1),t=jn(t,e,1),e=mt(),t!==null&&(ks(t,1,e),St(t,e))}function Ve(t,e,n){if(t.tag===3)$m(t,t,n);else for(;e!==null;){if(e.tag===3){$m(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zn===null||!Zn.has(r))){t=Gi(n,t),t=I0(e,t,1),e=jn(e,t,1),t=mt(),e!==null&&(ks(e,1,t),St(e,t));break}}e=e.return}}function lC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mt(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(et&n)===n&&($e===4||$e===3&&(et&130023424)===et&&500>be()-Uf?Fr(t,0):Ff|=n),St(t,e)}function q0(t,e){e===0&&(t.mode&1?(e=ll,ll<<=1,!(ll&130023424)&&(ll=4194304)):e=1);var n=mt();t=wn(t,e),t!==null&&(ks(t,e,n),St(t,n))}function aC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),q0(t,n)}function uC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),q0(t,n)}var H0;H0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)Tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tt=!1,YS(t,e,n);Tt=!!(t.flags&131072)}else Tt=!1,Re&&e.flags&1048576&&Kv(e,ua,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fl(t,e),t=e.pendingProps;var i=bi(e,dt.current);xi(e,n),i=kf(null,e,r,t,i,n);var o=Df();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wt(r)?(o=!0,la(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xf(e),i.updater=Ja,e.stateNode=i,i._reactInternals=e,rd(e,r,t,n),e=sd(null,e,r,!0,o,n)):(e.tag=0,Re&&o&&vf(e),pt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=dC(r),t=zt(r,t),i){case 0:e=od(null,e,r,t,n);break e;case 1:e=Vm(null,e,r,t,n);break e;case 11:e=Dm(null,e,r,t,n);break e;case 14:e=Mm(null,e,r,zt(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),od(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),Vm(t,e,r,i,n);case 3:e:{if(x0(e),t===null)throw Error(q(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Zv(t,e),fa(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Gi(Error(q(423)),e),e=Lm(t,e,r,n,i);break e}else if(r!==i){i=Gi(Error(q(424)),e),e=Lm(t,e,r,n,i);break e}else for(At=Xn(e.stateNode.containerInfo.firstChild),Nt=e,Re=!0,Kt=null,n=Xv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fi(),r===i){e=Sn(t,e,n);break e}pt(t,e,r,n)}e=e.child}return e;case 5:return e0(e),t===null&&ed(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Qc(r,i)?s=null:o!==null&&Qc(r,o)&&(e.flags|=32),C0(t,e),pt(t,e,s,n),e.child;case 6:return t===null&&ed(e),null;case 13:return A0(t,e,n);case 4:return Af(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ui(e,null,r,n):pt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),Dm(t,e,r,i,n);case 7:return pt(t,e,e.pendingProps,n),e.child;case 8:return pt(t,e,e.pendingProps.children,n),e.child;case 12:return pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Te(ca,r._currentValue),r._currentValue=s,o!==null)if(Xt(o.value,s)){if(o.children===i.children&&!It.current){e=Sn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=En(-1,n&-n),u.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?u.next=u:(u.next=h.next,h.next=u),f.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),td(o.return,n,e),l.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(q(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),td(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}pt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xi(e,n),i=Gt(i),r=r(i),e.flags|=1,pt(t,e,r,n),e.child;case 14:return r=e.type,i=zt(r,e.pendingProps),i=zt(r.type,i),Mm(t,e,r,i,n);case 15:return w0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zt(r,i),Fl(t,e),e.tag=1,wt(r)?(t=!0,la(e)):t=!1,xi(e,n),E0(e,r,i),rd(e,r,i,n),sd(null,e,r,!0,t,n);case 19:return R0(t,e,n);case 22:return S0(t,e,n)}throw Error(q(156,e.tag))};function $0(t,e){return yv(t,e)}function cC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(t,e,n,r){return new cC(t,e,n,r)}function qf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dC(t){if(typeof t=="function")return qf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lf)return 11;if(t===af)return 14}return 2}function tr(t,e){var n=t.alternate;return n===null?(n=Ft(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gl(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")qf(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case ui:return Ur(n.children,i,o,e);case sf:s=8,i|=8;break;case Ac:return t=Ft(12,n,e,i|2),t.elementType=Ac,t.lanes=o,t;case Rc:return t=Ft(13,n,e,i),t.elementType=Rc,t.lanes=o,t;case Nc:return t=Ft(19,n,e,i),t.elementType=Nc,t.lanes=o,t;case ev:return Xa(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case j_:s=10;break e;case Z_:s=9;break e;case lf:s=11;break e;case af:s=14;break e;case Bn:s=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Ft(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ur(t,e,n,r){return t=Ft(7,t,r,e),t.lanes=n,t}function Xa(t,e,n,r){return t=Ft(22,t,r,e),t.elementType=ev,t.lanes=n,t.stateNode={isHidden:!1},t}function hc(t,e,n){return t=Ft(6,t,null,e),t.lanes=n,t}function pc(t,e,n){return e=Ft(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ju(0),this.expirationTimes=Ju(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ju(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hf(t,e,n,r,i,o,s,l,u){return t=new fC(t,e,n,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ft(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xf(o),t}function hC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ai,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function z0(t){if(!t)return ar;t=t._reactInternals;e:{if(Kr(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(wt(n))return zv(t,n,e)}return e}function W0(t,e,n,r,i,o,s,l,u){return t=Hf(n,r,!0,t,i,o,s,l,u),t.context=z0(null),n=t.current,r=mt(),i=er(n),o=En(r,i),o.callback=e??null,jn(n,o,i),t.current.lanes=i,ks(t,i,r),St(t,r),t}function ja(t,e,n,r){var i=e.current,o=mt(),s=er(i);return n=z0(n),e.context===null?e.context=n:e.pendingContext=n,e=En(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jn(i,e,s),t!==null&&(Qt(t,i,s,o),Vl(t,i,s)),s}function Ea(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $f(t,e){zm(t,e),(t=t.alternate)&&zm(t,e)}function pC(){return null}var K0=typeof reportError=="function"?reportError:function(t){console.error(t)};function zf(t){this._internalRoot=t}Za.prototype.render=zf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));ja(t,e,null,null)};Za.prototype.unmount=zf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hr(function(){ja(null,t,null,null)}),e[In]=null}};function Za(t){this._internalRoot=t}Za.prototype.unstable_scheduleHydration=function(t){if(t){var e=Sv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hn.length&&e!==0&&e<Hn[n].priority;n++);Hn.splice(n,0,t),n===0&&xv(t)}};function Wf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function eu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wm(){}function mC(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var f=Ea(s);o.call(f)}}var s=W0(e,r,t,0,null,!1,!1,"",Wm);return t._reactRootContainer=s,t[In]=s.current,fs(t.nodeType===8?t.parentNode:t),Hr(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var f=Ea(u);l.call(f)}}var u=Hf(t,0,!1,null,null,!1,!1,"",Wm);return t._reactRootContainer=u,t[In]=u.current,fs(t.nodeType===8?t.parentNode:t),Hr(function(){ja(e,u,n,r)}),u}function tu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var u=Ea(s);l.call(u)}}ja(e,s,t,i)}else s=mC(n,e,t,i,r);return Ea(s)}Iv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fo(e.pendingLanes);n!==0&&(df(e,n|1),St(e,be()),!(ce&6)&&(Bi=be()+500,_r()))}break;case 13:Hr(function(){var r=wn(t,1);if(r!==null){var i=mt();Qt(r,t,1,i)}}),$f(t,1)}};ff=function(t){if(t.tag===13){var e=wn(t,134217728);if(e!==null){var n=mt();Qt(e,t,134217728,n)}$f(t,134217728)}};wv=function(t){if(t.tag===13){var e=er(t),n=wn(t,e);if(n!==null){var r=mt();Qt(n,t,e,r)}$f(t,e)}};Sv=function(){return me};Cv=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};Oc=function(t,e,n){switch(e){case"input":if(Dc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=za(r);if(!i)throw Error(q(90));nv(r),Dc(r,i)}}}break;case"textarea":iv(t,n);break;case"select":e=n.value,e!=null&&Ii(t,!!n.multiple,e,!1)}};dv=Of;fv=Hr;var gC={usingClientEntryPoint:!1,Events:[Ms,hi,za,uv,cv,Of]},Po={findFiberByHostInstance:Mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yC={bundleType:Po.bundleType,version:Po.version,rendererPackageName:Po.rendererPackageName,rendererConfig:Po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mv(t),t===null?null:t.stateNode},findFiberByHostInstance:Po.findFiberByHostInstance||pC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_l.isDisabled&&_l.supportsFiber)try{Ba=_l.inject(yC),an=_l}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gC;kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wf(e))throw Error(q(200));return hC(t,e,null,n)};kt.createRoot=function(t,e){if(!Wf(t))throw Error(q(299));var n=!1,r="",i=K0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Hf(t,1,!1,null,null,n,!1,r,i),t[In]=e.current,fs(t.nodeType===8?t.parentNode:t),new zf(e)};kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=mv(e),t=t===null?null:t.stateNode,t};kt.flushSync=function(t){return Hr(t)};kt.hydrate=function(t,e,n){if(!eu(e))throw Error(q(200));return tu(null,t,e,!0,n)};kt.hydrateRoot=function(t,e,n){if(!Wf(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=K0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=W0(e,null,t,1,n??null,i,!1,o,s),t[In]=e.current,fs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Za(e)};kt.render=function(t,e,n){if(!eu(e))throw Error(q(200));return tu(null,t,e,!1,n)};kt.unmountComponentAtNode=function(t){if(!eu(t))throw Error(q(40));return t._reactRootContainer?(Hr(function(){tu(null,null,t,!1,function(){t._reactRootContainer=null,t[In]=null})}),!0):!1};kt.unstable_batchedUpdates=Of;kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!eu(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return tu(t,e,n,!1,r)};kt.version="18.3.1-next-f1338f8080-20240426";function J0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(J0)}catch(t){console.error(t)}}J0(),J_.exports=kt;var _C=J_.exports,Km=_C;Cc.createRoot=Km.createRoot,Cc.hydrateRoot=Km.hydrateRoot;var vC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const EC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ne=(t,e)=>{const n=j.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,children:l,...u},f)=>j.createElement("svg",{ref:f,...vC,width:i,height:i,stroke:r,strokeWidth:s?Number(o)*24/Number(i):o,className:`lucide lucide-${EC(t)}`,...u},[...e.map(([h,p])=>j.createElement(h,p)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n},TC=ne("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Q0=ne("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),IC=ne("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),wC=ne("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Ei=ne("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Y0=ne("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Jm=ne("BrainCircuit",[["path",{d:"M12 4.5a2.5 2.5 0 0 0-4.96-.46 2.5 2.5 0 0 0-1.98 3 2.5 2.5 0 0 0-1.32 4.24 3 3 0 0 0 .34 5.58 2.5 2.5 0 0 0 2.96 3.08 2.5 2.5 0 0 0 4.91.05L12 20V4.5Z",key:"ixwj2a"}],["path",{d:"M16 8V5c0-1.1.9-2 2-2",key:"13dx7u"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M20.5 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1s25gz"}],["path",{d:"M16.5 13a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"127460"}],["path",{d:"M20.5 21a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"fys062"}],["path",{d:"M18.5 3a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1vib61"}]]),Ta=ne("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Oo=ne("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),SC=ne("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),X0=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),CC=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Bl=ne("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]),xC=ne("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),AC=ne("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]),RC=ne("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),vl=ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),NC=ne("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),PC=ne("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),j0=ne("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Z0=ne("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),kC=ne("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),eE=ne("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),El=ne("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),DC=ne("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),MC=ne("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Qm=ne("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),VC=ne("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),LC=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),tE=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),nE=ne("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),rE=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),pn=ne("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),bC=ne("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),FC=ne("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),UC=ne("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Kf=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),OC=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),iE=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),GC=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),BC=ne("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),qC=ne("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),_d=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),HC=ne("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),ri=({icon:t,label:e,active:n,onClick:r})=>y.jsxs("button",{onClick:r,className:`w-full flex items-center justify-center lg:justify-start px-4 py-3 rounded-full transition-all duration-200 group relative
    ${n?"bg-blue-100/50 text-blue-700 font-medium":"text-gray-500 hover:bg-gray-100 hover:text-gray-900"}`,children:[W_.cloneElement(t,{className:`w-5 h-5 ${n?"text-blue-600":"text-gray-400 group-hover:text-gray-600"}`}),y.jsx("span",{className:"ml-3 text-sm",children:e})]}),$C=({children:t,currentView:e,onNavigate:n})=>y.jsxs("div",{className:"min-h-screen flex font-sans bg-white text-gray-900",children:[y.jsxs("aside",{className:"w-20 lg:w-64 border-r border-gray-200 flex flex-col bg-gray-50/80 backdrop-blur-md fixed h-full z-20",children:[y.jsx("div",{className:"h-20 flex items-center justify-center lg:justify-start lg:px-8",children:y.jsx("div",{className:"flex items-center gap-2.5",children:y.jsx("img",{src:"/logo.png",alt:"Baro.ai Logo",className:"w-auto h-8 object-contain"})})}),y.jsxs("nav",{className:"flex-1 py-6 px-3 space-y-1",children:[y.jsx(ri,{icon:y.jsx(wC,{}),label:"",active:e==="INSIGHT",onClick:()=>n("INSIGHT")}),y.jsx(ri,{icon:y.jsx(Z0,{}),label:"",active:e==="BOARD",onClick:()=>n("BOARD")}),y.jsx(ri,{icon:y.jsx(Y0,{}),label:"Gemini Pro",active:e==="GEMINI",onClick:()=>n("GEMINI")}),y.jsx("div",{className:"pt-4 pb-2",children:y.jsx("div",{className:"h-px bg-gray-200 mx-2"})}),y.jsx(ri,{icon:y.jsx(eE,{}),label:" "}),y.jsx(ri,{icon:y.jsx(tE,{}),label:""}),y.jsx("div",{className:"pt-2"}),y.jsx(ri,{icon:y.jsx(rE,{}),label:"",active:e==="SETTINGS",onClick:()=>n("SETTINGS")})]}),y.jsx("div",{className:"p-6 border-t border-gray-100",children:y.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-gray-200 shadow-sm",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[y.jsx(pn,{className:"w-4 h-4 text-blue-600"}),y.jsx("p",{className:"text-xs font-semibold text-gray-600",children:"AI "})]}),y.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5 mb-2",children:y.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full w-[45%]"})}),y.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 font-medium",children:[y.jsx("span",{children:"450 "}),y.jsx("span",{children:"1000 "})]})]})})]}),y.jsxs("main",{className:"flex-1 ml-20 lg:ml-64 flex flex-col h-screen overflow-hidden relative",children:[e==="BOARD"&&y.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-blue-50 rounded-full blur-3xl opacity-60 -translate-y-1/2 translate-x-1/3 pointer-events-none"}),t]})]});var Se=(t=>(t.REQUESTED="REQUESTED",t.CHECKED="CHECKED",t.WIP="WIP",t.SENT="SENT",t.FEEDBACK="FEEDBACK",t.DONE="DONE",t.CANCELLED="CANCELLED",t))(Se||{}),_e=(t=>(t.HIGH="HIGH",t.MEDIUM="MEDIUM",t.LOW="LOW",t))(_e||{});const Ls={MODEL_FAST:"gemini-2.5-flash",MODEL_SMART:"gemini-2.5-flash",MAX_TOKENS:2e3},Ym=[{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",description:"    ",isPro:!1},{id:"gemini-3-pro-preview",name:"Gemini 3.0 Pro",description:"  ,   ",isPro:!0}],ql={NEW_TASK_TITLE:"  ",NEW_TASK_DESC_PLACEHOLDER:"   ...",DRAFT_PLACEHOLDER:":       .  20 ,    . (A  )"},zC=[{id:Se.REQUESTED,label:"",dotColor:"bg-gray-400"},{id:Se.WIP,label:" ",dotColor:"bg-blue-500"},{id:Se.CHECKED,label:"/",dotColor:"bg-purple-500"},{id:Se.DONE,label:"",dotColor:"bg-green-500"}],WC=[{id:"u1",name:"",role:"ASSIGNEE",avatar:"https://picsum.photos/id/1005/50/50"},{id:"u2",name:"",role:"REQUESTER",avatar:"https://picsum.photos/id/1011/50/50"}];_e.HIGH,Se.WIP,_e.MEDIUM,Se.REQUESTED,_e.HIGH,Se.CHECKED,_e.LOW,Se.DONE;const KC=(t,e,n)=>{let r=[...t];if(e.query){const i=e.query.toLowerCase();r=r.filter(o=>o.title.toLowerCase().includes(i)||o.description.toLowerCase().includes(i)||o.product.toLowerCase().includes(i))}return e.priority!=="ALL"&&(r=r.filter(i=>i.priority===e.priority)),e.onlyMyTasks&&(r=r.filter(i=>i.assigneeId===e.currentUserId)),n!=="NONE"&&r.sort((i,o)=>{if(n==="DUE_DATE")return new Date(i.dueDate).getTime()-new Date(o.dueDate).getTime();if(n==="PRIORITY"){const s={[_e.HIGH]:3,[_e.MEDIUM]:2,[_e.LOW]:1};return s[o.priority]-s[i.priority]}if(n==="SMART"){const s={[_e.HIGH]:100,[_e.MEDIUM]:50,[_e.LOW]:10},l=new Date().getTime(),u=new Date(i.dueDate).getTime(),f=new Date(o.dueDate).getTime(),h=(u-l)/(1e3*60*60*24),p=(f-l)/(1e3*60*60*24),m=s[i.priority]-h;return s[o.priority]-p-m}return 0}),r},JC=({searchQuery:t,setSearchQuery:e,onlyMyTasks:n,setOnlyMyTasks:r,filterPriority:i,setFilterPriority:o,sortBy:s,setSortBy:l})=>{const u=()=>{const f=["NONE","SMART","DUE_DATE","PRIORITY"],h=(f.indexOf(s)+1)%f.length;l(f[h])};return y.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center justify-between gap-4 mb-6 px-2 flex-shrink-0",children:[y.jsxs("div",{className:"relative group w-full xl:w-72",children:[y.jsx(tE,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 group-focus-within:text-blue-500 transition-colors"}),y.jsx("input",{type:"text",placeholder:", ,  ...",className:"w-full bg-white pl-10 pr-8 py-2.5 rounded-full border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all shadow-sm",value:t,onChange:f=>e(f.target.value)}),t&&y.jsx("button",{onClick:()=>e(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-300 hover:text-gray-500",children:y.jsx(qC,{className:"w-4 h-4"})})]}),y.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 xl:pb-0 no-scrollbar",children:[y.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 text-gray-400 border-r border-gray-200 mr-2 hidden md:flex",children:[y.jsx(PC,{className:"w-3.5 h-3.5"}),y.jsx("span",{className:"text-xs font-medium",children:""})]}),y.jsxs("button",{onClick:()=>r(!n),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium border transition-all whitespace-nowrap
                        ${n?"bg-blue-600 text-white border-blue-600 shadow-md shadow-blue-200":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:[y.jsx(iE,{className:"w-4 h-4"})," "]}),y.jsx("div",{className:"flex bg-white rounded-full p-1 border border-gray-200 shadow-sm",children:["ALL",_e.HIGH,_e.MEDIUM,_e.LOW].map(f=>y.jsx("button",{onClick:()=>o(f),className:`px-3 py-1.5 rounded-full text-xs font-medium transition-all whitespace-nowrap
                                ${i===f?"bg-gray-900 text-white shadow-sm":"text-gray-500 hover:bg-gray-100"}`,children:f==="ALL"?"":f===_e.HIGH?"":f===_e.MEDIUM?"":""},f))}),y.jsx("div",{className:"w-px h-6 bg-gray-200 mx-2 hidden md:block"}),y.jsxs("button",{onClick:u,className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium border transition-all whitespace-nowrap min-w-[140px] justify-center
                        ${s!=="NONE"?"bg-indigo-50 text-indigo-600 border-indigo-100":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"}`,children:[s==="SMART"?y.jsx(pn,{className:"w-4 h-4 text-indigo-500"}):y.jsx(IC,{className:"w-4 h-4"}),y.jsxs("span",{children:[s==="NONE"&&" ",s==="SMART"&&" ",s==="DUE_DATE"&&"",s==="PRIORITY"&&""]})]})]})]})},Xm=t=>t?new Date(t).toLocaleDateString("ko-KR",{month:"numeric",day:"numeric",timeZone:"Asia/Seoul"}):"-",QC=({task:t,draggedTaskId:e,onClick:n,onDragStart:r,onDragEnd:i,onDelete:o,index:s})=>y.jsx("div",{draggable:!0,onDragStart:l=>r(l,t.id),onDragEnd:i,className:`clean-card rounded-2xl cursor-grab active:cursor-grabbing group relative bg-white transition-all duration-300 flex flex-col overflow-hidden
          ${e===t.id?"shadow-none":"hover:translate-y-[-2px]"}
      `,style:{animationDelay:`${s*50}ms`},onClick:()=>n(t),children:y.jsxs("div",{className:"p-5",children:[y.jsxs("div",{className:"flex justify-between items-start mb-3",children:[y.jsxs("span",{className:`text-[10px] font-bold px-2.5 py-1 rounded-md select-none flex items-center gap-1
                  ${t.priority===_e.HIGH?"bg-red-50 text-red-600":t.priority===_e.MEDIUM?"bg-orange-50 text-orange-600":"bg-green-50 text-green-600"}`,children:[t.priority===_e.HIGH&&y.jsx(TC,{className:"w-3 h-3"}),t.priority===_e.HIGH?"":t.priority===_e.MEDIUM?"":""]}),y.jsx("button",{onClick:l=>{l.stopPropagation(),confirm("  ?")&&o(t.id)},className:"flex items-center justify-center w-7 h-7 rounded-full border border-gray-200 text-gray-400 hover:bg-red-50 hover:border-red-200 hover:text-red-500 transition-all opacity-0 group-hover:opacity-100 z-10 bg-white",title:" ",children:y.jsx(Kf,{className:"w-3.5 h-3.5"})})]}),y.jsx("h4",{className:"text-gray-800 font-semibold text-[15px] mb-2 leading-snug group-hover:text-blue-600 transition-colors select-none",children:t.title}),y.jsx("p",{className:"text-gray-500 text-xs line-clamp-2 mb-4 font-light select-none leading-relaxed",children:t.description}),y.jsxs("div",{className:"flex items-end justify-between pt-3 border-t border-gray-100",children:[y.jsxs("div",{className:"flex flex-col gap-1.5",children:[y.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-gray-400",title:"",children:[y.jsx(CC,{className:"w-3 h-3"}),y.jsx("span",{children:Xm(t.createdAt||Date.now())})]}),y.jsxs("div",{className:`flex items-center gap-1.5 text-[11px] font-medium transition-colors
                      ${new Date(t.dueDate)<new Date?"text-red-500":"text-gray-500"}`,title:"",children:[y.jsx(Ta,{className:"w-3 h-3"}),y.jsx("span",{children:Xm(t.dueDate)})]})]}),y.jsxs("div",{className:"flex flex-col items-end gap-1.5",children:[y.jsx("span",{className:"text-[10px] font-medium text-gray-500 bg-gray-100 px-2 py-0.5 rounded-md max-w-[80px] truncate",children:t.product}),y.jsx("img",{src:`https://picsum.photos/seed/${t.assigneeId}/30/30`,className:"w-6 h-6 rounded-full ring-2 ring-white shadow-sm select-none",alt:"Assignee"})]})]})]})}),YC=({id:t,label:e,dotColor:n,tasks:r,draggedTaskId:i,dragOverColumn:o,onTaskClick:s,onDragStart:l,onDragEnd:u,onDragOver:f,onDragLeave:h,onDrop:p,onDeleteTask:m})=>{const v=o===t;return y.jsxs("div",{className:`w-[340px] flex flex-col h-full rounded-3xl transition-colors duration-300 ease-in-out px-2 py-2
            ${v?"bg-blue-50/60 ring-2 ring-blue-200 ring-inset":"bg-transparent"}
        `,onDragOver:P=>f(P,t),onDragLeave:h,onDrop:P=>p(P,t),children:[y.jsxs("div",{className:"flex items-center justify-between mb-6 px-2 mt-2",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:`w-2 h-2 rounded-full ${n}`}),y.jsx("h3",{className:"font-bold text-gray-700 text-sm",children:e})]}),y.jsx("span",{className:`text-xs font-medium px-2.5 py-1 rounded-full transition-colors
            ${v?"bg-blue-200 text-blue-700":"bg-gray-100 text-gray-500"}
        `,children:r.length})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto px-1 space-y-4 pb-20 custom-scrollbar",children:[r.length===0&&!v?y.jsx("div",{className:"flex flex-col items-center justify-center h-32 text-gray-300 border-2 border-dashed border-gray-100 rounded-2xl",children:y.jsx("span",{className:"text-xs",children:" "})}):r.map((P,k)=>y.jsx(QC,{task:P,index:k,draggedTaskId:i,onClick:s,onDragStart:l,onDragEnd:u,onDelete:m},P.id)),v&&r.length===0&&y.jsx("div",{className:"h-32 rounded-2xl border-2 border-dashed border-blue-200 bg-blue-50/30 flex items-center justify-center",children:y.jsx("span",{className:"text-blue-400 text-sm font-medium",children:" "})})]})]})},XC=({tasks:t,onTaskClick:e,onStatusChange:n,onDeleteTask:r})=>{const[i,o]=j.useState(null),[s,l]=j.useState(null),[u,f]=j.useState(""),[h,p]=j.useState("ALL"),[m,v]=j.useState(!1),[P,k]=j.useState("NONE"),L=j.useMemo(()=>KC(t,{query:u,priority:h,onlyMyTasks:m,currentUserId:"u1"},P),[t,u,h,m,P]),A=(F,w)=>{o(w),F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/plain",w);const E=F.target;setTimeout(()=>E.classList.add("opacity-50","scale-95","grayscale"),0)},T=F=>{o(null),l(null),F.target.classList.remove("opacity-50","scale-95","grayscale")},x=(F,w)=>{F.preventDefault(),s!==w&&l(w)},M=()=>{l(null)},V=(F,w)=>{F.preventDefault();const E=F.dataTransfer.getData("text/plain");E&&n(E,w),l(null),o(null)};return y.jsxs("div",{className:"flex flex-col h-full",children:[y.jsx(JC,{searchQuery:u,setSearchQuery:f,onlyMyTasks:m,setOnlyMyTasks:v,filterPriority:h,setFilterPriority:p,sortBy:P,setSortBy:k}),y.jsx("div",{className:"flex gap-8 h-full min-w-max pb-4 flex-1",children:zC.map(F=>{const w=L.filter(E=>E.status===F.id);return y.jsx(YC,{id:F.id,label:F.label,dotColor:F.dotColor,tasks:w,draggedTaskId:i,dragOverColumn:s,onTaskClick:e,onDragStart:A,onDragEnd:T,onDragOver:x,onDragLeave:M,onDrop:V,onDeleteTask:r},F.id)})})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let jC,ZC;function ex(){return{geminiUrl:jC,vertexUrl:ZC}}function tx(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=ex();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kn{}function $(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function c(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const u=t[l];if(Array.isArray(n))for(let f=0;f<u.length;f++){const h=u[f];c(h,e.slice(o+1),n[f])}else for(const f of u)c(f,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const u=t[l];c(u[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(l=>a(l,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function nx(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let l=-1;for(let u=0;u<i.length;u++)if(i[u]==="*"){l=u;break}if(l!==-1&&o.length>l)for(let u=l;u<o.length;u++){const f=o[u];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&s.add(f)}vd(t,i,o,0,s)}}function vd(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(const u of l[s])vd(u,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,l=Object.keys(s).filter(f=>!f.startsWith("_")&&!i.has(f)),u={};for(const f of l)u[f]=s[f];for(const[f,h]of Object.entries(u)){const p=[];for(const m of n.slice(r))m==="*"?p.push(f):p.push(m);c(s,p,h)}for(const f of l)delete s[f]}}else{const s=t;o in s&&vd(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rx(t){const e={},n=a(t,["operationName"]);n!=null&&c(e,["operationName"],n);const r=a(t,["resourceName"]);return r!=null&&c(e,["_url","resourceName"],r),e}function ix(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&c(e,["response"],sx(s)),e}function ox(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],lx(s)),e}function sx(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ax(s))),c(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function lx(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>ux(s))),c(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function ax(t){const e={},n=a(t,["video"]);return n!=null&&c(e,["video"],mx(n)),e}function ux(t){const e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],gx(n)),e}function cx(t){const e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function dx(t){const e={},n=a(t,["operationName"]);return n!=null&&c(e,["_url","operationName"],n),e}function fx(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],hx(s)),e}function hx(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const i=a(t,["documentName"]);return i!=null&&c(e,["documentName"],i),e}function oE(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],px(s)),e}function px(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const i=a(t,["documentName"]);return i!=null&&c(e,["documentName"],i),e}function mx(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);const r=a(t,["encodedVideo"]);r!=null&&c(e,["videoBytes"],Jf(r));const i=a(t,["encoding"]);return i!=null&&c(e,["mimeType"],i),e}function gx(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&c(e,["videoBytes"],Jf(r));const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jm;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(jm||(jm={}));var Zm;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Zm||(Zm={}));var eg;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(eg||(eg={}));var ve;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ve||(ve={}));var tg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(tg||(tg={}));var ng;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(ng||(ng={}));var rg;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(rg||(rg={}));var ig;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ig||(ig={}));var og;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(og||(og={}));var sg;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(sg||(sg={}));var lg;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(lg||(lg={}));var ag;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(ag||(ag={}));var ug;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ug||(ug={}));var cg;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(cg||(cg={}));var dg;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(dg||(dg={}));var fg;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(fg||(fg={}));var hg;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(hg||(hg={}));var pg;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(pg||(pg={}));var mg;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(mg||(mg={}));var Ia;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Ia||(Ia={}));var gg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(gg||(gg={}));var yg;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(yg||(yg={}));var _g;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(_g||(_g={}));var Ed;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ed||(Ed={}));var vg;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(vg||(vg={}));var Eg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Eg||(Eg={}));var Tg;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Tg||(Tg={}));var Ig;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ig||(Ig={}));var wg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(wg||(wg={}));var Sg;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Sg||(Sg={}));var Cg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Cg||(Cg={}));var xg;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(xg||(xg={}));var Ag;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Ag||(Ag={}));var Rg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Rg||(Rg={}));var Ng;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ng||(Ng={}));var Pg;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Pg||(Pg={}));var kg;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(kg||(kg={}));var Dg;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Dg||(Dg={}));var Mg;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Mg||(Mg={}));var Vg;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Vg||(Vg={}));var Lg;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Lg||(Lg={}));var bg;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(bg||(bg={}));var Fg;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Fg||(Fg={}));var Ug;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Ug||(Ug={}));var Og;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Og||(Og={}));var Gg;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Gg||(Gg={}));var Bg;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Bg||(Bg={}));var qg;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(qg||(qg={}));var Hg;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Hg||(Hg={}));var $g;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})($g||($g={}));var zg;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(zg||(zg={}));var Wg;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Wg||(Wg={}));var Kg;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Kg||(Kg={}));var Jg;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Jg||(Jg={}));var Ti;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ti||(Ti={}));class Td{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ko{get text(){var e,n,r,i,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",h=!1;const p=[];for(const m of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[v,P]of Object.entries(m))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(P!==null||P!==void 0)&&p.push(v);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,f+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?f:void 0}get data(){var e,n,r,i,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const h=[];for(const p of(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&u!==void 0?u:[]){for(const[m,v]of Object.entries(p))m!=="inlineData"&&(v!==null||v!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(f+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,i,o,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,r,i,o,s,l,u,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,i,o,s,l,u,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(u=(l=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||u===void 0?void 0:u.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(f=h==null?void 0:h[0])===null||f===void 0?void 0:f.output}}class Qg{}class Yg{}class yx{}class _x{}class vx{}class Ex{}class Xg{}class jg{}class Zg{}class Tx{}class wa{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new wa;let i;const o=e;return n?i=ox(o):i=ix(o),Object.assign(r,i),r}}class ey{}class ty{}class ny{}class Ix{}class wx{}class Sx{}class Qf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Qf,o=fx(e);return Object.assign(r,o),r}}class Cx{}class xx{}class Ax{}class ry{}class Rx{get text(){var e,n,r;let i="",o=!1;const s=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,f]of Object.entries(l))u!=="text"&&u!=="thought"&&f!==null&&s.push(u);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;o=!0,i+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(s))l!=="inlineData"&&u!==null&&o.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Nx{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Yf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Yf,o=oE(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function sE(t,e){const n=fe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function lE(t){return Array.isArray(t)?t.map(e=>Sa(e)):[Sa(t)]}function Sa(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function aE(t){const e=Sa(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function uE(t){const e=Sa(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function iy(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function cE(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>iy(e)):[iy(t)]}function Id(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function oy(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function sy(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ct(t){if(t==null)throw new Error("ContentUnion is required");return Id(t)?t:{role:"user",parts:cE(t)}}function Xf(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=ct(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=ct(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ct(n)):[ct(e)]}function Ot(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(oy(t)||sy(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ct(t)]}const e=[],n=[],r=Id(t[0]);for(const i of t){const o=Id(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(oy(i)||sy(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:cE(n)}),e}function Px(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(ve).includes(n[0].toUpperCase())?n[0].toUpperCase():ve.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(ve).includes(r.toUpperCase())?r.toUpperCase():ve.TYPE_UNSPECIFIED})}}function Ri(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&Px(t.type,e);for(const[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(ve).includes(l.toUpperCase())?l.toUpperCase():ve.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Ri(l);else if(r.includes(s)){const u=[];for(const f of l){if(f.type=="null"){e.nullable=!0;continue}u.push(Ri(f))}e[s]=u}else if(i.includes(s)){const u={};for(const[f,h]of Object.entries(l))u[f]=Ri(h);e[s]=u}else{if(s==="additionalProperties")continue;e[s]=l}return e}function jf(t){return Ri(t)}function Zf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function eh(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Xi(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ri(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ri(e.response));return t}function ji(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function kx(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Dn(t,e){if(typeof e!="string")throw new Error("name must be a string");return kx(t,e,"cachedContents")}function dE(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function vr(t){return Jf(t)}function Dx(t){return t!=null&&typeof t=="object"&&"name"in t}function Mx(t){return t!=null&&typeof t=="object"&&"video"in t}function Vx(t){return t!=null&&typeof t=="object"&&"uri"in t}function fE(t){var e;let n;if(Dx(t)&&(n=t.name),!(Vx(t)&&(n=t.uri,n===void 0))&&!(Mx(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function hE(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function pE(t){for(const e of["models","tunedModels","publisherModels"])if(Lx(t,e))return t[e];return[]}function Lx(t,e){return t!==null&&typeof t=="object"&&e in t}function bx(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Fx(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=bx(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function mE(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Ux(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function gE(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const u=s.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Zi(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function yE(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ox(t){const e={},n=a(t,["responsesFile"]);n!=null&&c(e,["fileName"],n);const r=a(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>vA(s))),c(e,["inlinedResponses"],o)}const i=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["inlinedEmbedContentResponses"],o)}return e}function Gx(t){const e={},n=a(t,["predictionsFormat"]);n!=null&&c(e,["format"],n);const r=a(t,["gcsDestination","outputUriPrefix"]);r!=null&&c(e,["gcsUri"],r);const i=a(t,["bigqueryDestination","outputUri"]);return i!=null&&c(e,["bigqueryUri"],i),e}function Bx(t){const e={},n=a(t,["format"]);n!=null&&c(e,["predictionsFormat"],n);const r=a(t,["gcsUri"]);r!=null&&c(e,["gcsDestination","outputUriPrefix"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&c(e,["bigqueryDestination","outputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Hl(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata","displayName"]);r!=null&&c(e,["displayName"],r);const i=a(t,["metadata","state"]);i!=null&&c(e,["state"],yE(i));const o=a(t,["metadata","createTime"]);o!=null&&c(e,["createTime"],o);const s=a(t,["metadata","endTime"]);s!=null&&c(e,["endTime"],s);const l=a(t,["metadata","updateTime"]);l!=null&&c(e,["updateTime"],l);const u=a(t,["metadata","model"]);u!=null&&c(e,["model"],u);const f=a(t,["metadata","output"]);return f!=null&&c(e,["dest"],Ox(gE(f))),e}function wd(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["displayName"]);r!=null&&c(e,["displayName"],r);const i=a(t,["state"]);i!=null&&c(e,["state"],yE(i));const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["createTime"]);s!=null&&c(e,["createTime"],s);const l=a(t,["startTime"]);l!=null&&c(e,["startTime"],l);const u=a(t,["endTime"]);u!=null&&c(e,["endTime"],u);const f=a(t,["updateTime"]);f!=null&&c(e,["updateTime"],f);const h=a(t,["model"]);h!=null&&c(e,["model"],h);const p=a(t,["inputConfig"]);p!=null&&c(e,["src"],qx(p));const m=a(t,["outputConfig"]);m!=null&&c(e,["dest"],Gx(gE(m)));const v=a(t,["completionStats"]);return v!=null&&c(e,["completionStats"],v),e}function qx(t){const e={},n=a(t,["instancesFormat"]);n!=null&&c(e,["format"],n);const r=a(t,["gcsSource","uris"]);r!=null&&c(e,["gcsUri"],r);const i=a(t,["bigquerySource","inputUri"]);return i!=null&&c(e,["bigqueryUri"],i),e}function Hx(t,e){const n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=a(e,["fileName"]);r!=null&&c(n,["fileName"],r);const i=a(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>_A(t,s))),c(n,["requests","requests"],o)}return n}function $x(t){const e={},n=a(t,["format"]);n!=null&&c(e,["instancesFormat"],n);const r=a(t,["gcsUri"]);r!=null&&c(e,["gcsSource","uris"],r);const i=a(t,["bigqueryUri"]);if(i!=null&&c(e,["bigquerySource","inputUri"],i),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function zx(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Wx(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Zi(t,r)),n}function Kx(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Zi(t,r)),n}function Jx(t){const e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);const r=a(t,["citationMetadata"]);r!=null&&c(e,["citationMetadata"],Qx(r));const i=a(t,["tokenCount"]);i!=null&&c(e,["tokenCount"],i);const o=a(t,["finishReason"]);o!=null&&c(e,["finishReason"],o);const s=a(t,["avgLogprobs"]);s!=null&&c(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&c(e,["index"],u);const f=a(t,["logprobsResult"]);f!=null&&c(e,["logprobsResult"],f);const h=a(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(v=>v)),c(e,["safetyRatings"],m)}const p=a(t,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],p),e}function Qx(t){const e={},n=a(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),c(e,["citations"],r)}return e}function _E(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>xA(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function Yx(t,e){const n={},r=a(t,["displayName"]);if(e!==void 0&&r!=null&&c(e,["batch","displayName"],r),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Xx(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);const i=a(t,["dest"]);return e!==void 0&&i!=null&&c(e,["outputConfig"],Bx(Ux(i))),n}function ly(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["src"]);i!=null&&c(n,["batch","inputConfig"],Hx(t,mE(t,i)));const o=a(e,["config"]);return o!=null&&Yx(o,n),n}function jx(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],fe(t,r));const i=a(e,["src"]);i!=null&&c(n,["inputConfig"],$x(mE(t,i)));const o=a(e,["config"]);return o!=null&&Xx(o,n),n}function Zx(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&c(e,["batch","displayName"],r),n}function eA(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["src"]);i!=null&&c(n,["batch","inputConfig"],lA(t,i));const o=a(e,["config"]);return o!=null&&Zx(o,n),n}function tA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Zi(t,r)),n}function nA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Zi(t,r)),n}function rA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);return o!=null&&c(e,["error"],o),e}function iA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);return o!=null&&c(e,["error"],o),e}function oA(t,e){const n={},r=a(e,["contents"]);if(r!=null){let o=Xf(t,r);Array.isArray(o)&&(o=o.map(s=>s)),c(n,["requests[]","request","content"],o)}const i=a(e,["config"]);return i!=null&&(c(n,["_self"],sA(i,n)),nx(n,{"requests[].*":"requests[].request.*"})),n}function sA(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&c(e,["requests[]","taskType"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&c(e,["requests[]","title"],i);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&c(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function lA(t,e){const n={},r=a(e,["fileName"]);r!=null&&c(n,["file_name"],r);const i=a(e,["inlinedRequests"]);return i!=null&&c(n,["requests"],oA(t,i)),n}function aA(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function uA(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function cA(t){const e={},n=a(t,["mode"]);n!=null&&c(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);if(r!=null&&c(e,["allowedFunctionNames"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function dA(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&c(n,["systemInstruction"],_E(ct(i)));const o=a(e,["temperature"]);o!=null&&c(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&c(r,["topP"],s);const l=a(e,["topK"]);l!=null&&c(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const f=a(e,["maxOutputTokens"]);f!=null&&c(r,["maxOutputTokens"],f);const h=a(e,["stopSequences"]);h!=null&&c(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&c(r,["responseLogprobs"],p);const m=a(e,["logprobs"]);m!=null&&c(r,["logprobs"],m);const v=a(e,["presencePenalty"]);v!=null&&c(r,["presencePenalty"],v);const P=a(e,["frequencyPenalty"]);P!=null&&c(r,["frequencyPenalty"],P);const k=a(e,["seed"]);k!=null&&c(r,["seed"],k);const L=a(e,["responseMimeType"]);L!=null&&c(r,["responseMimeType"],L);const A=a(e,["responseSchema"]);A!=null&&c(r,["responseSchema"],jf(A));const T=a(e,["responseJsonSchema"]);if(T!=null&&c(r,["responseJsonSchema"],T),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=a(e,["safetySettings"]);if(n!==void 0&&x!=null){let D=x;Array.isArray(D)&&(D=D.map(N=>AA(N))),c(n,["safetySettings"],D)}const M=a(e,["tools"]);if(n!==void 0&&M!=null){let D=ji(M);Array.isArray(D)&&(D=D.map(N=>NA(Xi(N)))),c(n,["tools"],D)}const V=a(e,["toolConfig"]);if(n!==void 0&&V!=null&&c(n,["toolConfig"],RA(V)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=a(e,["cachedContent"]);n!==void 0&&F!=null&&c(n,["cachedContent"],Dn(t,F));const w=a(e,["responseModalities"]);w!=null&&c(r,["responseModalities"],w);const E=a(e,["mediaResolution"]);E!=null&&c(r,["mediaResolution"],E);const C=a(e,["speechConfig"]);if(C!=null&&c(r,["speechConfig"],Zf(C)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=a(e,["thinkingConfig"]);R!=null&&c(r,["thinkingConfig"],R);const S=a(e,["imageConfig"]);return S!=null&&c(r,["imageConfig"],yA(S)),r}function fA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>Jx(f))),c(e,["candidates"],u)}const i=a(t,["modelVersion"]);i!=null&&c(e,["modelVersion"],i);const o=a(t,["promptFeedback"]);o!=null&&c(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&c(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function hA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Zi(t,r)),n}function pA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Zi(t,r)),n}function mA(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function gA(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function yA(t){const e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);const r=a(t,["imageSize"]);if(r!=null&&c(e,["imageSize"],r),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function _A(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["request","model"],fe(t,r));const i=a(e,["contents"]);if(i!=null){let l=Ot(i);Array.isArray(l)&&(l=l.map(u=>_E(u))),c(n,["request","contents"],l)}const o=a(e,["metadata"]);o!=null&&c(n,["metadata"],o);const s=a(e,["config"]);return s!=null&&c(n,["request","generationConfig"],dA(t,s,a(n,["request"],{}))),n}function vA(t){const e={},n=a(t,["response"]);n!=null&&c(e,["response"],fA(n));const r=a(t,["error"]);return r!=null&&c(e,["error"],r),e}function EA(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);if(e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function TA(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);e!==void 0&&i!=null&&c(e,["_query","pageToken"],i);const o=a(t,["filter"]);return e!==void 0&&o!=null&&c(e,["_query","filter"],o),n}function IA(t){const e={},n=a(t,["config"]);return n!=null&&EA(n,e),e}function wA(t){const e={},n=a(t,["config"]);return n!=null&&TA(n,e),e}function SA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Hl(s))),c(e,["batchJobs"],o)}return e}function CA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>wd(s))),c(e,["batchJobs"],o)}return e}function xA(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],aA(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],uA(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],zx(u));const f=a(t,["text"]);f!=null&&c(e,["text"],f);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function AA(t){const e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(t,["threshold"]);return r!=null&&c(e,["threshold"],r),e}function RA(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],cA(n));const r=a(t,["retrievalConfig"]);return r!=null&&c(e,["retrievalConfig"],r),e}function NA(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const i=a(t,["computerUse"]);i!=null&&c(e,["computerUse"],i);const o=a(t,["fileSearch"]);o!=null&&c(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],mA(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],gA(u));const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Cn||(Cn={}));class Jr{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PA extends kn{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Jr(Cn.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=ly(this.apiClient,e),r=n._url,i=$("{model}:batchGenerateContent",r),l=n.batch.inputConfig.requests,u=l.requests,f=[];for(const h of u){const p=Object.assign({},h);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const v=p.request;v.systemInstruction=m,p.request=v}f.push(p)}return l.requests=f,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=jx(this.apiClient,e);return l=$("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>wd(h))}else{const f=ly(this.apiClient,e);return l=$("{model}:batchGenerateContent",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Hl(h))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=eA(this.apiClient,e);return o=$("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>Hl(u))}}async get(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=pA(this.apiClient,e);return l=$("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>wd(h))}else{const f=hA(this.apiClient,e);return l=$("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Hl(h))}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const u=Kx(this.apiClient,e);s=$("batchPredictionJobs/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=Wx(this.apiClient,e);s=$("batches/{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=wA(e);return l=$("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=CA(h),m=new ry;return Object.assign(m,p),m})}else{const f=IA(e);return l=$("batches",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=SA(h),m=new ry;return Object.assign(m,p),m})}}async delete(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=nA(this.apiClient,e);return l=$("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>iA(h))}else{const f=tA(this.apiClient,e);return l=$("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>rA(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kA(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function ay(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>e1(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function DA(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&c(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let h=Ot(s);Array.isArray(h)&&(h=h.map(p=>ay(p))),c(e,["contents"],h)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],ay(ct(l)));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(p=>n1(p))),c(e,["tools"],h)}const f=a(t,["toolConfig"]);if(e!==void 0&&f!=null&&c(e,["toolConfig"],t1(f)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function MA(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);e!==void 0&&i!=null&&c(e,["expireTime"],i);const o=a(t,["displayName"]);e!==void 0&&o!=null&&c(e,["displayName"],o);const s=a(t,["contents"]);if(e!==void 0&&s!=null){let p=Ot(s);Array.isArray(p)&&(p=p.map(m=>m)),c(e,["contents"],p)}const l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&c(e,["systemInstruction"],ct(l));const u=a(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>r1(m))),c(e,["tools"],p)}const f=a(t,["toolConfig"]);e!==void 0&&f!=null&&c(e,["toolConfig"],f);const h=a(t,["kmsKeyName"]);return e!==void 0&&h!=null&&c(e,["encryption_spec","kmsKeyName"],h),n}function VA(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],sE(t,r));const i=a(e,["config"]);return i!=null&&DA(i,n),n}function LA(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["model"],sE(t,r));const i=a(e,["config"]);return i!=null&&MA(i,n),n}function bA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Dn(t,r)),n}function FA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Dn(t,r)),n}function UA(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function OA(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function GA(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function BA(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qA(t){const e={},n=a(t,["mode"]);n!=null&&c(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);if(r!=null&&c(e,["allowedFunctionNames"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function HA(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["parameters"]);i!=null&&c(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&c(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&c(e,["responseJsonSchema"],l),e}function $A(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Dn(t,r)),n}function zA(t,e){const n={},r=a(e,["name"]);return r!=null&&c(n,["_url","name"],Dn(t,r)),n}function WA(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function KA(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function JA(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function QA(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function YA(t){const e={},n=a(t,["config"]);return n!=null&&JA(n,e),e}function XA(t){const e={},n=a(t,["config"]);return n!=null&&QA(n,e),e}function jA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["cachedContents"],o)}return e}function ZA(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["cachedContents"],o)}return e}function e1(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],GA(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],BA(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],kA(u));const f=a(t,["text"]);f!=null&&c(e,["text"],f);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function t1(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],qA(n));const r=a(t,["retrievalConfig"]);return r!=null&&c(e,["retrievalConfig"],r),e}function n1(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const i=a(t,["computerUse"]);i!=null&&c(e,["computerUse"],i);const o=a(t,["fileSearch"]);o!=null&&c(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],WA(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],KA(u));const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function r1(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>HA(m))),c(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&c(e,["retrieval"],r);const i=a(t,["googleSearchRetrieval"]);i!=null&&c(e,["googleSearchRetrieval"],i);const o=a(t,["computerUse"]);if(o!=null&&c(e,["computerUse"],o),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);const l=a(t,["enterpriseWebSearch"]);l!=null&&c(e,["enterpriseWebSearch"],l);const u=a(t,["googleMaps"]);u!=null&&c(e,["googleMaps"],u);const f=a(t,["googleSearch"]);f!=null&&c(e,["googleSearch"],f);const h=a(t,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}function i1(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&c(e,["expireTime"],i),n}function o1(t,e){const n={},r=a(t,["ttl"]);e!==void 0&&r!=null&&c(e,["ttl"],r);const i=a(t,["expireTime"]);return e!==void 0&&i!=null&&c(e,["expireTime"],i),n}function s1(t,e){const n={},r=a(e,["name"]);r!=null&&c(n,["_url","name"],Dn(t,r));const i=a(e,["config"]);return i!=null&&i1(i,n),n}function l1(t,e){const n={},r=a(e,["name"]);r!=null&&c(n,["_url","name"],Dn(t,r));const i=a(e,["config"]);return i!=null&&o1(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class a1 extends kn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Jr(Cn.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=LA(this.apiClient,e);return l=$("cachedContents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const f=VA(this.apiClient,e);return l=$("cachedContents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=zA(this.apiClient,e);return l=$("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const f=$A(this.apiClient,e);return l=$("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=FA(this.apiClient,e);return l=$("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=OA(h),m=new ty;return Object.assign(m,p),m})}else{const f=bA(this.apiClient,e);return l=$("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=UA(h),m=new ty;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=l1(this.apiClient,e);return l=$("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const f=s1(this.apiClient,e);return l=$("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=XA(e);return l=$("cachedContents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=ZA(h),m=new ny;return Object.assign(m,p),m})}else{const f=YA(e);return l=$("cachedContents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=jA(h),m=new ny;return Object.assign(m,p),m})}}}function uy(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ce(t){return this instanceof Ce?(this.v=t,this):new Ce(t)}function Ni(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(P){return Promise.resolve(P).then(v,p)}}function l(v,P){r[v]&&(i[v]=function(k){return new Promise(function(L,A){o.push([v,k,L,A])>1||u(v,k)})},P&&(i[v]=P(i[v])))}function u(v,P){try{f(r[v](P))}catch(k){m(o[0][3],k)}}function f(v){v.value instanceof Ce?Promise.resolve(v.value.v).then(h,p):m(o[0][2],v)}function h(v){u("next",v)}function p(v){u("throw",v)}function m(v,P){v(P),o.shift(),o.length&&u(o[0][0],o[0][1])}}function jo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof uy=="function"?uy(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(l,u){s=t[o](s),i(l,u,s.done,s.value)})}}function i(o,s,l,u){Promise.resolve(u).then(function(f){o({value:f,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u1(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:vE(n)}function vE(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function c1(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function cy(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!vE(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class d1{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new f1(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class f1{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),c1(o)}async sendMessage(e){var n;await this.sendPromise;const r=ct(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,l;const u=await i,f=(s=(o=u.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=u.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];h!=null&&(m=(l=h.slice(p))!==null&&l!==void 0?l:[]);const v=f?[f]:[];this.recordHistory(r,v,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=ct(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?cy(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Ni(this,arguments,function*(){var s,l,u,f;const h=[];try{for(var p=!0,m=jo(e),v;v=yield Ce(m.next()),s=v.done,!s;p=!0){f=v.value,p=!1;const P=f;if(u1(P)){const k=(i=(r=P.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;k!==void 0&&h.push(k)}yield yield Ce(P)}}catch(P){l={error:P}}finally{try{!p&&!s&&(u=m.return)&&(yield Ce(u.call(m)))}finally{if(l)throw l.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...cy(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,nu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h1(t){const e={},n=a(t,["file"]);return n!=null&&c(e,["file"],n),e}function p1(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function m1(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],fE(n)),e}function g1(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function y1(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","file"],fE(n)),e}function _1(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function v1(t){const e={},n=a(t,["config"]);return n!=null&&_1(n,e),e}function E1(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T1 extends kn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Jr(Cn.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=v1(e);return o=$("files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const f=E1(u),h=new Cx;return Object.assign(h,f),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=h1(e);return o=$("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=p1(u),h=new xx;return Object.assign(h,f),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=y1(e);return o=$("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=m1(e);return o=$("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const f=g1(u),h=new Ax;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $l(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function I1(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>U1(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function w1(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function S1(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function C1(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["parameters"]);i!=null&&c(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&c(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&c(e,["responseJsonSchema"],l),e}function x1(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);const r=a(t,["responseJsonSchema"]);r!=null&&c(e,["responseJsonSchema"],r);const i=a(t,["audioTimestamp"]);i!=null&&c(e,["audioTimestamp"],i);const o=a(t,["candidateCount"]);o!=null&&c(e,["candidateCount"],o);const s=a(t,["enableAffectiveDialog"]);s!=null&&c(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&c(e,["logprobs"],u);const f=a(t,["maxOutputTokens"]);f!=null&&c(e,["maxOutputTokens"],f);const h=a(t,["mediaResolution"]);h!=null&&c(e,["mediaResolution"],h);const p=a(t,["presencePenalty"]);p!=null&&c(e,["presencePenalty"],p);const m=a(t,["responseLogprobs"]);m!=null&&c(e,["responseLogprobs"],m);const v=a(t,["responseMimeType"]);v!=null&&c(e,["responseMimeType"],v);const P=a(t,["responseModalities"]);P!=null&&c(e,["responseModalities"],P);const k=a(t,["responseSchema"]);k!=null&&c(e,["responseSchema"],k);const L=a(t,["routingConfig"]);L!=null&&c(e,["routingConfig"],L);const A=a(t,["seed"]);A!=null&&c(e,["seed"],A);const T=a(t,["speechConfig"]);T!=null&&c(e,["speechConfig"],EE(T));const x=a(t,["stopSequences"]);x!=null&&c(e,["stopSequences"],x);const M=a(t,["temperature"]);M!=null&&c(e,["temperature"],M);const V=a(t,["thinkingConfig"]);V!=null&&c(e,["thinkingConfig"],V);const F=a(t,["topK"]);F!=null&&c(e,["topK"],F);const w=a(t,["topP"]);if(w!=null&&c(e,["topP"],w),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function A1(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function R1(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function N1(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);const h=a(t,["seed"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],eh(p));const m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);const v=a(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],v);const P=a(t,["systemInstruction"]);e!==void 0&&P!=null&&c(e,["setup","systemInstruction"],I1(ct(P)));const k=a(t,["tools"]);if(e!==void 0&&k!=null){let F=ji(k);Array.isArray(F)&&(F=F.map(w=>G1(Xi(w)))),c(e,["setup","tools"],F)}const L=a(t,["sessionResumption"]);e!==void 0&&L!=null&&c(e,["setup","sessionResumption"],O1(L));const A=a(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&c(e,["setup","inputAudioTranscription"],A);const T=a(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&c(e,["setup","outputAudioTranscription"],T);const x=a(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&c(e,["setup","realtimeInputConfig"],x);const M=a(t,["contextWindowCompression"]);e!==void 0&&M!=null&&c(e,["setup","contextWindowCompression"],M);const V=a(t,["proactivity"]);return e!==void 0&&V!=null&&c(e,["setup","proactivity"],V),n}function P1(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],x1(r));const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);const h=a(t,["seed"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],EE(eh(p)));const m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);const v=a(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],v);const P=a(t,["systemInstruction"]);e!==void 0&&P!=null&&c(e,["setup","systemInstruction"],ct(P));const k=a(t,["tools"]);if(e!==void 0&&k!=null){let F=ji(k);Array.isArray(F)&&(F=F.map(w=>B1(Xi(w)))),c(e,["setup","tools"],F)}const L=a(t,["sessionResumption"]);e!==void 0&&L!=null&&c(e,["setup","sessionResumption"],L);const A=a(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&c(e,["setup","inputAudioTranscription"],A);const T=a(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&c(e,["setup","outputAudioTranscription"],T);const x=a(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&c(e,["setup","realtimeInputConfig"],x);const M=a(t,["contextWindowCompression"]);e!==void 0&&M!=null&&c(e,["setup","contextWindowCompression"],M);const V=a(t,["proactivity"]);return e!==void 0&&V!=null&&c(e,["setup","proactivity"],V),n}function k1(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],fe(t,r));const i=a(e,["config"]);return i!=null&&c(n,["config"],N1(i,n)),n}function D1(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],fe(t,r));const i=a(e,["config"]);return i!=null&&c(n,["config"],P1(i,n)),n}function M1(t){const e={},n=a(t,["musicGenerationConfig"]);return n!=null&&c(e,["musicGenerationConfig"],n),e}function V1(t){const e={},n=a(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),c(e,["weightedPrompts"],r)}return e}function L1(t){const e={},n=a(t,["media"]);if(n!=null){let f=lE(n);Array.isArray(f)&&(f=f.map(h=>$l(h))),c(e,["mediaChunks"],f)}const r=a(t,["audio"]);r!=null&&c(e,["audio"],$l(uE(r)));const i=a(t,["audioStreamEnd"]);i!=null&&c(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&c(e,["video"],$l(aE(o)));const s=a(t,["text"]);s!=null&&c(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function b1(t){const e={},n=a(t,["media"]);if(n!=null){let f=lE(n);Array.isArray(f)&&(f=f.map(h=>h)),c(e,["mediaChunks"],f)}const r=a(t,["audio"]);r!=null&&c(e,["audio"],uE(r));const i=a(t,["audioStreamEnd"]);i!=null&&c(e,["audioStreamEnd"],i);const o=a(t,["video"]);o!=null&&c(e,["video"],aE(o));const s=a(t,["text"]);s!=null&&c(e,["text"],s);const l=a(t,["activityStart"]);l!=null&&c(e,["activityStart"],l);const u=a(t,["activityEnd"]);return u!=null&&c(e,["activityEnd"],u),e}function F1(t){const e={},n=a(t,["setupComplete"]);n!=null&&c(e,["setupComplete"],n);const r=a(t,["serverContent"]);r!=null&&c(e,["serverContent"],r);const i=a(t,["toolCall"]);i!=null&&c(e,["toolCall"],i);const o=a(t,["toolCallCancellation"]);o!=null&&c(e,["toolCallCancellation"],o);const s=a(t,["usageMetadata"]);s!=null&&c(e,["usageMetadata"],q1(s));const l=a(t,["goAway"]);l!=null&&c(e,["goAway"],l);const u=a(t,["sessionResumptionUpdate"]);return u!=null&&c(e,["sessionResumptionUpdate"],u),e}function U1(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],w1(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],S1(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],$l(u));const f=a(t,["text"]);f!=null&&c(e,["text"],f);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function O1(t){const e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function EE(t){const e={},n=a(t,["languageCode"]);n!=null&&c(e,["languageCode"],n);const r=a(t,["voiceConfig"]);if(r!=null&&c(e,["voiceConfig"],r),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function G1(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const i=a(t,["computerUse"]);i!=null&&c(e,["computerUse"],i);const o=a(t,["fileSearch"]);o!=null&&c(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],A1(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],R1(u));const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function B1(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>C1(m))),c(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&c(e,["retrieval"],r);const i=a(t,["googleSearchRetrieval"]);i!=null&&c(e,["googleSearchRetrieval"],i);const o=a(t,["computerUse"]);if(o!=null&&c(e,["computerUse"],o),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);const l=a(t,["enterpriseWebSearch"]);l!=null&&c(e,["enterpriseWebSearch"],l);const u=a(t,["googleMaps"]);u!=null&&c(e,["googleMaps"],u);const f=a(t,["googleSearch"]);f!=null&&c(e,["googleSearch"],f);const h=a(t,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}function q1(t){const e={},n=a(t,["promptTokenCount"]);n!=null&&c(e,["promptTokenCount"],n);const r=a(t,["cachedContentTokenCount"]);r!=null&&c(e,["cachedContentTokenCount"],r);const i=a(t,["candidatesTokenCount"]);i!=null&&c(e,["responseTokenCount"],i);const o=a(t,["toolUsePromptTokenCount"]);o!=null&&c(e,["toolUsePromptTokenCount"],o);const s=a(t,["thoughtsTokenCount"]);s!=null&&c(e,["thoughtsTokenCount"],s);const l=a(t,["totalTokenCount"]);l!=null&&c(e,["totalTokenCount"],l);const u=a(t,["promptTokensDetails"]);if(u!=null){let v=u;Array.isArray(v)&&(v=v.map(P=>P)),c(e,["promptTokensDetails"],v)}const f=a(t,["cacheTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(P=>P)),c(e,["cacheTokensDetails"],v)}const h=a(t,["candidatesTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(P=>P)),c(e,["responseTokensDetails"],v)}const p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(P=>P)),c(e,["toolUsePromptTokensDetails"],v)}const m=a(t,["trafficType"]);return m!=null&&c(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H1(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function $1(t){const e={},n=a(t,["content"]);n!=null&&c(e,["content"],n);const r=a(t,["citationMetadata"]);r!=null&&c(e,["citationMetadata"],z1(r));const i=a(t,["tokenCount"]);i!=null&&c(e,["tokenCount"],i);const o=a(t,["finishReason"]);o!=null&&c(e,["finishReason"],o);const s=a(t,["avgLogprobs"]);s!=null&&c(e,["avgLogprobs"],s);const l=a(t,["groundingMetadata"]);l!=null&&c(e,["groundingMetadata"],l);const u=a(t,["index"]);u!=null&&c(e,["index"],u);const f=a(t,["logprobsResult"]);f!=null&&c(e,["logprobsResult"],f);const h=a(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(v=>v)),c(e,["safetyRatings"],m)}const p=a(t,["urlContextMetadata"]);return p!=null&&c(e,["urlContextMetadata"],p),e}function z1(t){const e={},n=a(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),c(e,["citations"],r)}return e}function W1(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["contents"]);if(i!=null){let o=Ot(i);Array.isArray(o)&&(o=o.map(s=>s)),c(n,["contents"],o)}return n}function K1(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),c(e,["tokensInfo"],i)}return e}function J1(t){const e={},n=a(t,["values"]);n!=null&&c(e,["values"],n);const r=a(t,["statistics"]);return r!=null&&c(e,["statistics"],Q1(r)),e}function Q1(t){const e={},n=a(t,["truncated"]);n!=null&&c(e,["truncated"],n);const r=a(t,["token_count"]);return r!=null&&c(e,["tokenCount"],r),e}function ru(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>iN(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function Y1(t){const e={},n=a(t,["controlType"]);n!=null&&c(e,["controlType"],n);const r=a(t,["enableControlImageComputation"]);return r!=null&&c(e,["computeControl"],r),e}function X1(t){const e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function j1(t,e){const n={},r=a(t,["systemInstruction"]);e!==void 0&&r!=null&&c(e,["systemInstruction"],ct(r));const i=a(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>CE(l))),c(e,["tools"],s)}const o=a(t,["generationConfig"]);return e!==void 0&&o!=null&&c(e,["generationConfig"],HR(o)),n}function Z1(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["contents"]);if(i!=null){let s=Ot(i);Array.isArray(s)&&(s=s.map(l=>ru(l))),c(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&X1(o),n}function eR(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["contents"]);if(i!=null){let s=Ot(i);Array.isArray(s)&&(s=s.map(l=>l)),c(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&j1(o,n),n}function tR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);r!=null&&c(e,["totalTokens"],r);const i=a(t,["cachedContentTokenCount"]);return i!=null&&c(e,["cachedContentTokenCount"],i),e}function nR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["totalTokens"]);return r!=null&&c(e,["totalTokens"],r),e}function rR(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],fe(t,r)),n}function iR(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],fe(t,r)),n}function oR(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function sR(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}function lR(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const i=a(t,["negativePrompt"]);e!==void 0&&i!=null&&c(e,["parameters","negativePrompt"],i);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&c(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&c(e,["parameters","seed"],u);const f=a(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&c(e,["parameters","safetySetting"],f);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&c(e,["parameters","personGeneration"],h);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&c(e,["parameters","includeSafetyAttributes"],p);const m=a(t,["includeRaiReason"]);e!==void 0&&m!=null&&c(e,["parameters","includeRaiReason"],m);const v=a(t,["language"]);e!==void 0&&v!=null&&c(e,["parameters","language"],v);const P=a(t,["outputMimeType"]);e!==void 0&&P!=null&&c(e,["parameters","outputOptions","mimeType"],P);const k=a(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&c(e,["parameters","outputOptions","compressionQuality"],k);const L=a(t,["addWatermark"]);e!==void 0&&L!=null&&c(e,["parameters","addWatermark"],L);const A=a(t,["labels"]);e!==void 0&&A!=null&&c(e,["labels"],A);const T=a(t,["editMode"]);e!==void 0&&T!=null&&c(e,["parameters","editMode"],T);const x=a(t,["baseSteps"]);return e!==void 0&&x!=null&&c(e,["parameters","editConfig","baseSteps"],x),n}function aR(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["prompt"]);i!=null&&c(n,["instances[0]","prompt"],i);const o=a(e,["referenceImages"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>cN(u))),c(n,["instances[0]","referenceImages"],l)}const s=a(e,["config"]);return s!=null&&lR(s,n),n}function uR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>iu(o))),c(e,["generatedImages"],i)}return e}function cR(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&c(e,["requests[]","taskType"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&c(e,["requests[]","title"],i);const o=a(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&c(e,["requests[]","outputDimensionality"],o),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function dR(t,e){const n={},r=a(t,["taskType"]);e!==void 0&&r!=null&&c(e,["instances[]","task_type"],r);const i=a(t,["title"]);e!==void 0&&i!=null&&c(e,["instances[]","title"],i);const o=a(t,["outputDimensionality"]);e!==void 0&&o!=null&&c(e,["parameters","outputDimensionality"],o);const s=a(t,["mimeType"]);e!==void 0&&s!=null&&c(e,["instances[]","mimeType"],s);const l=a(t,["autoTruncate"]);return e!==void 0&&l!=null&&c(e,["parameters","autoTruncate"],l),n}function fR(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["contents"]);if(i!=null){let l=Xf(t,i);Array.isArray(l)&&(l=l.map(u=>u)),c(n,["requests[]","content"],l)}const o=a(e,["config"]);o!=null&&cR(o,n);const s=a(e,["model"]);return s!==void 0&&c(n,["requests[]","model"],fe(t,s)),n}function hR(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["contents"]);if(i!=null){let s=Xf(t,i);Array.isArray(s)&&(s=s.map(l=>l)),c(n,["instances[]","content"],s)}const o=a(e,["config"]);return o!=null&&dR(o,n),n}function pR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["embeddings"],o)}const i=a(t,["metadata"]);return i!=null&&c(e,["metadata"],i),e}function mR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>J1(s))),c(e,["embeddings"],o)}const i=a(t,["metadata"]);return i!=null&&c(e,["metadata"],i),e}function gR(t){const e={},n=a(t,["endpoint"]);n!=null&&c(e,["name"],n);const r=a(t,["deployedModelId"]);return r!=null&&c(e,["deployedModelId"],r),e}function yR(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function _R(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vR(t){const e={},n=a(t,["mode"]);n!=null&&c(e,["mode"],n);const r=a(t,["allowedFunctionNames"]);if(r!=null&&c(e,["allowedFunctionNames"],r),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ER(t){const e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=a(t,["description"]);n!=null&&c(e,["description"],n);const r=a(t,["name"]);r!=null&&c(e,["name"],r);const i=a(t,["parameters"]);i!=null&&c(e,["parameters"],i);const o=a(t,["parametersJsonSchema"]);o!=null&&c(e,["parametersJsonSchema"],o);const s=a(t,["response"]);s!=null&&c(e,["response"],s);const l=a(t,["responseJsonSchema"]);return l!=null&&c(e,["responseJsonSchema"],l),e}function TR(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&c(n,["systemInstruction"],ru(ct(i)));const o=a(e,["temperature"]);o!=null&&c(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&c(r,["topP"],s);const l=a(e,["topK"]);l!=null&&c(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const f=a(e,["maxOutputTokens"]);f!=null&&c(r,["maxOutputTokens"],f);const h=a(e,["stopSequences"]);h!=null&&c(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&c(r,["responseLogprobs"],p);const m=a(e,["logprobs"]);m!=null&&c(r,["logprobs"],m);const v=a(e,["presencePenalty"]);v!=null&&c(r,["presencePenalty"],v);const P=a(e,["frequencyPenalty"]);P!=null&&c(r,["frequencyPenalty"],P);const k=a(e,["seed"]);k!=null&&c(r,["seed"],k);const L=a(e,["responseMimeType"]);L!=null&&c(r,["responseMimeType"],L);const A=a(e,["responseSchema"]);A!=null&&c(r,["responseSchema"],jf(A));const T=a(e,["responseJsonSchema"]);if(T!=null&&c(r,["responseJsonSchema"],T),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const x=a(e,["safetySettings"]);if(n!==void 0&&x!=null){let D=x;Array.isArray(D)&&(D=D.map(N=>dN(N))),c(n,["safetySettings"],D)}const M=a(e,["tools"]);if(n!==void 0&&M!=null){let D=ji(M);Array.isArray(D)&&(D=D.map(N=>_N(Xi(N)))),c(n,["tools"],D)}const V=a(e,["toolConfig"]);if(n!==void 0&&V!=null&&c(n,["toolConfig"],yN(V)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=a(e,["cachedContent"]);n!==void 0&&F!=null&&c(n,["cachedContent"],Dn(t,F));const w=a(e,["responseModalities"]);w!=null&&c(r,["responseModalities"],w);const E=a(e,["mediaResolution"]);E!=null&&c(r,["mediaResolution"],E);const C=a(e,["speechConfig"]);if(C!=null&&c(r,["speechConfig"],Zf(C)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=a(e,["thinkingConfig"]);R!=null&&c(r,["thinkingConfig"],R);const S=a(e,["imageConfig"]);return S!=null&&c(r,["imageConfig"],JR(S)),r}function IR(t,e,n){const r={},i=a(e,["systemInstruction"]);n!==void 0&&i!=null&&c(n,["systemInstruction"],ct(i));const o=a(e,["temperature"]);o!=null&&c(r,["temperature"],o);const s=a(e,["topP"]);s!=null&&c(r,["topP"],s);const l=a(e,["topK"]);l!=null&&c(r,["topK"],l);const u=a(e,["candidateCount"]);u!=null&&c(r,["candidateCount"],u);const f=a(e,["maxOutputTokens"]);f!=null&&c(r,["maxOutputTokens"],f);const h=a(e,["stopSequences"]);h!=null&&c(r,["stopSequences"],h);const p=a(e,["responseLogprobs"]);p!=null&&c(r,["responseLogprobs"],p);const m=a(e,["logprobs"]);m!=null&&c(r,["logprobs"],m);const v=a(e,["presencePenalty"]);v!=null&&c(r,["presencePenalty"],v);const P=a(e,["frequencyPenalty"]);P!=null&&c(r,["frequencyPenalty"],P);const k=a(e,["seed"]);k!=null&&c(r,["seed"],k);const L=a(e,["responseMimeType"]);L!=null&&c(r,["responseMimeType"],L);const A=a(e,["responseSchema"]);A!=null&&c(r,["responseSchema"],jf(A));const T=a(e,["responseJsonSchema"]);T!=null&&c(r,["responseJsonSchema"],T);const x=a(e,["routingConfig"]);x!=null&&c(r,["routingConfig"],x);const M=a(e,["modelSelectionConfig"]);M!=null&&c(r,["modelConfig"],M);const V=a(e,["safetySettings"]);if(n!==void 0&&V!=null){let J=V;Array.isArray(J)&&(J=J.map(ie=>ie)),c(n,["safetySettings"],J)}const F=a(e,["tools"]);if(n!==void 0&&F!=null){let J=ji(F);Array.isArray(J)&&(J=J.map(ie=>CE(Xi(ie)))),c(n,["tools"],J)}const w=a(e,["toolConfig"]);n!==void 0&&w!=null&&c(n,["toolConfig"],w);const E=a(e,["labels"]);n!==void 0&&E!=null&&c(n,["labels"],E);const C=a(e,["cachedContent"]);n!==void 0&&C!=null&&c(n,["cachedContent"],Dn(t,C));const R=a(e,["responseModalities"]);R!=null&&c(r,["responseModalities"],R);const S=a(e,["mediaResolution"]);S!=null&&c(r,["mediaResolution"],S);const D=a(e,["speechConfig"]);D!=null&&c(r,["speechConfig"],SE(Zf(D)));const N=a(e,["audioTimestamp"]);N!=null&&c(r,["audioTimestamp"],N);const he=a(e,["thinkingConfig"]);he!=null&&c(r,["thinkingConfig"],he);const Ye=a(e,["imageConfig"]);return Ye!=null&&c(r,["imageConfig"],QR(Ye)),r}function dy(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["contents"]);if(i!=null){let s=Ot(i);Array.isArray(s)&&(s=s.map(l=>ru(l))),c(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&c(n,["generationConfig"],TR(t,o,n)),n}function fy(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["contents"]);if(i!=null){let s=Ot(i);Array.isArray(s)&&(s=s.map(l=>l)),c(n,["contents"],s)}const o=a(e,["config"]);return o!=null&&c(n,["generationConfig"],IR(t,o,n)),n}function hy(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>$1(f))),c(e,["candidates"],u)}const i=a(t,["modelVersion"]);i!=null&&c(e,["modelVersion"],i);const o=a(t,["promptFeedback"]);o!=null&&c(e,["promptFeedback"],o);const s=a(t,["responseId"]);s!=null&&c(e,["responseId"],s);const l=a(t,["usageMetadata"]);return l!=null&&c(e,["usageMetadata"],l),e}function py(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(h=>h)),c(e,["candidates"],f)}const i=a(t,["createTime"]);i!=null&&c(e,["createTime"],i);const o=a(t,["modelVersion"]);o!=null&&c(e,["modelVersion"],o);const s=a(t,["promptFeedback"]);s!=null&&c(e,["promptFeedback"],s);const l=a(t,["responseId"]);l!=null&&c(e,["responseId"],l);const u=a(t,["usageMetadata"]);return u!=null&&c(e,["usageMetadata"],u),e}function wR(t,e){const n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r);const i=a(t,["aspectRatio"]);e!==void 0&&i!=null&&c(e,["parameters","aspectRatio"],i);const o=a(t,["guidanceScale"]);if(e!==void 0&&o!=null&&c(e,["parameters","guidanceScale"],o),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=a(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&c(e,["parameters","safetySetting"],s);const l=a(t,["personGeneration"]);e!==void 0&&l!=null&&c(e,["parameters","personGeneration"],l);const u=a(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&c(e,["parameters","includeSafetyAttributes"],u);const f=a(t,["includeRaiReason"]);e!==void 0&&f!=null&&c(e,["parameters","includeRaiReason"],f);const h=a(t,["language"]);e!==void 0&&h!=null&&c(e,["parameters","language"],h);const p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","mimeType"],p);const m=a(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&c(e,["parameters","outputOptions","compressionQuality"],m),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const v=a(t,["imageSize"]);if(e!==void 0&&v!=null&&c(e,["parameters","sampleImageSize"],v),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function SR(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const i=a(t,["negativePrompt"]);e!==void 0&&i!=null&&c(e,["parameters","negativePrompt"],i);const o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&c(e,["parameters","sampleCount"],o);const s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&c(e,["parameters","aspectRatio"],s);const l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&c(e,["parameters","guidanceScale"],l);const u=a(t,["seed"]);e!==void 0&&u!=null&&c(e,["parameters","seed"],u);const f=a(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&c(e,["parameters","safetySetting"],f);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&c(e,["parameters","personGeneration"],h);const p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&c(e,["parameters","includeSafetyAttributes"],p);const m=a(t,["includeRaiReason"]);e!==void 0&&m!=null&&c(e,["parameters","includeRaiReason"],m);const v=a(t,["language"]);e!==void 0&&v!=null&&c(e,["parameters","language"],v);const P=a(t,["outputMimeType"]);e!==void 0&&P!=null&&c(e,["parameters","outputOptions","mimeType"],P);const k=a(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&c(e,["parameters","outputOptions","compressionQuality"],k);const L=a(t,["addWatermark"]);e!==void 0&&L!=null&&c(e,["parameters","addWatermark"],L);const A=a(t,["labels"]);e!==void 0&&A!=null&&c(e,["labels"],A);const T=a(t,["imageSize"]);e!==void 0&&T!=null&&c(e,["parameters","sampleImageSize"],T);const x=a(t,["enhancePrompt"]);return e!==void 0&&x!=null&&c(e,["parameters","enhancePrompt"],x),n}function CR(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["prompt"]);i!=null&&c(n,["instances[0]","prompt"],i);const o=a(e,["config"]);return o!=null&&wR(o,n),n}function xR(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["prompt"]);i!=null&&c(n,["instances[0]","prompt"],i);const o=a(e,["config"]);return o!=null&&SR(o,n),n}function AR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>OR(s))),c(e,["generatedImages"],o)}const i=a(t,["positivePromptSafetyAttributes"]);return i!=null&&c(e,["positivePromptSafetyAttributes"],IE(i)),e}function RR(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>iu(s))),c(e,["generatedImages"],o)}const i=a(t,["positivePromptSafetyAttributes"]);return i!=null&&c(e,["positivePromptSafetyAttributes"],wE(i)),e}function NR(t,e){const n={},r=a(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=a(t,["durationSeconds"]);if(e!==void 0&&i!=null&&c(e,["parameters","durationSeconds"],i),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=a(t,["aspectRatio"]);e!==void 0&&o!=null&&c(e,["parameters","aspectRatio"],o);const s=a(t,["resolution"]);e!==void 0&&s!=null&&c(e,["parameters","resolution"],s);const l=a(t,["personGeneration"]);if(e!==void 0&&l!=null&&c(e,["parameters","personGeneration"],l),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=a(t,["negativePrompt"]);e!==void 0&&u!=null&&c(e,["parameters","negativePrompt"],u);const f=a(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&c(e,["parameters","enhancePrompt"],f),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=a(t,["lastFrame"]);e!==void 0&&h!=null&&c(e,["instances[0]","lastFrame"],ou(h));const p=a(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(v=>kN(v))),c(e,["instances[0]","referenceImages"],m)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function PR(t,e){const n={},r=a(t,["numberOfVideos"]);e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r);const i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&c(e,["parameters","storageUri"],i);const o=a(t,["fps"]);e!==void 0&&o!=null&&c(e,["parameters","fps"],o);const s=a(t,["durationSeconds"]);e!==void 0&&s!=null&&c(e,["parameters","durationSeconds"],s);const l=a(t,["seed"]);e!==void 0&&l!=null&&c(e,["parameters","seed"],l);const u=a(t,["aspectRatio"]);e!==void 0&&u!=null&&c(e,["parameters","aspectRatio"],u);const f=a(t,["resolution"]);e!==void 0&&f!=null&&c(e,["parameters","resolution"],f);const h=a(t,["personGeneration"]);e!==void 0&&h!=null&&c(e,["parameters","personGeneration"],h);const p=a(t,["pubsubTopic"]);e!==void 0&&p!=null&&c(e,["parameters","pubsubTopic"],p);const m=a(t,["negativePrompt"]);e!==void 0&&m!=null&&c(e,["parameters","negativePrompt"],m);const v=a(t,["enhancePrompt"]);e!==void 0&&v!=null&&c(e,["parameters","enhancePrompt"],v);const P=a(t,["generateAudio"]);e!==void 0&&P!=null&&c(e,["parameters","generateAudio"],P);const k=a(t,["lastFrame"]);e!==void 0&&k!=null&&c(e,["instances[0]","lastFrame"],Zt(k));const L=a(t,["referenceImages"]);if(e!==void 0&&L!=null){let x=L;Array.isArray(x)&&(x=x.map(M=>DN(M))),c(e,["instances[0]","referenceImages"],x)}const A=a(t,["mask"]);e!==void 0&&A!=null&&c(e,["instances[0]","mask"],PN(A));const T=a(t,["compressionQuality"]);return e!==void 0&&T!=null&&c(e,["parameters","compressionQuality"],T),n}function kR(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response","generateVideoResponse"]);return s!=null&&c(e,["response"],LR(s)),e}function DR(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],bR(s)),e}function MR(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["prompt"]);i!=null&&c(n,["instances[0]","prompt"],i);const o=a(e,["image"]);o!=null&&c(n,["instances[0]","image"],ou(o));const s=a(e,["video"]);s!=null&&c(n,["instances[0]","video"],xE(s));const l=a(e,["source"]);l!=null&&FR(l,n);const u=a(e,["config"]);return u!=null&&NR(u,n),n}function VR(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["prompt"]);i!=null&&c(n,["instances[0]","prompt"],i);const o=a(e,["image"]);o!=null&&c(n,["instances[0]","image"],Zt(o));const s=a(e,["video"]);s!=null&&c(n,["instances[0]","video"],AE(s));const l=a(e,["source"]);l!=null&&UR(l,n);const u=a(e,["config"]);return u!=null&&PR(u,n),n}function LR(t){const e={},n=a(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>BR(s))),c(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function bR(t){const e={},n=a(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>qR(s))),c(e,["generatedVideos"],o)}const r=a(t,["raiMediaFilteredCount"]);r!=null&&c(e,["raiMediaFilteredCount"],r);const i=a(t,["raiMediaFilteredReasons"]);return i!=null&&c(e,["raiMediaFilteredReasons"],i),e}function FR(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&c(e,["instances[0]","image"],ou(i));const o=a(t,["video"]);return e!==void 0&&o!=null&&c(e,["instances[0]","video"],xE(o)),n}function UR(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&c(e,["instances[0]","image"],Zt(i));const o=a(t,["video"]);return e!==void 0&&o!=null&&c(e,["instances[0]","video"],AE(o)),n}function OR(t){const e={},n=a(t,["_self"]);n!=null&&c(e,["image"],YR(n));const r=a(t,["raiFilteredReason"]);r!=null&&c(e,["raiFilteredReason"],r);const i=a(t,["_self"]);return i!=null&&c(e,["safetyAttributes"],IE(i)),e}function iu(t){const e={},n=a(t,["_self"]);n!=null&&c(e,["image"],TE(n));const r=a(t,["raiFilteredReason"]);r!=null&&c(e,["raiFilteredReason"],r);const i=a(t,["_self"]);i!=null&&c(e,["safetyAttributes"],wE(i));const o=a(t,["prompt"]);return o!=null&&c(e,["enhancedPrompt"],o),e}function GR(t){const e={},n=a(t,["_self"]);n!=null&&c(e,["mask"],TE(n));const r=a(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),c(e,["labels"],i)}return e}function BR(t){const e={},n=a(t,["video"]);return n!=null&&c(e,["video"],RN(n)),e}function qR(t){const e={},n=a(t,["_self"]);return n!=null&&c(e,["video"],NN(n)),e}function HR(t){const e={},n=a(t,["modelSelectionConfig"]);n!=null&&c(e,["modelConfig"],n);const r=a(t,["responseJsonSchema"]);r!=null&&c(e,["responseJsonSchema"],r);const i=a(t,["audioTimestamp"]);i!=null&&c(e,["audioTimestamp"],i);const o=a(t,["candidateCount"]);o!=null&&c(e,["candidateCount"],o);const s=a(t,["enableAffectiveDialog"]);s!=null&&c(e,["enableAffectiveDialog"],s);const l=a(t,["frequencyPenalty"]);l!=null&&c(e,["frequencyPenalty"],l);const u=a(t,["logprobs"]);u!=null&&c(e,["logprobs"],u);const f=a(t,["maxOutputTokens"]);f!=null&&c(e,["maxOutputTokens"],f);const h=a(t,["mediaResolution"]);h!=null&&c(e,["mediaResolution"],h);const p=a(t,["presencePenalty"]);p!=null&&c(e,["presencePenalty"],p);const m=a(t,["responseLogprobs"]);m!=null&&c(e,["responseLogprobs"],m);const v=a(t,["responseMimeType"]);v!=null&&c(e,["responseMimeType"],v);const P=a(t,["responseModalities"]);P!=null&&c(e,["responseModalities"],P);const k=a(t,["responseSchema"]);k!=null&&c(e,["responseSchema"],k);const L=a(t,["routingConfig"]);L!=null&&c(e,["routingConfig"],L);const A=a(t,["seed"]);A!=null&&c(e,["seed"],A);const T=a(t,["speechConfig"]);T!=null&&c(e,["speechConfig"],SE(T));const x=a(t,["stopSequences"]);x!=null&&c(e,["stopSequences"],x);const M=a(t,["temperature"]);M!=null&&c(e,["temperature"],M);const V=a(t,["thinkingConfig"]);V!=null&&c(e,["thinkingConfig"],V);const F=a(t,["topK"]);F!=null&&c(e,["topK"],F);const w=a(t,["topP"]);if(w!=null&&c(e,["topP"],w),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $R(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],fe(t,r)),n}function zR(t,e){const n={},r=a(e,["model"]);return r!=null&&c(n,["_url","name"],fe(t,r)),n}function WR(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function KR(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function JR(t){const e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);const r=a(t,["imageSize"]);if(r!=null&&c(e,["imageSize"],r),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function QR(t){const e={},n=a(t,["aspectRatio"]);n!=null&&c(e,["aspectRatio"],n);const r=a(t,["imageSize"]);r!=null&&c(e,["imageSize"],r);const i=a(t,["outputMimeType"]);i!=null&&c(e,["imageOutputOptions","mimeType"],i);const o=a(t,["outputCompressionQuality"]);return o!=null&&c(e,["imageOutputOptions","compressionQuality"],o),e}function YR(t){const e={},n=a(t,["bytesBase64Encoded"]);n!=null&&c(e,["imageBytes"],vr(n));const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function TE(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&c(e,["imageBytes"],vr(r));const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function ou(t){const e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=a(t,["imageBytes"]);n!=null&&c(e,["bytesBase64Encoded"],vr(n));const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function Zt(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["gcsUri"],n);const r=a(t,["imageBytes"]);r!=null&&c(e,["bytesBase64Encoded"],vr(r));const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function XR(t,e,n){const r={},i=a(e,["pageSize"]);n!==void 0&&i!=null&&c(n,["_query","pageSize"],i);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&c(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&c(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],hE(t,l)),r}function jR(t,e,n){const r={},i=a(e,["pageSize"]);n!==void 0&&i!=null&&c(n,["_query","pageSize"],i);const o=a(e,["pageToken"]);n!==void 0&&o!=null&&c(n,["_query","pageToken"],o);const s=a(e,["filter"]);n!==void 0&&s!=null&&c(n,["_query","filter"],s);const l=a(e,["queryBase"]);return n!==void 0&&l!=null&&c(n,["_url","models_url"],hE(t,l)),r}function ZR(t,e){const n={},r=a(e,["config"]);return r!=null&&XR(t,r,n),n}function eN(t,e){const n={},r=a(e,["config"]);return r!=null&&jR(t,r,n),n}function tN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["_self"]);if(i!=null){let o=pE(i);Array.isArray(o)&&(o=o.map(s=>Sd(s))),c(e,["models"],o)}return e}function nN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["_self"]);if(i!=null){let o=pE(i);Array.isArray(o)&&(o=o.map(s=>Cd(s))),c(e,["models"],o)}return e}function rN(t){const e={},n=a(t,["maskMode"]);n!=null&&c(e,["maskMode"],n);const r=a(t,["segmentationClasses"]);r!=null&&c(e,["maskClasses"],r);const i=a(t,["maskDilation"]);return i!=null&&c(e,["dilation"],i),e}function Sd(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["displayName"]);r!=null&&c(e,["displayName"],r);const i=a(t,["description"]);i!=null&&c(e,["description"],i);const o=a(t,["version"]);o!=null&&c(e,["version"],o);const s=a(t,["_self"]);s!=null&&c(e,["tunedModelInfo"],vN(s));const l=a(t,["inputTokenLimit"]);l!=null&&c(e,["inputTokenLimit"],l);const u=a(t,["outputTokenLimit"]);u!=null&&c(e,["outputTokenLimit"],u);const f=a(t,["supportedGenerationMethods"]);f!=null&&c(e,["supportedActions"],f);const h=a(t,["temperature"]);h!=null&&c(e,["temperature"],h);const p=a(t,["maxTemperature"]);p!=null&&c(e,["maxTemperature"],p);const m=a(t,["topP"]);m!=null&&c(e,["topP"],m);const v=a(t,["topK"]);v!=null&&c(e,["topK"],v);const P=a(t,["thinking"]);return P!=null&&c(e,["thinking"],P),e}function Cd(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["displayName"]);r!=null&&c(e,["displayName"],r);const i=a(t,["description"]);i!=null&&c(e,["description"],i);const o=a(t,["versionId"]);o!=null&&c(e,["version"],o);const s=a(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>gR(m))),c(e,["endpoints"],p)}const l=a(t,["labels"]);l!=null&&c(e,["labels"],l);const u=a(t,["_self"]);u!=null&&c(e,["tunedModelInfo"],EN(u));const f=a(t,["defaultCheckpointId"]);f!=null&&c(e,["defaultCheckpointId"],f);const h=a(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>m)),c(e,["checkpoints"],p)}return e}function iN(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],yR(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],_R(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],H1(u));const f=a(t,["text"]);f!=null&&c(e,["text"],f);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function oN(t){const e={},n=a(t,["productImage"]);return n!=null&&c(e,["image"],Zt(n)),e}function sN(t,e){const n={},r=a(t,["numberOfImages"]);e!==void 0&&r!=null&&c(e,["parameters","sampleCount"],r);const i=a(t,["baseSteps"]);e!==void 0&&i!=null&&c(e,["parameters","baseSteps"],i);const o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&c(e,["parameters","storageUri"],o);const s=a(t,["seed"]);e!==void 0&&s!=null&&c(e,["parameters","seed"],s);const l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&c(e,["parameters","safetySetting"],l);const u=a(t,["personGeneration"]);e!==void 0&&u!=null&&c(e,["parameters","personGeneration"],u);const f=a(t,["addWatermark"]);e!==void 0&&f!=null&&c(e,["parameters","addWatermark"],f);const h=a(t,["outputMimeType"]);e!==void 0&&h!=null&&c(e,["parameters","outputOptions","mimeType"],h);const p=a(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&c(e,["parameters","outputOptions","compressionQuality"],p);const m=a(t,["enhancePrompt"]);e!==void 0&&m!=null&&c(e,["parameters","enhancePrompt"],m);const v=a(t,["labels"]);return e!==void 0&&v!=null&&c(e,["labels"],v),n}function lN(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["source"]);i!=null&&uN(i,n);const o=a(e,["config"]);return o!=null&&sN(o,n),n}function aN(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>iu(i))),c(e,["generatedImages"],r)}return e}function uN(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const i=a(t,["personImage"]);e!==void 0&&i!=null&&c(e,["instances[0]","personImage","image"],Zt(i));const o=a(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>oN(l))),c(e,["instances[0]","productImages"],s)}return n}function cN(t){const e={},n=a(t,["referenceImage"]);n!=null&&c(e,["referenceImage"],Zt(n));const r=a(t,["referenceId"]);r!=null&&c(e,["referenceId"],r);const i=a(t,["referenceType"]);i!=null&&c(e,["referenceType"],i);const o=a(t,["maskImageConfig"]);o!=null&&c(e,["maskImageConfig"],rN(o));const s=a(t,["controlImageConfig"]);s!=null&&c(e,["controlImageConfig"],Y1(s));const l=a(t,["styleImageConfig"]);l!=null&&c(e,["styleImageConfig"],l);const u=a(t,["subjectImageConfig"]);return u!=null&&c(e,["subjectImageConfig"],u),e}function IE(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&c(e,["scores"],r);const i=a(t,["contentType"]);return i!=null&&c(e,["contentType"],i),e}function wE(t){const e={},n=a(t,["safetyAttributes","categories"]);n!=null&&c(e,["categories"],n);const r=a(t,["safetyAttributes","scores"]);r!=null&&c(e,["scores"],r);const i=a(t,["contentType"]);return i!=null&&c(e,["contentType"],i),e}function dN(t){const e={},n=a(t,["category"]);if(n!=null&&c(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=a(t,["threshold"]);return r!=null&&c(e,["threshold"],r),e}function fN(t){const e={},n=a(t,["image"]);return n!=null&&c(e,["image"],Zt(n)),e}function hN(t,e){const n={},r=a(t,["mode"]);e!==void 0&&r!=null&&c(e,["parameters","mode"],r);const i=a(t,["maxPredictions"]);e!==void 0&&i!=null&&c(e,["parameters","maxPredictions"],i);const o=a(t,["confidenceThreshold"]);e!==void 0&&o!=null&&c(e,["parameters","confidenceThreshold"],o);const s=a(t,["maskDilation"]);e!==void 0&&s!=null&&c(e,["parameters","maskDilation"],s);const l=a(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&c(e,["parameters","binaryColorThreshold"],l);const u=a(t,["labels"]);return e!==void 0&&u!=null&&c(e,["labels"],u),n}function pN(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["source"]);i!=null&&gN(i,n);const o=a(e,["config"]);return o!=null&&hN(o,n),n}function mN(t){const e={},n=a(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>GR(i))),c(e,["generatedMasks"],r)}return e}function gN(t,e){const n={},r=a(t,["prompt"]);e!==void 0&&r!=null&&c(e,["instances[0]","prompt"],r);const i=a(t,["image"]);e!==void 0&&i!=null&&c(e,["instances[0]","image"],Zt(i));const o=a(t,["scribbleImage"]);return e!==void 0&&o!=null&&c(e,["instances[0]","scribble"],fN(o)),n}function SE(t){const e={},n=a(t,["languageCode"]);n!=null&&c(e,["languageCode"],n);const r=a(t,["voiceConfig"]);if(r!=null&&c(e,["voiceConfig"],r),a(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function yN(t){const e={},n=a(t,["functionCallingConfig"]);n!=null&&c(e,["functionCallingConfig"],vR(n));const r=a(t,["retrievalConfig"]);return r!=null&&c(e,["retrievalConfig"],r),e}function _N(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const i=a(t,["computerUse"]);i!=null&&c(e,["computerUse"],i);const o=a(t,["fileSearch"]);o!=null&&c(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],WR(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],KR(u));const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}function CE(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>ER(m))),c(e,["functionDeclarations"],p)}const r=a(t,["retrieval"]);r!=null&&c(e,["retrieval"],r);const i=a(t,["googleSearchRetrieval"]);i!=null&&c(e,["googleSearchRetrieval"],i);const o=a(t,["computerUse"]);if(o!=null&&c(e,["computerUse"],o),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=a(t,["codeExecution"]);s!=null&&c(e,["codeExecution"],s);const l=a(t,["enterpriseWebSearch"]);l!=null&&c(e,["enterpriseWebSearch"],l);const u=a(t,["googleMaps"]);u!=null&&c(e,["googleMaps"],u);const f=a(t,["googleSearch"]);f!=null&&c(e,["googleSearch"],f);const h=a(t,["urlContext"]);return h!=null&&c(e,["urlContext"],h),e}function vN(t){const e={},n=a(t,["baseModel"]);n!=null&&c(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&c(e,["createTime"],r);const i=a(t,["updateTime"]);return i!=null&&c(e,["updateTime"],i),e}function EN(t){const e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&c(e,["baseModel"],n);const r=a(t,["createTime"]);r!=null&&c(e,["createTime"],r);const i=a(t,["updateTime"]);return i!=null&&c(e,["updateTime"],i),e}function TN(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);const i=a(t,["description"]);e!==void 0&&i!=null&&c(e,["description"],i);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&c(e,["defaultCheckpointId"],o),n}function IN(t,e){const n={},r=a(t,["displayName"]);e!==void 0&&r!=null&&c(e,["displayName"],r);const i=a(t,["description"]);e!==void 0&&i!=null&&c(e,["description"],i);const o=a(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&c(e,["defaultCheckpointId"],o),n}function wN(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","name"],fe(t,r));const i=a(e,["config"]);return i!=null&&TN(i,n),n}function SN(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["config"]);return i!=null&&IN(i,n),n}function CN(t,e){const n={},r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&c(e,["parameters","storageUri"],r);const i=a(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&c(e,["parameters","safetySetting"],i);const o=a(t,["personGeneration"]);e!==void 0&&o!=null&&c(e,["parameters","personGeneration"],o);const s=a(t,["includeRaiReason"]);e!==void 0&&s!=null&&c(e,["parameters","includeRaiReason"],s);const l=a(t,["outputMimeType"]);e!==void 0&&l!=null&&c(e,["parameters","outputOptions","mimeType"],l);const u=a(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&c(e,["parameters","outputOptions","compressionQuality"],u);const f=a(t,["enhanceInputImage"]);e!==void 0&&f!=null&&c(e,["parameters","upscaleConfig","enhanceInputImage"],f);const h=a(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&c(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const p=a(t,["labels"]);e!==void 0&&p!=null&&c(e,["labels"],p);const m=a(t,["numberOfImages"]);e!==void 0&&m!=null&&c(e,["parameters","sampleCount"],m);const v=a(t,["mode"]);return e!==void 0&&v!=null&&c(e,["parameters","mode"],v),n}function xN(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["_url","model"],fe(t,r));const i=a(e,["image"]);i!=null&&c(n,["instances[0]","image"],Zt(i));const o=a(e,["upscaleFactor"]);o!=null&&c(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=a(e,["config"]);return s!=null&&CN(s,n),n}function AN(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>iu(o))),c(e,["generatedImages"],i)}return e}function RN(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);const r=a(t,["encodedVideo"]);r!=null&&c(e,["videoBytes"],vr(r));const i=a(t,["encoding"]);return i!=null&&c(e,["mimeType"],i),e}function NN(t){const e={},n=a(t,["gcsUri"]);n!=null&&c(e,["uri"],n);const r=a(t,["bytesBase64Encoded"]);r!=null&&c(e,["videoBytes"],vr(r));const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}function PN(t){const e={},n=a(t,["image"]);n!=null&&c(e,["_self"],Zt(n));const r=a(t,["maskMode"]);return r!=null&&c(e,["maskMode"],r),e}function kN(t){const e={},n=a(t,["image"]);n!=null&&c(e,["image"],ou(n));const r=a(t,["referenceType"]);return r!=null&&c(e,["referenceType"],r),e}function DN(t){const e={},n=a(t,["image"]);n!=null&&c(e,["image"],Zt(n));const r=a(t,["referenceType"]);return r!=null&&c(e,["referenceType"],r),e}function xE(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["uri"],n);const r=a(t,["videoBytes"]);r!=null&&c(e,["encodedVideo"],vr(r));const i=a(t,["mimeType"]);return i!=null&&c(e,["encoding"],i),e}function AE(t){const e={},n=a(t,["uri"]);n!=null&&c(e,["gcsUri"],n);const r=a(t,["videoBytes"]);r!=null&&c(e,["bytesBase64Encoded"],vr(r));const i=a(t,["mimeType"]);return i!=null&&c(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MN="Content-Type",VN="X-Server-Timeout",LN="User-Agent",xd="x-goog-api-client",bN="1.30.0",FN=`google-genai-sdk/${bN}`,UN="v1beta1",ON="v1beta",my=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class GN{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:UN,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:ON,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))i.searchParams.append(s,String(l));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>o.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&BN(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await gy(i),new Td(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await gy(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Ni(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:l,value:u}=yield Ce(i.read());if(l){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(u,{stream:!0});try{const p=JSON.parse(f);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),v=m.status,P=m.code,k=`got status: ${v}. ${JSON.stringify(p)}`;if(P>=400&&P<600)throw new nu({message:k,status:P})}}catch(p){if(p.name==="ApiError")throw p}s+=f;let h=s.match(my);for(;h;){const p=h[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ce(new Td(m)),s=s.slice(h[0].length),h=s.match(my)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=FN+" "+this.clientOptions.userAgentExtra;return e[LN]=n,e[xd]=n,e[MN]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(VN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const u={file:i},f=this.getFileName(e),h=$("upload/v1beta/files",u._url),p=await this.fetchUploadUrl(h,i.sizeBytes,i.mimeType,f,u,n==null?void 0:n.httpOptions);return o.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),l=String(s.size),u=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),p={};r!=null&&r.customMetadata&&(p.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(p.chunkingConfig=r.chunkingConfig);const m=await this.fetchUploadUrl(f,l,u,h,p,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var l;let u={};s?u=s:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const f=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:u});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(l=f==null?void 0:f.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function gy(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new nu({message:i,status:n}):new Error(i)}}function BN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const l=Object.assign({},o);for(const u in s)if(Object.prototype.hasOwnProperty.call(s,u)){const f=s[u],h=l[u];f&&typeof f=="object"&&!Array.isArray(f)&&h&&typeof h=="object"&&!Array.isArray(h)?l[u]=r(h,f):(h&&f&&typeof h!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof h}, New type: ${typeof f}. Overwriting.`),l[u]=f)}return l}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qN="mcp_used/unknown";let HN=!1;function RE(t){for(const e of t)if($N(e)||typeof e=="object"&&"inputSchema"in e)return!0;return HN}function NE(t){var e;const n=(e=t[xd])!==null&&e!==void 0?e:"";t[xd]=(n+` ${qN}`).trimStart()}function $N(t){return t!==null&&typeof t=="object"&&t instanceof th}function zN(t,e=100){return Ni(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield Ce(t.listTools({cursor:r}));for(const s of o.tools)yield yield Ce(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class th{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new th(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var l=!0,u=(n=void 0,jo(zN(h))),f;f=await u.next(),e=f.done,!e;l=!0){i=f.value,l=!1;const p=i;s.push(p);const m=p.name;if(o[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);o[m]=h}}catch(p){n={error:p}}finally{try{!l&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),Fx(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function WN(t,e,n){const r=new Nx;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class KN{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=YN(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),u=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${l}`;let f=()=>{};const h=new Promise(x=>{f=x}),p=e.callbacks,m=function(){f({})},v=this.apiClient,P={onopen:m,onmessage:x=>{WN(v,p.onmessage,x)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(x){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(x){}},k=this.webSocketFactory.create(u,QN(s),P);k.connect(),await h;const T={setup:{model:fe(this.apiClient,e.model)}};return k.send(JSON.stringify(T)),new JN(k,this.apiClient)}}class JN{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=V1(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=M1(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ti.PLAY)}pause(){this.sendPlaybackControl(Ti.PAUSE)}stop(){this.sendPlaybackControl(Ti.STOP)}resetContext(){this.sendPlaybackControl(Ti.RESET_CONTEXT)}close(){this.conn.close()}}function QN(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function YN(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function jN(t,e,n){const r=new Rx;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=F1(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class ZN{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new KN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&RE(e.config.tools)&&NE(p);const m=rP(p);if(this.apiClient.isVertexAI())h=`${u}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,h);else{const C=this.apiClient.getApiKey();let R="BidiGenerateContent",S="key";C!=null&&C.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",S="access_token"),h=`${u}/ws/google.ai.generativelanguage.${f}.GenerativeService.${R}?${S}=${C}`}let v=()=>{};const P=new Promise(C=>{v=C}),k=e.callbacks,L=function(){var C;(C=k==null?void 0:k.onopen)===null||C===void 0||C.call(k),v({})},A=this.apiClient,T={onopen:L,onmessage:C=>{jN(A,k.onmessage,C)},onerror:(n=k==null?void 0:k.onerror)!==null&&n!==void 0?n:function(C){},onclose:(r=k==null?void 0:k.onclose)!==null&&r!==void 0?r:function(C){}},x=this.webSocketFactory.create(h,nP(m),T);x.connect(),await P;let M=fe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&M.startsWith("publishers/")){const C=this.apiClient.getProject(),R=this.apiClient.getLocation();M=`projects/${C}/locations/${R}/`+M}let V={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ia.AUDIO]}:e.config.responseModalities=[Ia.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],w=[];for(const C of F)if(this.isCallableTool(C)){const R=C;w.push(await R.tool())}else w.push(C);w.length>0&&(e.config.tools=w);const E={model:M,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?V=D1(this.apiClient,E):V=k1(this.apiClient,E),delete V.config,x.send(JSON.stringify(V)),new tP(x,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const eP={turnComplete:!0};class tP{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Ot(n.turns),e.isVertexAI()||(r=r.map(i=>ru(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(XN)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},eP),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:b1(e)}:n={realtimeInput:L1(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function nP(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function rP(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yy=10;function _y(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Pi(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Pi(t){return"callTool"in t&&typeof t.callTool=="function"}function iP(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Pi(i)))!==null&&r!==void 0?r:!1}function vy(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(Pi(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function Ey(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oP extends kn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,l;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!iP(n)||_y(n.config))return await this.generateContentInternal(u);const f=vy(n);if(f.length>0){const k=f.map(L=>`tools[${L}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let h,p;const m=Ot(u.contents),v=(o=(i=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:yy;let P=0;for(;P<v&&(h=await this.generateContentInternal(u),!(!h.functionCalls||h.functionCalls.length===0));){const k=h.candidates[0].content,L=[];for(const A of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(Pi(A)){const x=await A.callTool(h.functionCalls);L.push(...x)}P++,p={role:"user",parts:L},u.contents=Ot(u.contents),u.contents.push(k),u.contents.push(p),Ey(u.config)&&(m.push(k),m.push(p))}return Ey(u.config)&&(h.automaticFunctionCallingHistory=m),h},this.generateContentStream=async n=>{var r,i,o,s,l;if(this.maybeMoveToResponseJsonSchem(n),_y(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const u=vy(n);if(u.length>0){const p=u.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,h=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(f&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((i=u==null?void 0:u.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=u==null?void 0:u.safetyAttributes:s.push(u);let l;return o?l={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Jr(Cn.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,l,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((u=(l=n.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async u=>Pi(u)?await u.tool():u)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&RE(e.config.tools)){const u=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let f=Object.assign({},u);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),NE(f),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return l}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Pi(s)){const l=s,u=await l.tool();for(const f of(i=u.functionDeclarations)!==null&&i!==void 0?i:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,l)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:yy;let s=!1,l=0;const u=await this.initAfcToolsMap(e);return function(f,h,p){var m,v;return Ni(this,arguments,function*(){for(var P,k,L,A;l<o;){s&&(l++,s=!1);const V=yield Ce(f.processParamsMaybeAddMcpUsage(p)),F=yield Ce(f.generateContentStreamInternal(V)),w=[],E=[];try{for(var T=!0,x=(k=void 0,jo(F)),M;M=yield Ce(x.next()),P=M.done,!P;T=!0){A=M.value,T=!1;const C=A;if(yield yield Ce(C),C.candidates&&(!((m=C.candidates[0])===null||m===void 0)&&m.content)){E.push(C.candidates[0].content);for(const R of(v=C.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(l<o&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(R.functionCall.name)){const S=yield Ce(h.get(R.functionCall.name).callTool([R.functionCall]));w.push(...S)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(C){k={error:C}}finally{try{!T&&!P&&(L=x.return)&&(yield Ce(L.call(x)))}finally{if(k)throw k.error}}if(w.length>0){s=!0;const C=new ko;C.candidates=[{content:{role:"user",parts:w}}],yield yield Ce(C);const R=[];R.push(...E),R.push({role:"user",parts:w});const S=Ot(p.contents).concat(R);p.contents=S}else break}})}(this,u,e)}async generateContentInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=fy(this.apiClient,e);return l=$("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=py(h),m=new ko;return Object.assign(m,p),m})}else{const f=dy(this.apiClient,e);return l=$("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=hy(h),m=new ko;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=fy(this.apiClient,e);return l=$("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return Ni(this,arguments,function*(){var m,v,P,k;try{for(var L=!0,A=jo(p),T;T=yield Ce(A.next()),m=T.done,!m;L=!0){k=T.value,L=!1;const x=k,M=py(yield Ce(x.json()));M.sdkHttpResponse={headers:x.headers};const V=new ko;Object.assign(V,M),yield yield Ce(V)}}catch(x){v={error:x}}finally{try{!L&&!m&&(P=A.return)&&(yield Ce(P.call(A)))}finally{if(v)throw v.error}}})})}else{const f=dy(this.apiClient,e);return l=$("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.requestStream({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return Ni(this,arguments,function*(){var m,v,P,k;try{for(var L=!0,A=jo(p),T;T=yield Ce(A.next()),m=T.done,!m;L=!0){k=T.value,L=!1;const x=k,M=hy(yield Ce(x.json()));M.sdkHttpResponse={headers:x.headers};const V=new ko;Object.assign(V,M),yield yield Ce(V)}}catch(x){v={error:x}}finally{try{!L&&!m&&(P=A.return)&&(yield Ce(P.call(A)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=hR(this.apiClient,e);return l=$("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=mR(h),m=new Qg;return Object.assign(m,p),m})}else{const f=fR(this.apiClient,e);return l=$("{model}:batchEmbedContents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=pR(h),m=new Qg;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=xR(this.apiClient,e);return l=$("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=RR(h),m=new Yg;return Object.assign(m,p),m})}else{const f=CR(this.apiClient,e);return l=$("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=AR(h),m=new Yg;return Object.assign(m,p),m})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=aR(this.apiClient,e);return o=$("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const f=uR(u),h=new yx;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=xN(this.apiClient,e);return o=$("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const f=AN(u),h=new _x;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=lN(this.apiClient,e);return o=$("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=aN(u),h=new vx;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=pN(this.apiClient,e);return o=$("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=mN(u),h=new Ex;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=zR(this.apiClient,e);return l=$("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Cd(h))}else{const f=$R(this.apiClient,e);return l=$("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Sd(h))}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=eN(this.apiClient,e);return l=$("{models_url}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=nN(h),m=new Xg;return Object.assign(m,p),m})}else{const f=ZR(this.apiClient,e);return l=$("{models_url}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=tN(h),m=new Xg;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=SN(this.apiClient,e);return l=$("{model}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Cd(h))}else{const f=wN(this.apiClient,e);return l=$("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Sd(h))}}async delete(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=iR(this.apiClient,e);return l=$("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=sR(h),m=new jg;return Object.assign(m,p),m})}else{const f=rR(this.apiClient,e);return l=$("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=oR(h),m=new jg;return Object.assign(m,p),m})}}async countTokens(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=eR(this.apiClient,e);return l=$("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=nR(h),m=new Zg;return Object.assign(m,p),m})}else{const f=Z1(this.apiClient,e);return l=$("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=tR(h),m=new Zg;return Object.assign(m,p),m})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=W1(this.apiClient,e);return o=$("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>{const f=K1(u),h=new Tx;return Object.assign(h,f),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=VR(this.apiClient,e);return l=$("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const p=DR(h),m=new wa;return Object.assign(m,p),m})}else{const f=MR(this.apiClient,e);return l=$("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const p=kR(h),m=new wa;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sP extends kn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=dx(e);return l=$("{operationName}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const f=cx(e);return l=$("{operationName}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=rx(e);return o=$("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lP(t){const e={},n=a(t,["data"]);if(n!=null&&c(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function aP(t){const e={},n=a(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>yP(o))),c(e,["parts"],i)}const r=a(t,["role"]);return r!=null&&c(e,["role"],r),e}function uP(t,e,n){const r={},i=a(e,["expireTime"]);n!==void 0&&i!=null&&c(n,["expireTime"],i);const o=a(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&c(n,["newSessionExpireTime"],o);const s=a(e,["uses"]);n!==void 0&&s!=null&&c(n,["uses"],s);const l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&c(n,["bidiGenerateContentSetup"],gP(t,l));const u=a(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&c(n,["fieldMask"],u),r}function cP(t,e){const n={},r=a(e,["config"]);return r!=null&&c(n,["config"],uP(t,r,n)),n}function dP(t){const e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=a(t,["fileUri"]);n!=null&&c(e,["fileUri"],n);const r=a(t,["mimeType"]);return r!=null&&c(e,["mimeType"],r),e}function fP(t){const e={},n=a(t,["id"]);n!=null&&c(e,["id"],n);const r=a(t,["args"]);r!=null&&c(e,["args"],r);const i=a(t,["name"]);if(i!=null&&c(e,["name"],i),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hP(t){const e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=a(t,["enableWidget"]);return n!=null&&c(e,["enableWidget"],n),e}function pP(t){const e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=a(t,["timeRangeFilter"]);return n!=null&&c(e,["timeRangeFilter"],n),e}function mP(t,e){const n={},r=a(t,["generationConfig"]);e!==void 0&&r!=null&&c(e,["setup","generationConfig"],r);const i=a(t,["responseModalities"]);e!==void 0&&i!=null&&c(e,["setup","generationConfig","responseModalities"],i);const o=a(t,["temperature"]);e!==void 0&&o!=null&&c(e,["setup","generationConfig","temperature"],o);const s=a(t,["topP"]);e!==void 0&&s!=null&&c(e,["setup","generationConfig","topP"],s);const l=a(t,["topK"]);e!==void 0&&l!=null&&c(e,["setup","generationConfig","topK"],l);const u=a(t,["maxOutputTokens"]);e!==void 0&&u!=null&&c(e,["setup","generationConfig","maxOutputTokens"],u);const f=a(t,["mediaResolution"]);e!==void 0&&f!=null&&c(e,["setup","generationConfig","mediaResolution"],f);const h=a(t,["seed"]);e!==void 0&&h!=null&&c(e,["setup","generationConfig","seed"],h);const p=a(t,["speechConfig"]);e!==void 0&&p!=null&&c(e,["setup","generationConfig","speechConfig"],eh(p));const m=a(t,["thinkingConfig"]);e!==void 0&&m!=null&&c(e,["setup","generationConfig","thinkingConfig"],m);const v=a(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&c(e,["setup","generationConfig","enableAffectiveDialog"],v);const P=a(t,["systemInstruction"]);e!==void 0&&P!=null&&c(e,["setup","systemInstruction"],aP(ct(P)));const k=a(t,["tools"]);if(e!==void 0&&k!=null){let F=ji(k);Array.isArray(F)&&(F=F.map(w=>vP(Xi(w)))),c(e,["setup","tools"],F)}const L=a(t,["sessionResumption"]);e!==void 0&&L!=null&&c(e,["setup","sessionResumption"],_P(L));const A=a(t,["inputAudioTranscription"]);e!==void 0&&A!=null&&c(e,["setup","inputAudioTranscription"],A);const T=a(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&c(e,["setup","outputAudioTranscription"],T);const x=a(t,["realtimeInputConfig"]);e!==void 0&&x!=null&&c(e,["setup","realtimeInputConfig"],x);const M=a(t,["contextWindowCompression"]);e!==void 0&&M!=null&&c(e,["setup","contextWindowCompression"],M);const V=a(t,["proactivity"]);return e!==void 0&&V!=null&&c(e,["setup","proactivity"],V),n}function gP(t,e){const n={},r=a(e,["model"]);r!=null&&c(n,["setup","model"],fe(t,r));const i=a(e,["config"]);return i!=null&&c(n,["config"],mP(i,n)),n}function yP(t){const e={},n=a(t,["mediaResolution"]);n!=null&&c(e,["mediaResolution"],n);const r=a(t,["codeExecutionResult"]);r!=null&&c(e,["codeExecutionResult"],r);const i=a(t,["executableCode"]);i!=null&&c(e,["executableCode"],i);const o=a(t,["fileData"]);o!=null&&c(e,["fileData"],dP(o));const s=a(t,["functionCall"]);s!=null&&c(e,["functionCall"],fP(s));const l=a(t,["functionResponse"]);l!=null&&c(e,["functionResponse"],l);const u=a(t,["inlineData"]);u!=null&&c(e,["inlineData"],lP(u));const f=a(t,["text"]);f!=null&&c(e,["text"],f);const h=a(t,["thought"]);h!=null&&c(e,["thought"],h);const p=a(t,["thoughtSignature"]);p!=null&&c(e,["thoughtSignature"],p);const m=a(t,["videoMetadata"]);return m!=null&&c(e,["videoMetadata"],m),e}function _P(t){const e={},n=a(t,["handle"]);if(n!=null&&c(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function vP(t){const e={},n=a(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),c(e,["functionDeclarations"],h)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=a(t,["googleSearchRetrieval"]);r!=null&&c(e,["googleSearchRetrieval"],r);const i=a(t,["computerUse"]);i!=null&&c(e,["computerUse"],i);const o=a(t,["fileSearch"]);o!=null&&c(e,["fileSearch"],o);const s=a(t,["codeExecution"]);if(s!=null&&c(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=a(t,["googleMaps"]);l!=null&&c(e,["googleMaps"],hP(l));const u=a(t,["googleSearch"]);u!=null&&c(e,["googleSearch"],pP(u));const f=a(t,["urlContext"]);return f!=null&&c(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EP(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function TP(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=EP(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];i.length>0&&(l=i.map(f=>s.includes(f)?`generationConfig.${f}`:f));const u=[];o&&u.push(o),l.length>0&&u.push(...l),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class IP extends kn{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=cP(this.apiClient,e);o=$("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const u=TP(l,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wP(t,e){const n={},r=a(t,["displayName"]);return e!==void 0&&r!=null&&c(e,["displayName"],r),n}function SP(t){const e={},n=a(t,["config"]);return n!=null&&wP(n,e),e}function CP(t,e){const n={},r=a(t,["force"]);return e!==void 0&&r!=null&&c(e,["_query","force"],r),n}function xP(t){const e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&CP(r,e),e}function AP(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function RP(t,e){const n={},r=a(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["customMetadata"],o)}const i=a(t,["chunkingConfig"]);return e!==void 0&&i!=null&&c(e,["chunkingConfig"],i),n}function NP(t){const e={},n=a(t,["name"]);n!=null&&c(e,["name"],n);const r=a(t,["metadata"]);r!=null&&c(e,["metadata"],r);const i=a(t,["done"]);i!=null&&c(e,["done"],i);const o=a(t,["error"]);o!=null&&c(e,["error"],o);const s=a(t,["response"]);return s!=null&&c(e,["response"],kP(s)),e}function PP(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);const r=a(t,["fileName"]);r!=null&&c(e,["fileName"],r);const i=a(t,["config"]);return i!=null&&RP(i,e),e}function kP(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["parent"]);r!=null&&c(e,["parent"],r);const i=a(t,["documentName"]);return i!=null&&c(e,["documentName"],i),e}function DP(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function MP(t){const e={},n=a(t,["config"]);return n!=null&&DP(n,e),e}function VP(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["fileSearchStores"],o)}return e}function LP(t,e){const n={},r=a(t,["mimeType"]);e!==void 0&&r!=null&&c(e,["mimeType"],r);const i=a(t,["displayName"]);e!==void 0&&i!=null&&c(e,["displayName"],i);const o=a(t,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(u=>u)),c(e,["customMetadata"],l)}const s=a(t,["chunkingConfig"]);return e!==void 0&&s!=null&&c(e,["chunkingConfig"],s),n}function bP(t){const e={},n=a(t,["fileSearchStoreName"]);n!=null&&c(e,["_url","file_search_store_name"],n);const r=a(t,["config"]);return r!=null&&LP(r,e),e}function FP(t){const e={},n=a(t,["sdkHttpResponse"]);return n!=null&&c(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UP(t,e){const n={},r=a(t,["force"]);return e!==void 0&&r!=null&&c(e,["_query","force"],r),n}function OP(t){const e={},n=a(t,["name"]);n!=null&&c(e,["_url","name"],n);const r=a(t,["config"]);return r!=null&&UP(r,e),e}function GP(t){const e={},n=a(t,["name"]);return n!=null&&c(e,["_url","name"],n),e}function BP(t,e){const n={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&c(e,["_query","pageSize"],r);const i=a(t,["pageToken"]);return e!==void 0&&i!=null&&c(e,["_query","pageToken"],i),n}function qP(t){const e={},n=a(t,["parent"]);n!=null&&c(e,["_url","parent"],n);const r=a(t,["config"]);return r!=null&&BP(r,e),e}function HP(t){const e={},n=a(t,["sdkHttpResponse"]);n!=null&&c(e,["sdkHttpResponse"],n);const r=a(t,["nextPageToken"]);r!=null&&c(e,["nextPageToken"],r);const i=a(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),c(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $P extends kn{constructor(e){super(),this.apiClient=e,this.list=async n=>new Jr(Cn.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=GP(e);return o=$("{name}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=OP(e);i=$("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=qP(e);return o=$("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=HP(u),h=new Ix;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zP extends kn{constructor(e,n=new $P(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Jr(Cn.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=SP(e);return o=$("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=AP(e);return o=$("{name}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=xP(e);i=$("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=MP(e);return o=$("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=VP(u),h=new wx;return Object.assign(h,f),h})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=bP(e);return o=$("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=FP(u),h=new Sx;return Object.assign(h,f),h})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=PP(e);return o=$("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>{const f=NP(u),h=new Qf;return Object.assign(h,f),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WP(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function KP(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function JP(t,e,n){const r={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=a(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&c(e,["displayName"],i),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=a(t,["epochCount"]);e!==void 0&&o!=null&&c(e,["tuningTask","hyperparameters","epochCount"],o);const s=a(t,["learningRateMultiplier"]);if(s!=null&&c(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=a(t,["batchSize"]);e!==void 0&&l!=null&&c(e,["tuningTask","hyperparameters","batchSize"],l);const u=a(t,["learningRate"]);if(e!==void 0&&u!=null&&c(e,["tuningTask","hyperparameters","learningRate"],u),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function QP(t,e,n){const r={};let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const v=a(t,["validationDataset"]);e!==void 0&&v!=null&&c(e,["supervisedTuningSpec"],Ty(v))}else if(i==="PREFERENCE_TUNING"){const v=a(t,["validationDataset"]);e!==void 0&&v!=null&&c(e,["preferenceOptimizationSpec"],Ty(v))}const o=a(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&c(e,["tunedModelDisplayName"],o);const s=a(t,["description"]);e!==void 0&&s!=null&&c(e,["description"],s);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const v=a(t,["epochCount"]);e!==void 0&&v!=null&&c(e,["supervisedTuningSpec","hyperParameters","epochCount"],v)}else if(l==="PREFERENCE_TUNING"){const v=a(t,["epochCount"]);e!==void 0&&v!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],v)}let u=a(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const v=a(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&c(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],v)}else if(u==="PREFERENCE_TUNING"){const v=a(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],v)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const v=a(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&c(e,["supervisedTuningSpec","exportLastCheckpointOnly"],v)}else if(f==="PREFERENCE_TUNING"){const v=a(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&c(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],v)}let h=a(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const v=a(t,["adapterSize"]);e!==void 0&&v!=null&&c(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v)}else if(h==="PREFERENCE_TUNING"){const v=a(t,["adapterSize"]);e!==void 0&&v!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],v)}if(a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=a(t,["labels"]);e!==void 0&&p!=null&&c(e,["labels"],p);const m=a(t,["beta"]);return e!==void 0&&m!=null&&c(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function YP(t,e){const n={},r=a(t,["baseModel"]);r!=null&&c(n,["baseModel"],r);const i=a(t,["preTunedModel"]);i!=null&&c(n,["preTunedModel"],i);const o=a(t,["trainingDataset"]);o!=null&&l2(o);const s=a(t,["config"]);return s!=null&&JP(s,n),n}function XP(t,e){const n={},r=a(t,["baseModel"]);r!=null&&c(n,["baseModel"],r);const i=a(t,["preTunedModel"]);i!=null&&c(n,["preTunedModel"],i);const o=a(t,["trainingDataset"]);o!=null&&a2(o,n,e);const s=a(t,["config"]);return s!=null&&QP(s,n,e),n}function jP(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function ZP(t,e){const n={},r=a(t,["name"]);return r!=null&&c(n,["_url","name"],r),n}function e2(t,e,n){const r={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&c(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),r}function t2(t,e,n){const r={},i=a(t,["pageSize"]);e!==void 0&&i!=null&&c(e,["_query","pageSize"],i);const o=a(t,["pageToken"]);e!==void 0&&o!=null&&c(e,["_query","pageToken"],o);const s=a(t,["filter"]);return e!==void 0&&s!=null&&c(e,["_query","filter"],s),r}function n2(t,e){const n={},r=a(t,["config"]);return r!=null&&e2(r,n),n}function r2(t,e){const n={},r=a(t,["config"]);return r!=null&&t2(r,n),n}function i2(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const o=a(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>PE(l))),c(n,["tuningJobs"],s)}return n}function o2(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["nextPageToken"]);i!=null&&c(n,["nextPageToken"],i);const o=a(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>Ad(l))),c(n,["tuningJobs"],s)}return n}function s2(t,e){const n={},r=a(t,["name"]);r!=null&&c(n,["model"],r);const i=a(t,["name"]);return i!=null&&c(n,["endpoint"],i),n}function l2(t,e){const n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=a(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),c(n,["examples","examples"],i)}return n}function a2(t,e,n){const r={};let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=a(t,["gcsUri"]);e!==void 0&&s!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=a(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&c(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function PE(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["name"]);i!=null&&c(n,["name"],i);const o=a(t,["state"]);o!=null&&c(n,["state"],dE(o));const s=a(t,["createTime"]);s!=null&&c(n,["createTime"],s);const l=a(t,["tuningTask","startTime"]);l!=null&&c(n,["startTime"],l);const u=a(t,["tuningTask","completeTime"]);u!=null&&c(n,["endTime"],u);const f=a(t,["updateTime"]);f!=null&&c(n,["updateTime"],f);const h=a(t,["description"]);h!=null&&c(n,["description"],h);const p=a(t,["baseModel"]);p!=null&&c(n,["baseModel"],p);const m=a(t,["_self"]);return m!=null&&c(n,["tunedModel"],s2(m)),n}function Ad(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["name"]);i!=null&&c(n,["name"],i);const o=a(t,["state"]);o!=null&&c(n,["state"],dE(o));const s=a(t,["createTime"]);s!=null&&c(n,["createTime"],s);const l=a(t,["startTime"]);l!=null&&c(n,["startTime"],l);const u=a(t,["endTime"]);u!=null&&c(n,["endTime"],u);const f=a(t,["updateTime"]);f!=null&&c(n,["updateTime"],f);const h=a(t,["error"]);h!=null&&c(n,["error"],h);const p=a(t,["description"]);p!=null&&c(n,["description"],p);const m=a(t,["baseModel"]);m!=null&&c(n,["baseModel"],m);const v=a(t,["tunedModel"]);v!=null&&c(n,["tunedModel"],v);const P=a(t,["preTunedModel"]);P!=null&&c(n,["preTunedModel"],P);const k=a(t,["supervisedTuningSpec"]);k!=null&&c(n,["supervisedTuningSpec"],k);const L=a(t,["preferenceOptimizationSpec"]);L!=null&&c(n,["preferenceOptimizationSpec"],L);const A=a(t,["tuningDataStats"]);A!=null&&c(n,["tuningDataStats"],A);const T=a(t,["encryptionSpec"]);T!=null&&c(n,["encryptionSpec"],T);const x=a(t,["partnerModelTuningSpec"]);x!=null&&c(n,["partnerModelTuningSpec"],x);const M=a(t,["customBaseModel"]);M!=null&&c(n,["customBaseModel"],M);const V=a(t,["experiment"]);V!=null&&c(n,["experiment"],V);const F=a(t,["labels"]);F!=null&&c(n,["labels"],F);const w=a(t,["outputUri"]);w!=null&&c(n,["outputUri"],w);const E=a(t,["pipelineJob"]);E!=null&&c(n,["pipelineJob"],E);const C=a(t,["serviceAccount"]);C!=null&&c(n,["serviceAccount"],C);const R=a(t,["tunedModelDisplayName"]);R!=null&&c(n,["tunedModelDisplayName"],R);const S=a(t,["veoTuningSpec"]);return S!=null&&c(n,["veoTuningSpec"],S),n}function u2(t,e){const n={},r=a(t,["sdkHttpResponse"]);r!=null&&c(n,["sdkHttpResponse"],r);const i=a(t,["name"]);i!=null&&c(n,["name"],i);const o=a(t,["metadata"]);o!=null&&c(n,["metadata"],o);const s=a(t,["done"]);s!=null&&c(n,["done"],s);const l=a(t,["error"]);return l!=null&&c(n,["error"],l),n}function Ty(t,e){const n={},r=a(t,["gcsUri"]);r!=null&&c(n,["validationDatasetUri"],r);const i=a(t,["vertexDatasetResource"]);return i!=null&&c(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c2 extends kn{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Jr(Cn.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:Ed.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=ZP(e);return l=$("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>Ad(h))}else{const f=jP(e);return l=$("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>PE(h))}}async listInternal(e){var n,r,i,o;let s,l="",u={};if(this.apiClient.isVertexAI()){const f=r2(e);return l=$("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=o2(h),m=new ey;return Object.assign(m,p),m})}else{const f=n2(e);return l=$("tunedModels",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=i2(h),m=new ey;return Object.assign(m,p),m})}}async cancel(e){var n,r,i,o;let s="",l={};if(this.apiClient.isVertexAI()){const u=KP(e);s=$("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=WP(e);s=$("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const l=XP(e,e);return o=$("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>Ad(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=YP(e);return o=$("tunedModels",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const h=f;return h.sdkHttpResponse={headers:u.headers},h})),i.then(u=>u2(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d2{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const f2=1024*1024*8,h2=3,p2=1e3,m2=2,Ca="x-goog-upload-status";async function g2(t,e,n){var r;const i=await kE(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Ca])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function y2(t,e,n){var r;const i=await kE(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Ca])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=oE(o),l=new Yf;return Object.assign(l,s),l}async function kE(t,e,n){var r,i;let o=0,s=0,l=new Td(new Response),u="upload";for(o=t.size;s<o;){const f=Math.min(f2,o-s),h=t.slice(s,s+f);s+f>=o&&(u+=", finalize");let p=0,m=p2;for(;p<h2&&(l=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(s),"Content-Length":String(f)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[Ca]));)p++,await v2(m),m=m*m2;if(s+=f,((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[Ca])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function _2(t){return{size:t.size,type:t.type}}function v2(t){return new Promise(e=>setTimeout(e,t))}class E2{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await g2(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await y2(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _2(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T2{create(e,n,r){return new I2(e,n,r)}}class I2{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Iy="x-goog-api-key";class w2{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Iy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Iy,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S2="gl-node/";class C2{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=tx(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new w2(this.apiKey);this.apiClient=new GN({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:S2+"web",uploader:new E2,downloader:new d2}),this.models=new oP(this.apiClient),this.live=new ZN(this.apiClient,i,new T2),this.batches=new PA(this.apiClient),this.chats=new d1(this.models,this.apiClient),this.caches=new a1(this.apiClient),this.files=new T1(this.apiClient),this.operations=new sP(this.apiClient),this.authTokens=new IP(this.apiClient),this.tunings=new c2(this.apiClient),this.fileSearchStores=new zP(this.apiClient)}}const on=[{id:"draftTask",name:"   (Smart Draft)",description:"    , ,   3     .",model:"gemini-pro",tags:["Creation","Drafting"],promptGenerator:t=>`
       IT    PM(Project Manager).
        (Rough)   ,       "  "  3  .

      [ ]
      "${t}"
      
      [ ]
       3     :
      1. "(Standard)":    .
      2. "(Detailed)": ,  ,      .
      3. "(Concise)":       .

           :
      - title:    ()
      - description: (//)    (,  )
      - priority: 'HIGH', 'MEDIUM', 'LOW'  1
      - product:  
      - type:   (, , UX )
      - styleTag: "", "", ""  

       JSON (Array) .
    `},{id:"analyzeTask",name:"  (Strategy Analysis)",description:"   ,       .",model:"gemini-pro",tags:["Analysis","Strategy"],promptGenerator:t=>`
           .
          **     (Context)** **  ** .

      [ ]
      : ${t.title}
      : ${t.product}
      : ${t.description}
      
      [ ]
      1. strategy      :
         -  **  **:        ,  ,   . (1   )
         -  **  **:  Action Item  .
         -  ** **:     .
         -  ** **:      .
      
      2. suggestedResources      (,  ) 2 .
      
        "" .
    `},{id:"generateSubtasks",name:"   (Subtask Breakdown)",description:"      (4~6)  .",model:"gemini-pro",tags:["Planning","Breakdown"],promptGenerator:t=>`
        4-6    ( ) .
      : ${t.title}
      : ${t.description}
        JSON .
    `},{id:"generateAcceptanceCriteria",name:"   (DoD Generator)",description:"QA         (DoD) .",model:"gemini-pro",tags:["QA","Validation"],promptGenerator:t=>`
        QA    ' (Acceptance Criteria)'    .
      
      [ ]
      : ${t.title}
      : ${t.description}
      
         (JSON Array of strings) .
    `},{id:"generateSolutionDraft",name:"   (Solution Draft)",description:"     ,       .",model:"gemini-pro",tags:["Engineering","Solution"],promptGenerator:t=>`
        .          .
        (Code Snippet)   .
      
      [ ]
      : ${t.title}
      : ${t.description}
       : React, TypeScript, Tailwind CSS
      
         .
    `},{id:"recommendResources",name:"   (Resource Recommender)",description:"      , ,   .",model:"gemini-pro",tags:["Learning","Research"],promptGenerator:t=>`
           ( ,  , ) 3 .
      
      [ ]
      : ${t.title}
      : ${t.description}
      
          JSON  :
      - title:  
      - url:  (  URL      URL)
      - description:   (  )
    `},{id:"chatGuideSystem",name:"AI   ",description:"      AI   .",model:"gemini-pro",tags:["Chat","System"],promptGenerator:t=>`System:      . : ${t.title}, : ${t.description}.   .`},{id:"generateInsights",name:"   (Team Insights)",description:"    KPI       .",model:"gemini-pro",tags:["Analytics","Reporting"],promptGenerator:(t,e)=>`
            AI .
          ,    **  ** 2~3  .

      []
      -   : ${e.total}
      - : ${e.completionRate}%
      -   : ${e.inProgress}
      -   : ${e.overdue}
      -    : ${e.busiestMember}
      
      [ ]
      1.   ** **   (:  ,  ).
      2. **  ** ****(:   ,  )  .
      3.  ** **  .
      4.     .
      5.  JSON  ** (String)** .
    `}],Qr={draftTask:on.find(t=>t.id==="draftTask").promptGenerator,analyzeTask:on.find(t=>t.id==="analyzeTask").promptGenerator,generateSubtasks:on.find(t=>t.id==="generateSubtasks").promptGenerator,generateAcceptanceCriteria:on.find(t=>t.id==="generateAcceptanceCriteria").promptGenerator,generateSolutionDraft:on.find(t=>t.id==="generateSolutionDraft").promptGenerator,recommendResources:on.find(t=>t.id==="recommendResources").promptGenerator,chatGuideSystem:on.find(t=>t.id==="chatGuideSystem").promptGenerator,generateInsights:on.find(t=>t.id==="generateInsights").promptGenerator},bs=new C2({apiKey:"AIzaSyCZ3YGOA6swA85bqI3sZbIozLc9i2s7wHY"});async function su(t,e){try{const n=await bs.models.generateContent({model:Ls.MODEL_FAST,contents:t,config:{responseMimeType:"application/json",responseSchema:e}});return n.text?JSON.parse(n.text):null}catch(n){throw console.error("Gemini JSON Gen Error:",n),n}}const x2=async t=>{const e=Qr.draftTask(t),n={type:ve.ARRAY,items:{type:ve.OBJECT,properties:{title:{type:ve.STRING},description:{type:ve.STRING},priority:{type:ve.STRING,enum:["HIGH","MEDIUM","LOW"]},product:{type:ve.STRING},type:{type:ve.STRING},styleTag:{type:ve.STRING}}}},r=await su(e,n);if(!r||!Array.isArray(r))throw new Error("Draft generation failed");return r.map(i=>{let o=_e.MEDIUM;return i.priority==="HIGH"&&(o=_e.HIGH),i.priority==="LOW"&&(o=_e.LOW),{title:i.title,description:i.description,product:i.product,type:i.type,priority:o,styleTag:i.styleTag}})},A2=async t=>{const e=Qr.generateSubtasks(t),n={type:ve.ARRAY,items:{type:ve.OBJECT,properties:{title:{type:ve.STRING}}}};return await su(e,n)||[]},R2=async t=>{const e=Qr.generateAcceptanceCriteria(t),n={type:ve.ARRAY,items:{type:ve.STRING}},r=await su(e,n);return r?r.map((i,o)=>({id:`ac-${Date.now()}-${o}`,content:i,checked:!1})):[]},N2=async t=>{const e=Qr.generateSolutionDraft(t);return(await bs.models.generateContent({model:Ls.MODEL_SMART,contents:e})).text||""},P2=async t=>{const e=Qr.recommendResources(t),n={type:ve.ARRAY,items:{type:ve.OBJECT,properties:{title:{type:ve.STRING},url:{type:ve.STRING},description:{type:ve.STRING}}}};return await su(e,n)||[]},k2=async(t,e,n)=>(await bs.chats.create({model:Ls.MODEL_SMART,history:[{role:"user",parts:[{text:Qr.chatGuideSystem(n)}]},{role:"model",parts:[{text:", .   ."}]},...t]}).sendMessage({message:e})).text,D2=async(t,e,n=Ls.MODEL_SMART,r,i)=>{const o=bs.chats.create({model:n,history:[{role:"user",parts:[{text:" Nexus AI    Gemini.    ,   ,    .  ."}]},{role:"model",parts:[{text:"! Nexus AI Gemini.  ?"}]},...t]}),s=[];return r&&i&&s.push({inlineData:{data:r,mimeType:i}}),e&&s.push({text:e}),await o.sendMessageStream({message:s})},M2=async(t,e)=>{const n=Qr.generateInsights(t,e);try{return(await bs.models.generateContent({model:Ls.MODEL_SMART,contents:n})).text||"   ."}catch(r){return console.error("Insight Gen Error:",r)," AI    ."}},V2=({input:t,setInput:e,onGenerate:n,results:r,selectedIdx:i,onSelect:o})=>y.jsxs("div",{className:"max-w-2xl mx-auto pt-10",children:[y.jsxs("div",{className:"text-center mb-10",children:[y.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-indigo-200",children:y.jsx(pn,{className:"w-8 h-8 text-white"})}),y.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:"AI   "}),y.jsx("p",{className:"text-gray-500",children:" .    ."})]}),y.jsxs("div",{className:"bg-white p-2 rounded-2xl border border-gray-200 shadow-sm flex gap-2 mb-12 focus-within:ring-2 focus-within:ring-indigo-500/20 transition-shadow",children:[y.jsx("input",{value:t,onChange:s=>e(s.target.value),onKeyDown:s=>s.key==="Enter"&&n(),className:"flex-1 px-4 py-3 text-base outline-none placeholder-gray-400",placeholder:ql.DRAFT_PLACEHOLDER}),y.jsxs("button",{onClick:n,disabled:!t.trim(),className:"bg-gray-900 text-white px-6 py-3 rounded-xl font-bold hover:bg-black transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[y.jsx(pn,{className:"w-4 h-4"}),y.jsx("span",{children:""})]})]}),r&&y.jsx("div",{className:"grid grid-cols-1 gap-6 animate-fade-in",children:r.map((s,l)=>y.jsxs("div",{onClick:()=>o(s,l),className:`p-6 rounded-2xl border-2 cursor-pointer transition-all hover:shadow-md group relative overflow-hidden
                            ${i===l?"border-indigo-600 bg-indigo-50/30":"border-gray-100 hover:border-indigo-200 bg-white"}`,children:[y.jsxs("div",{className:"flex justify-between items-start mb-3",children:[y.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-md uppercase tracking-wide
                                ${s.styleTag===""?"bg-purple-100 text-purple-700":s.styleTag===""?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:[s.styleTag," "]}),i===l&&y.jsx(Oo,{className:"w-5 h-5 text-indigo-600"})]}),y.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2 group-hover:text-indigo-700 transition-colors",children:s.title}),y.jsx("p",{className:"text-sm text-gray-600 leading-relaxed line-clamp-3",children:s.description})]},l))})]}),wy=({messages:t,inputMsg:e,setInputMsg:n,onSend:r})=>y.jsxs("div",{className:"h-full flex flex-col bg-gray-50 rounded-2xl border border-gray-200 overflow-hidden",children:[y.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[t.length===0&&y.jsxs("div",{className:"text-center py-10 opacity-50",children:[y.jsx(Y0,{className:"w-12 h-12 mx-auto mb-3"}),y.jsx("p",{children:"    !"})]}),t.map(i=>y.jsxs("div",{className:`flex gap-3 ${i.role==="user"?"flex-row-reverse":""}`,children:[y.jsx("div",{className:`w-8 h-8 rounded-full flex-shrink-0 flex items-center justify-center ${i.role==="user"?"bg-gray-900":"bg-blue-600"}`,children:i.role==="user"?y.jsx(iE,{className:"w-4 h-4 text-white"}):y.jsx(pn,{className:"w-4 h-4 text-white"})}),y.jsx("div",{className:`max-w-[80%] p-4 rounded-2xl text-sm leading-relaxed shadow-sm
                        ${i.role==="user"?"bg-white text-gray-800 rounded-tr-none":"bg-blue-600 text-white rounded-tl-none"}`,children:i.content})]},i.id))]}),y.jsx("div",{className:"p-4 bg-white border-t border-gray-200",children:y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{className:"flex-1 bg-gray-100 border-none rounded-xl px-4 py-3 text-sm focus:ring-2 focus:ring-blue-500/20 outline-none",placeholder:"AI  ...",value:e,onChange:i=>n(i.target.value),onKeyDown:i=>i.key==="Enter"&&r()}),y.jsx("button",{onClick:r,className:"p-3 bg-gray-900 text-white rounded-xl hover:bg-black transition-colors",children:y.jsx(nE,{className:"w-4 h-4"})})]})})]}),Rr=({active:t,onClick:e,icon:n,label:r})=>y.jsxs("button",{onClick:e,className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all mb-1 text-sm font-medium
            ${t?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:bg-gray-100/50 hover:text-gray-700"}`,children:[n,y.jsx("span",{children:r})]}),Sy=({active:t,onClick:e,icon:n,label:r})=>y.jsxs("button",{onClick:e,className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-all whitespace-nowrap
            ${t?"bg-white text-gray-900 shadow-sm ring-1 ring-black/5":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[n,y.jsx("span",{children:r})]}),Do=({title:t,action:e})=>y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t}),e]}),L2=({task:t,isOpen:e,onClose:n,onUpdateTask:r,onCreateTask:i,onDeleteTask:o})=>{const[s,l]=j.useState("DETAILS"),[u,f]=j.useState(!1),[h,p]=j.useState(!1),[m,v]=j.useState(!1),[P,k]=j.useState(""),[L,A]=j.useState(null),[T,x]=j.useState(null),[M,V]=j.useState([]),[F,w]=j.useState(""),[E,C]=j.useState(t);if(j.useEffect(()=>{if(e){C(t);const J=t.title===ql.NEW_TASK_TITLE&&(!t.description||t.description==="");v(J),J?(l("DRAFT"),k(""),A(null),x(null)):l("DETAILS")}},[e,t.id]),!e)return null;const R=(J,ie)=>{const O={...E,[J]:ie};C(O),r(O)},S=async J=>{f(!0);try{let ie=E.aiAnalysis?{...E.aiAnalysis}:{lastUpdated:Date.now()};if(J==="STRATEGY"){const O=await A2(E);ie.executionPlan=O.map((Q,X)=>({id:`ep-${Date.now()}-${X}`,title:Q.title,completed:!1}))}else if(J==="DOD"){const O=await R2(E);ie.acceptanceCriteria=O}else if(J==="SOLUTION"){const O=await N2(E);ie.solutionDraft=O}else if(J==="RESOURCES"){const O=await P2(E);ie.learningResources=O}ie.lastUpdated=Date.now(),R("aiAnalysis",ie)}catch(ie){console.error("AI Action Failed",ie)}finally{f(!1)}},D=async()=>{if(P.trim()){f(!0),A(null),x(null);try{const J=await x2(P);A(J)}catch(J){console.error(J)}finally{f(!1)}}},N=(J,ie)=>{x(ie);const O={...E,...J,subtasks:[]};C(O),r(O)},he=async()=>{if(!F.trim())return;const J={id:Date.now().toString(),role:"user",content:F,timestamp:Date.now()};V(O=>[...O,J]),w("");const ie=M.map(O=>({role:O.role,parts:[{text:O.content}]}));try{const O=await k2(ie,F,E),Q={id:(Date.now()+1).toString(),role:"model",content:O||" .",timestamp:Date.now()};V(X=>[...X,Q])}catch(O){console.error(O)}},Ye=()=>{var ie;const J=E.aiAnalysis||{lastUpdated:0};if(m)switch(s){case"DRAFT":return y.jsx(V2,{input:P,setInput:k,onGenerate:D,results:L,selectedIdx:T,onSelect:N});case"CHAT":return y.jsx(wy,{messages:M,inputMsg:F,setInputMsg:w,onSend:he});default:return null}switch(s){case"DETAILS":return y.jsxs("div",{className:"animate-fade-in space-y-8",children:[y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[y.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[y.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:" "}),y.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[y.jsx("div",{className:`w-2 h-2 rounded-full ${E.status==="DONE"?"bg-green-500":"bg-blue-500"}`}),y.jsxs("select",{value:E.status,onChange:O=>R("status",O.target.value),className:"bg-transparent text-sm font-bold text-gray-700 outline-none cursor-pointer w-full",children:[y.jsx("option",{value:"REQUESTED",children:"REQUESTED"}),y.jsx("option",{value:"WIP",children:"IN PROGRESS"}),y.jsx("option",{value:"DONE",children:"DONE"})]})]})]}),y.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[y.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:""}),y.jsx("div",{className:"mt-2",children:y.jsxs("select",{value:E.priority,onChange:O=>R("priority",O.target.value),className:`bg-transparent text-sm font-bold outline-none cursor-pointer uppercase w-full
                                        ${E.priority==="HIGH"?"text-red-600":E.priority==="MEDIUM"?"text-orange-600":"text-blue-600"}`,children:[y.jsx("option",{value:"HIGH",children:"HIGH"}),y.jsx("option",{value:"MEDIUM",children:"MEDIUM"}),y.jsx("option",{value:"LOW",children:"LOW"})]})})]}),y.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[y.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:""}),y.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[y.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-[10px] font-bold text-gray-500",children:"ME"}),y.jsx("span",{className:"text-sm font-bold text-gray-700",children:""})]})]}),y.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-100 shadow-sm",children:[y.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:""}),y.jsx("input",{type:"date",value:E.dueDate?E.dueDate.split("T")[0]:"",onChange:O=>R("dueDate",O.target.value),className:"mt-2 block w-full bg-transparent text-sm font-bold text-gray-700 outline-none"})]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:" "}),y.jsxs("div",{className:"bg-gray-50 p-6 rounded-2xl border border-gray-100 min-h-[200px] relative group",children:[y.jsx("textarea",{value:E.description,onChange:O=>R("description",O.target.value),className:"w-full h-full bg-transparent border-none resize-none focus:ring-0 text-gray-600 leading-relaxed outline-none",placeholder:"  ...",rows:8}),y.jsx(Qm,{className:"absolute top-4 right-4 w-4 h-4 text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"})]})]})]});case"HISTORY":return y.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[y.jsx(Ta,{className:"w-12 h-12 mb-4 opacity-50"}),y.jsx("p",{children:"    ."})]});case"STRATEGY":return y.jsxs("div",{className:"animate-fade-in",children:[y.jsx(Do,{title:"  (Execution Plan)",action:y.jsxs("button",{onClick:()=>S("STRATEGY"),disabled:u,className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg text-sm font-bold hover:bg-blue-100 transition-colors disabled:opacity-50",children:[u?y.jsx(El,{className:"w-4 h-4 animate-spin"}):y.jsx(Jm,{className:"w-4 h-4"}),y.jsx("span",{children:"AI "})]})}),!J.executionPlan||J.executionPlan.length===0?y.jsxs("div",{className:"text-center py-20 text-gray-400 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:[y.jsx(Jm,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),y.jsxs("p",{children:["    .",y.jsx("br",{}),"AI   ."]})]}):y.jsx("div",{className:"space-y-3",children:J.executionPlan.map((O,Q)=>y.jsxs("div",{className:"flex items-start gap-4 p-4 bg-white border border-gray-100 rounded-xl shadow-sm hover:border-blue-200 transition-colors",children:[y.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold text-xs mt-0.5",children:Q+1}),y.jsx("div",{className:"flex-1",children:y.jsx("p",{className:"text-gray-800 font-medium",children:O.title})})]},O.id))})]});case"DOD":return y.jsxs("div",{className:"animate-fade-in",children:[y.jsx(Do,{title:"  (Definition of Done)",action:y.jsxs("button",{onClick:()=>S("DOD"),disabled:u,className:"flex items-center gap-2 px-4 py-2 bg-purple-50 text-purple-600 rounded-lg text-sm font-bold hover:bg-purple-100 transition-colors disabled:opacity-50",children:[u?y.jsx(El,{className:"w-4 h-4 animate-spin"}):y.jsx(Oo,{className:"w-4 h-4"}),y.jsx("span",{children:"AI "})]})}),!J.acceptanceCriteria||J.acceptanceCriteria.length===0?y.jsxs("div",{className:"text-center py-20 text-gray-400 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:[y.jsx(Oo,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),y.jsxs("p",{children:["   .",y.jsx("br",{}),"QA   AI ."]})]}):y.jsx("ul",{className:"space-y-3",children:J.acceptanceCriteria.map((O,Q)=>y.jsxs("li",{className:`p-4 rounded-xl border transition-all cursor-pointer group flex items-start gap-4
                                        ${O.checked?"bg-gray-50 border-gray-100":"bg-white border-gray-200 hover:border-purple-200 hover:shadow-sm"}`,onClick:()=>{const X=J.acceptanceCriteria.map(ge=>ge.id===O.id?{...ge,checked:!ge.checked}:ge),de={...J,acceptanceCriteria:X,lastUpdated:Date.now()};R("aiAnalysis",de)},children:[y.jsx("div",{className:`mt-0.5 transition-colors ${O.checked?"text-purple-600":"text-gray-300 group-hover:text-purple-400"}`,children:O.checked?y.jsx(SC,{className:"w-6 h-6"}):y.jsx(bC,{className:"w-6 h-6"})}),y.jsx("span",{className:`text-base leading-relaxed select-none ${O.checked?"text-gray-400 line-through":"text-gray-700"}`,children:O.content})]},O.id))})]});case"SOLUTION":return y.jsxs("div",{className:"animate-fade-in h-full flex flex-col",children:[y.jsx(Do,{title:"  (Solution Draft)",action:y.jsxs("button",{onClick:()=>S("SOLUTION"),disabled:u,className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-600 rounded-lg text-sm font-bold hover:bg-emerald-100 transition-colors disabled:opacity-50",children:[u?y.jsx(El,{className:"w-4 h-4 animate-spin"}):y.jsx(Bl,{className:"w-4 h-4"}),y.jsx("span",{children:"AI  "})]})}),y.jsx("div",{className:"flex-1 bg-gray-900 rounded-2xl p-6 overflow-y-auto text-gray-300 font-mono text-sm leading-relaxed shadow-inner",children:J.solutionDraft?y.jsx("pre",{className:"whitespace-pre-wrap",children:J.solutionDraft}):y.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-600",children:[y.jsx(Bl,{className:"w-12 h-12 mb-4 opacity-50"}),y.jsx("p",{children:"   ."})]})})]});case"RESOURCES":return y.jsxs("div",{className:"animate-fade-in",children:[y.jsx(Do,{title:"   (Resources)",action:y.jsxs("button",{onClick:()=>S("RESOURCES"),disabled:u,className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-bold hover:bg-indigo-100 transition-colors disabled:opacity-50",children:[u?y.jsx(El,{className:"w-4 h-4 animate-spin"}):y.jsx(Ei,{className:"w-4 h-4"}),y.jsx("span",{children:"AI  "})]})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(ie=J.learningResources)==null?void 0:ie.map((O,Q)=>y.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"block p-5 rounded-xl border border-gray-200 hover:border-indigo-300 hover:shadow-md transition-all group bg-white",children:[y.jsxs("div",{className:"flex items-start justify-between mb-2",children:[y.jsx("div",{className:"p-2 bg-indigo-50 text-indigo-600 rounded-lg group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:y.jsx(Ei,{className:"w-5 h-5"})}),y.jsx("span",{className:"text-xs font-bold text-gray-400",children:"LINK"})]}),y.jsx("h4",{className:"font-bold text-gray-900 mb-1 group-hover:text-indigo-600 transition-colors",children:O.title}),y.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:O.description||"AI    ."})]},Q)),(!J.learningResources||J.learningResources.length===0)&&y.jsxs("div",{className:"col-span-2 text-center py-20 text-gray-400 bg-gray-50 rounded-2xl border border-dashed border-gray-200",children:[y.jsx(Ei,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),y.jsxs("p",{children:["    .",y.jsx("br",{}),"AI  ."]})]})]})]});case"CHAT":return y.jsxs("div",{className:"animate-fade-in h-[600px]",children:[y.jsx(Do,{title:"AI  (Assistant)"}),y.jsx(wy,{messages:M,inputMsg:F,setInputMsg:w,onSend:he})]});default:return null}};return y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 bg-black/60 backdrop-blur-sm transition-opacity",children:y.jsxs("div",{className:`bg-white rounded-3xl shadow-2xl overflow-hidden flex animate-fade-in border border-white/50
             ${m?"w-full max-w-[1400px] h-[90vh]":"w-full max-w-6xl h-[90vh] flex-col"}`,children:[m&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"w-[35%] min-w-[350px] bg-gray-50/80 backdrop-blur-sm border-r border-gray-100 flex flex-col h-full",children:[y.jsx("div",{className:"h-16 px-6 border-b border-gray-100 flex items-center justify-between shrink-0",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"px-2 py-0.5 text-[10px] font-bold rounded uppercase tracking-wide bg-orange-50 text-orange-600 border border-orange-100",children:E.priority}),y.jsx("span",{className:"text-xs font-bold text-gray-400",children:E.product||""})]})}),y.jsxs("div",{className:"flex-1 p-8 overflow-y-auto",children:[y.jsxs("div",{className:"mb-6 relative group",children:[y.jsx("textarea",{value:E.title===ql.NEW_TASK_TITLE?"":E.title,onChange:J=>R("title",J.target.value),className:"w-full text-3xl font-bold text-gray-900 bg-transparent border-none focus:ring-0 p-0 resize-none overflow-hidden placeholder-gray-300 outline-none leading-tight",placeholder:"  ",rows:2}),y.jsx(Qm,{className:"absolute top-2 right-0 w-5 h-5 text-gray-300 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"})]}),y.jsx("div",{className:"mb-8 relative group h-[calc(100%-100px)]",children:y.jsx("textarea",{value:E.description,onChange:J=>R("description",J.target.value),className:"w-full h-full text-base text-gray-600 leading-relaxed bg-transparent border-none focus:ring-0 p-0 resize-none placeholder-gray-300 outline-none",placeholder:ql.NEW_TASK_DESC_PLACEHOLDER})})]}),y.jsx("div",{className:"p-6 border-t border-gray-100 bg-white/50",children:y.jsxs("button",{onClick:()=>i&&i(E),className:"w-full py-3.5 bg-gray-900 text-white rounded-xl font-bold hover:bg-black transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2",children:[y.jsx(Oo,{className:"w-5 h-5"}),y.jsx("span",{children:"  "})]})})]}),y.jsxs("div",{className:"flex-1 bg-white flex flex-col h-full relative",children:[y.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 flex items-center justify-between shrink-0",children:[y.jsxs("div",{className:"flex gap-1",children:[y.jsx(Sy,{active:s==="DRAFT",onClick:()=>l("DRAFT"),icon:y.jsx(BC,{className:"w-4 h-4"}),label:"AI  (Draft)"}),y.jsx(Sy,{active:s==="CHAT",onClick:()=>l("CHAT"),icon:y.jsx(pn,{className:"w-4 h-4"}),label:""})]}),y.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors",children:y.jsx(_d,{className:"w-6 h-6"})})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-8 bg-gray-50/30 relative",children:[u&&y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 z-20 backdrop-blur-sm transition-opacity",children:y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-gray-100 border-t-indigo-600 animate-spin"}),y.jsx("span",{className:"text-sm font-medium text-indigo-600 animate-pulse",children:"AI   ..."})]})}),Ye()]})]})]}),!m&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"h-20 px-8 border-b border-gray-100 flex items-center justify-between shrink-0 bg-white z-10",children:[y.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[y.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-500 text-[10px] font-bold rounded uppercase tracking-wide",children:E.product||"PROJECT"}),h?y.jsx("input",{value:E.title,onChange:J=>R("title",J.target.value),onBlur:()=>p(!1),onKeyDown:J=>J.key==="Enter"&&p(!1),autoFocus:!0,className:"text-2xl font-bold text-gray-900 outline-none w-full bg-transparent"}):y.jsx("h1",{className:"text-2xl font-bold text-gray-900 cursor-pointer hover:text-gray-600 transition-colors truncate",onClick:()=>p(!0),children:E.title})]}),y.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[o&&y.jsx("button",{onClick:()=>o(t.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"",children:y.jsx(Kf,{className:"w-5 h-5"})}),y.jsx("div",{className:"w-px h-6 bg-gray-200 mx-2"}),y.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors",children:y.jsx(_d,{className:"w-6 h-6"})})]})]}),y.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[y.jsxs("div",{className:"w-64 bg-gray-50 border-r border-gray-100 p-6 overflow-y-auto shrink-0 hidden md:block",children:[y.jsxs("div",{className:"mb-6",children:[y.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase mb-3 px-4",children:" "}),y.jsx(Rr,{active:s==="DETAILS",onClick:()=>l("DETAILS"),icon:y.jsx(Z0,{className:"w-4 h-4"}),label:" "}),y.jsx(Rr,{active:s==="HISTORY",onClick:()=>l("HISTORY"),icon:y.jsx(Ta,{className:"w-4 h-4"}),label:" "})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase mb-3 px-4",children:"AI Tools"}),y.jsx(Rr,{active:s==="STRATEGY",onClick:()=>l("STRATEGY"),icon:y.jsx(eE,{className:"w-4 h-4"}),label:" "}),y.jsx(Rr,{active:s==="DOD",onClick:()=>l("DOD"),icon:y.jsx(Oo,{className:"w-4 h-4"}),label:"  (DoD)"}),y.jsx(Rr,{active:s==="SOLUTION",onClick:()=>l("SOLUTION"),icon:y.jsx(Bl,{className:"w-4 h-4"}),label:" "}),y.jsx(Rr,{active:s==="RESOURCES",onClick:()=>l("RESOURCES"),icon:y.jsx(Ei,{className:"w-4 h-4"}),label:" "}),y.jsx(Rr,{active:s==="CHAT",onClick:()=>l("CHAT"),icon:y.jsx(DC,{className:"w-4 h-4"}),label:"AI "})]})]}),y.jsx("div",{className:"flex-1 bg-white p-8 overflow-y-auto",children:Ye()})]})]})]})})},b2=[{icon:y.jsx(j0,{className:"w-5 h-5 text-purple-500"}),text:"Create an image",sub:"of a futuristic workspace"},{icon:y.jsx(kC,{className:"w-5 h-5 text-yellow-500"}),text:"Brainstorm ideas",sub:"for a marketing campaign"},{icon:y.jsx(xC,{className:"w-5 h-5 text-blue-500"}),text:"Write code",sub:"for a React component"},{icon:y.jsx(AC,{className:"w-5 h-5 text-green-500"}),text:"Plan a trip",sub:"to Seoul with team"}],F2=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(""),[i,o]=j.useState(!1),[s,l]=j.useState(!1),[u,f]=j.useState(null),[h,p]=j.useState("image/png"),m=j.useRef(null),[v,P]=j.useState(Ym[0]),[k,L]=j.useState(!1),A=j.useRef(null),T=j.useRef(null),x=j.useRef(null);j.useEffect(()=>{var S;(S=T.current)==null||S.scrollIntoView({behavior:"smooth"})},[t,u]),j.useEffect(()=>{const S=D=>{A.current&&!A.current.contains(D.target)&&L(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const M=S=>{if(S.target.files&&S.target.files[0]){const D=S.target.files[0],N=new FileReader;N.onloadend=()=>{const he=N.result;f(he),p(D.type)},N.readAsDataURL(D)}},V=()=>{f(null),m.current&&(m.current.value="")},F=()=>{if(!("webkitSpeechRecognition"in window)){alert("     .");return}if(s){l(!1);return}const S=new window.webkitSpeechRecognition;S.lang="ko-KR",S.continuous=!1,S.interimResults=!1,S.onstart=()=>{l(!0)},S.onresult=D=>{const N=D.results[0][0].transcript;r(he=>he+(he?" ":"")+N),l(!1)},S.onerror=D=>{console.error("Speech recognition error",D.error),l(!1)},S.onend=()=>{l(!1)},S.start()},w=async(S=n)=>{var J;if(!S.trim()&&!u||i)return;const D=u,N=D?D.split(",")[1]:void 0,he={id:Date.now().toString(),role:"user",text:S,image:D||void 0,timestamp:Date.now()};e(ie=>[...ie,he]),r(""),V(),o(!0);const Ye=t.map(ie=>{const O=[];return ie.text&&O.push({text:ie.text}),{role:ie.role,parts:O}});try{const ie=(Date.now()+1).toString();e(X=>[...X,{id:ie,role:"model",text:"",isStreaming:!0,modelName:v.name,timestamp:Date.now()}]);const O=await D2(Ye,S,v.id,N,h);let Q="";for await(const X of O){const de=X.text||"";Q+=de,e(ge=>ge.map(qt=>qt.id===ie?{...qt,text:Q}:qt))}e(X=>X.map(de=>de.id===ie?{...de,isStreaming:!1}:de))}catch(ie){console.error("Gemini Chat Error:",ie),e(O=>[...O,{id:Date.now().toString(),role:"model",text:".    .",timestamp:Date.now()}])}finally{o(!1),(J=x.current)==null||J.focus()}},E=S=>{e(D=>D.filter(N=>N.id!==S))},C=(S,D)=>{w(`${S} ${D}`)},R=S=>{P(S),L(!1)};return y.jsxs("div",{className:"flex flex-col h-full bg-white text-gray-900 font-sans relative overflow-hidden",children:[y.jsx("input",{type:"file",ref:m,onChange:M,accept:"image/*",className:"hidden"}),y.jsxs("div",{className:"absolute top-0 left-0 right-0 h-16 flex items-center justify-between px-4 md:px-6 z-20 bg-white/80 backdrop-blur-sm",children:[y.jsxs("div",{className:"flex items-center gap-2 relative",ref:A,children:[y.jsxs("button",{onClick:()=>L(!k),className:"flex items-center gap-1 text-lg font-medium text-gray-600 hover:bg-gray-100 px-3 py-1.5 rounded-lg transition-colors",children:[y.jsx("span",{children:v.name}),y.jsx(X0,{className:`w-4 h-4 transition-transform duration-200 ${k?"rotate-180":""}`})]}),k&&y.jsx("div",{className:"absolute top-full left-0 mt-2 w-72 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden animate-fade-in",children:y.jsx("div",{className:"p-1.5",children:Ym.map(S=>y.jsxs("button",{onClick:()=>R(S),className:`w-full text-left p-3 rounded-lg flex items-start gap-3 transition-colors
                                            ${v.id===S.id?"bg-blue-50":"hover:bg-gray-50"}`,children:[y.jsx("div",{className:`mt-1 w-4 h-4 rounded-full border flex items-center justify-center flex-shrink-0
                                            ${v.id===S.id?"border-blue-600":"border-gray-300"}`,children:v.id===S.id&&y.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:`font-medium ${v.id===S.id?"text-blue-700":"text-gray-700"}`,children:S.name}),S.isPro&&y.jsx("span",{className:"text-[10px] font-bold bg-gradient-to-r from-indigo-500 to-purple-500 text-white px-1.5 py-0.5 rounded",children:"PRO"})]}),y.jsx("p",{className:"text-xs text-gray-500 mt-0.5 leading-snug",children:S.description})]})]},S.id))})})]}),y.jsx("div",{className:"flex items-center gap-2",children:y.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 text-xs font-bold",children:"U"})})]}),y.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 pt-20 pb-32 relative",children:t.length===0?y.jsxs("div",{className:"flex flex-col items-center justify-center h-full min-h-[500px] animate-fade-in",children:[y.jsxs("div",{className:"text-left w-full max-w-4xl px-4 mb-12",children:[y.jsx("h1",{className:"text-5xl md:text-6xl font-medium tracking-tight mb-2",children:y.jsx("span",{className:"bg-gradient-to-r from-[#4285F4] via-[#9B72CB] to-[#D96570] bg-clip-text text-transparent",children:"Hello, User"})}),y.jsx("h2",{className:"text-5xl md:text-6xl font-medium text-[#C4C7C5] tracking-tight",children:"How can I help you today?"})]}),y.jsx("div",{className:"w-full max-w-4xl px-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:b2.map((S,D)=>y.jsxs("button",{onClick:()=>C(S.text,S.sub),className:"p-4 h-40 rounded-2xl bg-[#F0F4F9] hover:bg-[#DCE3E9] transition-colors text-left flex flex-col justify-between group relative overflow-hidden",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-gray-800 font-medium text-sm",children:S.text}),y.jsx("p",{className:"text-gray-500 text-sm mt-1",children:S.sub})]}),y.jsx("div",{className:"w-8 h-8 rounded-full bg-white flex items-center justify-center shadow-sm self-end group-hover:scale-110 transition-transform",children:S.icon})]},D))})]}):y.jsxs("div",{className:"w-full max-w-3xl mx-auto space-y-8",children:[t.map(S=>y.jsxs("div",{className:`group/message flex gap-4 ${S.role==="user"?"flex-row-reverse":""}`,children:[y.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 mt-1 
                                    ${S.role==="model"?"bg-white border border-gray-100":"bg-indigo-600"}`,children:S.role==="model"?y.jsx("img",{src:"https://www.gstatic.com/lamda/images/gemini_sparkle_v002_d4735304ff6292a690345.svg",className:"w-full h-full",alt:"Gemini"}):y.jsx("span",{className:"text-xs font-bold text-white",children:"U"})}),y.jsxs("div",{className:`flex flex-col max-w-[80%] ${S.role==="user"?"items-end":"items-start"}`,children:[S.image&&y.jsx("div",{className:"mb-2 overflow-hidden rounded-lg border border-gray-200 shadow-sm max-w-[200px]",children:y.jsx("img",{src:S.image,alt:"Uploaded content",className:"w-full h-auto"})}),y.jsxs("div",{className:`flex-1 text-base leading-relaxed whitespace-pre-wrap ${S.role==="user"?"bg-[#F0F4F9] px-5 py-3 rounded-[20px] rounded-tr-sm":"pt-1 text-gray-800"}`,children:[S.text,S.isStreaming&&y.jsx("span",{className:"inline-block w-1.5 h-4 ml-1 bg-blue-500 animate-pulse align-middle"})]}),y.jsxs("div",{className:`mt-2 flex items-center gap-2 ${S.role==="user"?"flex-row-reverse":"flex-row"}`,children:[y.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-red-50 text-red-500 border border-red-100 select-none shadow-sm",children:[y.jsx(Ta,{className:"w-3 h-3"}),y.jsxs("span",{className:"text-[11px] font-bold tracking-wide",children:[new Date(S.timestamp||Date.now()).getMonth()+1,". ",new Date(S.timestamp||Date.now()).getDate(),"."]})]}),y.jsx("button",{onClick:()=>E(S.id),className:"group/delete flex items-center justify-center w-7 h-7 rounded-full bg-white border border-gray-200 shadow-sm hover:bg-red-50 hover:border-red-200 transition-all",title:" ",children:y.jsx(Kf,{className:"w-3.5 h-3.5 text-gray-400 group-hover/delete:text-red-500 transition-colors"})}),S.role==="model"&&S.modelName&&y.jsxs("span",{className:`ml-1 text-[10px] font-bold px-2 py-0.5 rounded-full border flex items-center gap-1 shadow-sm select-none
                                                ${S.modelName.includes("Pro")?"bg-indigo-50 text-indigo-600 border-indigo-100":"bg-white text-gray-600 border-gray-200"}`,children:[y.jsx(pn,{className:"w-3 h-3"}),S.modelName]})]})]})]},S.id)),y.jsx("div",{ref:T})]})}),y.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-white p-6 pb-8",children:y.jsxs("div",{className:"w-full max-w-3xl mx-auto relative group flex flex-col gap-2",children:[u&&y.jsxs("div",{className:"bg-[#F0F4F9] rounded-2xl p-3 w-fit relative animate-fade-in shadow-sm border border-gray-200",children:[y.jsx("div",{className:"relative h-24 w-auto rounded-lg overflow-hidden",children:y.jsx("img",{src:u,alt:"Preview",className:"h-full w-auto object-contain"})}),y.jsx("button",{onClick:V,className:"absolute -top-2 -right-2 bg-gray-800 text-white rounded-full p-1 hover:bg-black transition-colors",children:y.jsx(_d,{className:"w-3 h-3"})})]}),y.jsxs("div",{className:`flex items-center gap-2 bg-[#F0F4F9] rounded-full px-4 py-3 transition-all focus-within:shadow-md focus-within:bg-white focus-within:ring-1 focus-within:ring-gray-200 ${i?"opacity-70 cursor-not-allowed":""}`,children:[y.jsx("button",{onClick:()=>{var S;return(S=m.current)==null?void 0:S.click()},className:"p-2 rounded-full hover:bg-gray-200 text-gray-600 transition-colors relative",title:" ",children:y.jsx(j0,{className:"w-5 h-5"})}),y.jsx("button",{onClick:F,className:`p-2 rounded-full hover:bg-gray-200 transition-colors relative 
                                ${s?"text-red-500 bg-red-50 animate-pulse":"text-gray-600"}`,title:" ",children:y.jsx(MC,{className:"w-5 h-5"})}),y.jsx("input",{ref:x,type:"text",value:n,onChange:S=>r(S.target.value),onKeyDown:S=>S.key==="Enter"&&!i&&w(),placeholder:s?"  ...":"Enter a prompt here",className:"flex-1 bg-transparent border-none focus:ring-0 text-gray-800 placeholder-gray-500 text-base",disabled:i}),(n.trim()||u)&&y.jsx("button",{onClick:()=>w(),disabled:i,className:"p-2 rounded-full bg-black text-white hover:bg-gray-800 transition-all animate-fade-in",children:y.jsx(nE,{className:"w-4 h-4"})})]}),y.jsx("div",{className:"text-center mt-1 text-xs text-gray-400",children:"Gemini may display inaccurate info, including about people, so double-check its responses."})]})})]})},U2=[{version:"1.8.1",date:"2025-11-25",title:"docs(workflow): update workflow guide with automated release process",description:"No description provided."},{version:"1.8.0",date:"2025-11-23",title:"       ",description:"<h3>   (Intelligent Task Detail Modal)</h3><ul><li><strong>2  UI:</strong>     ()       .</li><li><strong>AI   :</strong> Gemini AI         :<ul><li><strong>  (Strategy):</strong>    </li><li><strong>  (DoD):</strong> QA       </li><li><strong>  (Solution Draft):</strong>         </li><li><strong>  (Resources):</strong>       </li></ul></li><li><strong> :</strong> , ,          UX .</li></ul><h3>  </h3><ul><li><strong>  :</strong> <code>Task</code>  <code>aiAnalysis</code>    AI    .</li><li><strong>  :</strong> <code>AI_FEATURES</code>      .</li></ul>"},{version:"1.7.0",date:"2025-11-23",title:"     ",description:"<h3>  </h3><ul><li><strong>SSOT   :</strong> <code>services/prompts.ts</code>   <code>AI_FEATURES</code>  ,    UI   .</li><li><strong> :</strong> <code>npm run release</code>     Changelog  .</li><li><strong>  :</strong>   <code>scripts/generate-docs.ts</code>     Markdown   .</li></ul>"},{version:"1.6.0",date:"2025-11-23",title:"  UX     ",description:"<h3> UX </h3><ul><li>    '  '       .     '  '        .</li></ul><h3>  </h3><ul><li>  <code>Icons.tsx</code>        .  (<code>FileCode</code>, <code>CheckSquare</code>)     .</li></ul>"},{version:"1.5.0",date:"2025-11-22",title:"Cypress      ",description:`<h3> </h3><ul><li>Cypress       End-to-End   .         .</li></ul><h3> </h3><ul><li>   ' >   '   Node.js    .        ""  .</li></ul><h3> CI/CD</h3><ul><li><code>npm run test</code>     ,  CI/CD         .</li></ul><h3> </h3><p>   GUI    Cypress    ,       .    CI/CD   .</p>`},{version:"1.4.0",date:"2025-11-22",title:"  (Insights) ",description:"<h3>  </h3><ul><li>    ' '  . Gemini AI       .</li></ul><h3> KPI </h3><ul><li> (Overdue),  (Velocity),  (Stuck),  (Resolution)  4         .</li></ul><h3> UI </h3><ul><li>     , ,   .  AI     UI    .</li></ul>"},{version:"1.3.0",date:"2025-11-22",title:"      ",description:"<h3> </h3><ul><li> <code>Kanban.tsx</code>  <code>TaskCard</code>, <code>KanbanColumn</code>, <code>KanbanToolbar</code>       .</li><li>   <code>utils/formatters.ts</code>   .</li></ul><h3>  </h3><ul><li>    ( , Changelog) 2025 11  ,    (KST)  .</li></ul>"},{version:"1.2.1",date:"2025-11-22",title:"UI     ",description:"<h3>  </h3><ul><li><code>TaskStatus</code>         .</li><li>          .</li></ul><h3> </h3><ul><li>  CSS <code>@import</code>    HTML <code>&lt;link&gt;</code>     .</li></ul>"},{version:"1.2.0",date:"2025-11-21",title:"Changelog UI    ",description:"<h3>    </h3><ul><li>Changelog         UI   .</li><li>        .</li></ul><h3> </h3><p>            <code>changelog.json</code>  ,          .</p>"},{version:"1.1.0",date:"2025-11-20",title:"Changelog        ",description:"<h3>  </h3><ul><li>          <strong>Changelog &   </strong> . (<code>components/ChangelogPage.tsx</code>)</li><li> Changelog    . (<code>components/Layout.tsx</code>, <code>App.tsx</code>)</li><li>Changelog    <code>changelog.json</code>, <code>features.json</code>   .</li></ul><h3>  </h3><p><code>lucide-react</code>  <code>GitCommit</code>, <code>AlertTriangle</code>    ,  <code>SyntaxError: The requested module does not provide an export named '...'</code>   . <code>components/Icons.tsx</code>     export ,  import      .</p><h3>     </h3><p>    <strong>  (cache)</strong>. Vite, Next.js              .   <code>Icons.tsx</code>      ,          .</p><p>     , <strong><code>npm run dev</code>     </strong>          .</p><p><strong> :</strong>   ,  (export/import)        ,    <strong>   </strong>   ,            .</p>"},{version:"1.0.0",date:"2025-11-15",title:"   AI  ",description:"<h3>  </h3><ul><li>   UI  ( ,  , )</li><li>Gemini AI        </li></ul><h3>  </h3><p>AI    ,        .</p><h3>  </h3><p><code>services/prompts.ts</code>      .   AI   ,        .</p>"}],O2=()=>{};var Cy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},G2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],l=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},ME={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,l=s?t[i+1]:0,u=i+2<t.length,f=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|l>>4;let m=(l&15)<<2|f>>6,v=f&63;u||(v=64,s||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(DE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):G2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||f==null||p==null)throw new B2;const m=o<<2|l>>4;if(r.push(m),f!==64){const v=l<<4&240|f>>2;if(r.push(v),p!==64){const P=f<<6&192|p;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class B2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q2=function(t){const e=DE(t);return ME.encodeByteArray(e,!0)},xa=function(t){return q2(t).replace(/\./g,"")},H2=function(t){try{return ME.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=()=>$2().__FIREBASE_DEFAULTS__,W2=()=>{if(typeof process>"u"||typeof Cy>"u")return;const t=Cy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},K2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&H2(t[1]);return e&&JSON.parse(e)},nh=()=>{try{return O2()||z2()||W2()||K2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},J2=t=>{var e,n;return(n=(e=nh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Q2=t=>{const e=J2(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},VE=()=>{var t;return(t=nh())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function X2(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[xa(JSON.stringify(n)),xa(JSON.stringify(s)),""].join(".")}const Zo={};function Z2(){const t={prod:[],emulator:[]};for(const e of Object.keys(Zo))Zo[e]?t.emulator.push(e):t.prod.push(e);return t}function ek(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let xy=!1;function tk(t,e){if(typeof window>"u"||typeof document>"u"||!rh(window.location.host)||Zo[t]===e||Zo[t]||xy)return;Zo[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",o=Z2().prod.length>0;function s(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function f(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{xy=!0,s()},m}function h(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=ek(r),v=n("text"),P=document.getElementById(v)||document.createElement("span"),k=n("learnmore"),L=document.getElementById(k)||document.createElement("a"),A=n("preprendIcon"),T=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const x=m.element;l(x),h(L,k);const M=f();u(T,A),x.append(T,P,L,M),document.body.appendChild(x)}o?(P.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rk(){var e;const t=(e=nh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ik(){return!rk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ok(){try{return typeof indexedDB=="object"}catch{return!1}}function sk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="FirebaseError";class eo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lk,Object.setPrototypeOf(this,eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,LE.prototype.create)}}class LE{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?ak(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new eo(i,l,r)}}function ak(t,e){return t.replace(uk,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const uk=/\{\$([^}]+)}/g;function Aa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(Ay(o)&&Ay(s)){if(!Aa(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ay(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t){return t&&t._delegate?t._delegate:t}class Ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Y2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fk(e))try{this.getOrInitializeService({instanceIdentifier:kr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=kr){return this.instances.has(e)}getOptions(e=kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=kr){return this.component?this.component.multipleInstances?e:kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dk(t){return t===kr?void 0:t}function fk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ck(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const pk={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},mk=ue.INFO,gk={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},yk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=gk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bE{constructor(e){this.name=e,this._logLevel=mk,this._logHandler=yk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const _k=(t,e)=>e.some(n=>t instanceof n);let Ry,Ny;function vk(){return Ry||(Ry=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ek(){return Ny||(Ny=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FE=new WeakMap,Rd=new WeakMap,UE=new WeakMap,mc=new WeakMap,ih=new WeakMap;function Tk(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(nr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&FE.set(n,t)}).catch(()=>{}),ih.set(e,t),e}function Ik(t){if(Rd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Rd.set(t,e)}let Nd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wk(t){Nd=t(Nd)}function Sk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gc(this),e,...n);return UE.set(r,e.sort?e.sort():[e]),nr(r)}:Ek().includes(t)?function(...e){return t.apply(gc(this),e),nr(FE.get(this))}:function(...e){return nr(t.apply(gc(this),e))}}function Ck(t){return typeof t=="function"?Sk(t):(t instanceof IDBTransaction&&Ik(t),_k(t,vk())?new Proxy(t,Nd):t)}function nr(t){if(t instanceof IDBRequest)return Tk(t);if(mc.has(t))return mc.get(t);const e=Ck(t);return e!==t&&(mc.set(t,e),ih.set(e,t)),e}const gc=t=>ih.get(t);function xk(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),l=nr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(nr(s.result),u.oldVersion,u.newVersion,nr(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const Ak=["get","getKey","getAll","getAllKeys","count"],Rk=["put","add","delete","clear"],yc=new Map;function Py(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yc.get(e))return yc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Rk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ak.includes(n)))return;const o=async function(s,...l){const u=this.transaction(s,i?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),i&&u.done]))[0]};return yc.set(e,o),o}wk(t=>({...t,get:(e,n,r)=>Py(e,n)||t.get(e,n,r),has:(e,n)=>!!Py(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Pk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Pk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pd="@firebase/app",ky="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An=new bE("@firebase/app"),kk="@firebase/app-compat",Dk="@firebase/analytics-compat",Mk="@firebase/analytics",Vk="@firebase/app-check-compat",Lk="@firebase/app-check",bk="@firebase/auth",Fk="@firebase/auth-compat",Uk="@firebase/database",Ok="@firebase/data-connect",Gk="@firebase/database-compat",Bk="@firebase/functions",qk="@firebase/functions-compat",Hk="@firebase/installations",$k="@firebase/installations-compat",zk="@firebase/messaging",Wk="@firebase/messaging-compat",Kk="@firebase/performance",Jk="@firebase/performance-compat",Qk="@firebase/remote-config",Yk="@firebase/remote-config-compat",Xk="@firebase/storage",jk="@firebase/storage-compat",Zk="@firebase/firestore",eD="@firebase/ai",tD="@firebase/firestore-compat",nD="firebase",rD="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="[DEFAULT]",iD={[Pd]:"fire-core",[kk]:"fire-core-compat",[Mk]:"fire-analytics",[Dk]:"fire-analytics-compat",[Lk]:"fire-app-check",[Vk]:"fire-app-check-compat",[bk]:"fire-auth",[Fk]:"fire-auth-compat",[Uk]:"fire-rtdb",[Ok]:"fire-data-connect",[Gk]:"fire-rtdb-compat",[Bk]:"fire-fn",[qk]:"fire-fn-compat",[Hk]:"fire-iid",[$k]:"fire-iid-compat",[zk]:"fire-fcm",[Wk]:"fire-fcm-compat",[Kk]:"fire-perf",[Jk]:"fire-perf-compat",[Qk]:"fire-rc",[Yk]:"fire-rc-compat",[Xk]:"fire-gcs",[jk]:"fire-gcs-compat",[Zk]:"fire-fst",[tD]:"fire-fst-compat",[eD]:"fire-vertex","fire-js":"fire-js",[nD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new Map,oD=new Map,Dd=new Map;function Dy(t,e){try{t.container.addComponent(e)}catch(n){An.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Na(t){const e=t.name;if(Dd.has(e))return An.debug(`There were multiple attempts to register component ${e}.`),!1;Dd.set(e,t);for(const n of Ra.values())Dy(n,t);for(const n of oD.values())Dy(n,t);return!0}function sD(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function lD(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new LE("app","Firebase",aD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=rD;function OE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:kd,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw rr.create("bad-app-name",{appName:String(i)});if(n||(n=VE()),!n)throw rr.create("no-options");const o=Ra.get(i);if(o){if(Aa(n,o.options)&&Aa(r,o.config))return o;throw rr.create("duplicate-app",{appName:i})}const s=new hk(i);for(const u of Dd.values())s.addComponent(u);const l=new uD(n,r,s);return Ra.set(i,l),l}function dD(t=kd){const e=Ra.get(t);if(!e&&t===kd&&VE())return OE();if(!e)throw rr.create("no-app",{appName:t});return e}function ki(t,e,n){let r=iD[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),An.warn(s.join(" "));return}Na(new Ts(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="firebase-heartbeat-database",hD=1,Is="firebase-heartbeat-store";let _c=null;function GE(){return _c||(_c=xk(fD,hD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Is)}catch(n){console.warn(n)}}}}).catch(t=>{throw rr.create("idb-open",{originalErrorMessage:t.message})})),_c}async function pD(t){try{const n=(await GE()).transaction(Is),r=await n.objectStore(Is).get(BE(t));return await n.done,r}catch(e){if(e instanceof eo)An.warn(e.message);else{const n=rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});An.warn(n.message)}}}async function My(t,e){try{const r=(await GE()).transaction(Is,"readwrite");await r.objectStore(Is).put(e,BE(t)),await r.done}catch(n){if(n instanceof eo)An.warn(n.message);else{const r=rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});An.warn(r.message)}}}function BE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=1024,gD=30;class yD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Vy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>gD){const s=ED(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){An.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vy(),{heartbeatsToSend:r,unsentEntries:i}=_D(this._heartbeatsCache.heartbeats),o=xa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return An.warn(n),""}}}function Vy(){return new Date().toISOString().substring(0,10)}function _D(t,e=mD){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Ly(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ly(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ok()?sk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return My(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return My(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ly(t){return xa(JSON.stringify({version:2,heartbeats:t})).length}function ED(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){Na(new Ts("platform-logger",e=>new Nk(e),"PRIVATE")),Na(new Ts("heartbeat",e=>new yD(e),"PRIVATE")),ki(Pd,ky,t),ki(Pd,ky,"esm2020"),ki("fire-js","")}TD("");var ID="firebase",wD="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ki(ID,wD,"app");var by=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ir,qE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,E){function C(){}C.prototype=E.prototype,w.F=E.prototype,w.prototype=new C,w.prototype.constructor=w,w.D=function(R,S,D){for(var N=Array(arguments.length-2),he=2;he<arguments.length;he++)N[he-2]=arguments[he];return E.prototype[S].apply(R,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,E,C){C||(C=0);const R=Array(16);if(typeof E=="string")for(var S=0;S<16;++S)R[S]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(S=0;S<16;++S)R[S]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=w.g[0],C=w.g[1],S=w.g[2];let D=w.g[3],N;N=E+(D^C&(S^D))+R[0]+3614090360&4294967295,E=C+(N<<7&4294967295|N>>>25),N=D+(S^E&(C^S))+R[1]+3905402710&4294967295,D=E+(N<<12&4294967295|N>>>20),N=S+(C^D&(E^C))+R[2]+606105819&4294967295,S=D+(N<<17&4294967295|N>>>15),N=C+(E^S&(D^E))+R[3]+3250441966&4294967295,C=S+(N<<22&4294967295|N>>>10),N=E+(D^C&(S^D))+R[4]+4118548399&4294967295,E=C+(N<<7&4294967295|N>>>25),N=D+(S^E&(C^S))+R[5]+1200080426&4294967295,D=E+(N<<12&4294967295|N>>>20),N=S+(C^D&(E^C))+R[6]+2821735955&4294967295,S=D+(N<<17&4294967295|N>>>15),N=C+(E^S&(D^E))+R[7]+4249261313&4294967295,C=S+(N<<22&4294967295|N>>>10),N=E+(D^C&(S^D))+R[8]+1770035416&4294967295,E=C+(N<<7&4294967295|N>>>25),N=D+(S^E&(C^S))+R[9]+2336552879&4294967295,D=E+(N<<12&4294967295|N>>>20),N=S+(C^D&(E^C))+R[10]+4294925233&4294967295,S=D+(N<<17&4294967295|N>>>15),N=C+(E^S&(D^E))+R[11]+2304563134&4294967295,C=S+(N<<22&4294967295|N>>>10),N=E+(D^C&(S^D))+R[12]+1804603682&4294967295,E=C+(N<<7&4294967295|N>>>25),N=D+(S^E&(C^S))+R[13]+4254626195&4294967295,D=E+(N<<12&4294967295|N>>>20),N=S+(C^D&(E^C))+R[14]+2792965006&4294967295,S=D+(N<<17&4294967295|N>>>15),N=C+(E^S&(D^E))+R[15]+1236535329&4294967295,C=S+(N<<22&4294967295|N>>>10),N=E+(S^D&(C^S))+R[1]+4129170786&4294967295,E=C+(N<<5&4294967295|N>>>27),N=D+(C^S&(E^C))+R[6]+3225465664&4294967295,D=E+(N<<9&4294967295|N>>>23),N=S+(E^C&(D^E))+R[11]+643717713&4294967295,S=D+(N<<14&4294967295|N>>>18),N=C+(D^E&(S^D))+R[0]+3921069994&4294967295,C=S+(N<<20&4294967295|N>>>12),N=E+(S^D&(C^S))+R[5]+3593408605&4294967295,E=C+(N<<5&4294967295|N>>>27),N=D+(C^S&(E^C))+R[10]+38016083&4294967295,D=E+(N<<9&4294967295|N>>>23),N=S+(E^C&(D^E))+R[15]+3634488961&4294967295,S=D+(N<<14&4294967295|N>>>18),N=C+(D^E&(S^D))+R[4]+3889429448&4294967295,C=S+(N<<20&4294967295|N>>>12),N=E+(S^D&(C^S))+R[9]+568446438&4294967295,E=C+(N<<5&4294967295|N>>>27),N=D+(C^S&(E^C))+R[14]+3275163606&4294967295,D=E+(N<<9&4294967295|N>>>23),N=S+(E^C&(D^E))+R[3]+4107603335&4294967295,S=D+(N<<14&4294967295|N>>>18),N=C+(D^E&(S^D))+R[8]+1163531501&4294967295,C=S+(N<<20&4294967295|N>>>12),N=E+(S^D&(C^S))+R[13]+2850285829&4294967295,E=C+(N<<5&4294967295|N>>>27),N=D+(C^S&(E^C))+R[2]+4243563512&4294967295,D=E+(N<<9&4294967295|N>>>23),N=S+(E^C&(D^E))+R[7]+1735328473&4294967295,S=D+(N<<14&4294967295|N>>>18),N=C+(D^E&(S^D))+R[12]+2368359562&4294967295,C=S+(N<<20&4294967295|N>>>12),N=E+(C^S^D)+R[5]+4294588738&4294967295,E=C+(N<<4&4294967295|N>>>28),N=D+(E^C^S)+R[8]+2272392833&4294967295,D=E+(N<<11&4294967295|N>>>21),N=S+(D^E^C)+R[11]+1839030562&4294967295,S=D+(N<<16&4294967295|N>>>16),N=C+(S^D^E)+R[14]+4259657740&4294967295,C=S+(N<<23&4294967295|N>>>9),N=E+(C^S^D)+R[1]+2763975236&4294967295,E=C+(N<<4&4294967295|N>>>28),N=D+(E^C^S)+R[4]+1272893353&4294967295,D=E+(N<<11&4294967295|N>>>21),N=S+(D^E^C)+R[7]+4139469664&4294967295,S=D+(N<<16&4294967295|N>>>16),N=C+(S^D^E)+R[10]+3200236656&4294967295,C=S+(N<<23&4294967295|N>>>9),N=E+(C^S^D)+R[13]+681279174&4294967295,E=C+(N<<4&4294967295|N>>>28),N=D+(E^C^S)+R[0]+3936430074&4294967295,D=E+(N<<11&4294967295|N>>>21),N=S+(D^E^C)+R[3]+3572445317&4294967295,S=D+(N<<16&4294967295|N>>>16),N=C+(S^D^E)+R[6]+76029189&4294967295,C=S+(N<<23&4294967295|N>>>9),N=E+(C^S^D)+R[9]+3654602809&4294967295,E=C+(N<<4&4294967295|N>>>28),N=D+(E^C^S)+R[12]+3873151461&4294967295,D=E+(N<<11&4294967295|N>>>21),N=S+(D^E^C)+R[15]+530742520&4294967295,S=D+(N<<16&4294967295|N>>>16),N=C+(S^D^E)+R[2]+3299628645&4294967295,C=S+(N<<23&4294967295|N>>>9),N=E+(S^(C|~D))+R[0]+4096336452&4294967295,E=C+(N<<6&4294967295|N>>>26),N=D+(C^(E|~S))+R[7]+1126891415&4294967295,D=E+(N<<10&4294967295|N>>>22),N=S+(E^(D|~C))+R[14]+2878612391&4294967295,S=D+(N<<15&4294967295|N>>>17),N=C+(D^(S|~E))+R[5]+4237533241&4294967295,C=S+(N<<21&4294967295|N>>>11),N=E+(S^(C|~D))+R[12]+1700485571&4294967295,E=C+(N<<6&4294967295|N>>>26),N=D+(C^(E|~S))+R[3]+2399980690&4294967295,D=E+(N<<10&4294967295|N>>>22),N=S+(E^(D|~C))+R[10]+4293915773&4294967295,S=D+(N<<15&4294967295|N>>>17),N=C+(D^(S|~E))+R[1]+2240044497&4294967295,C=S+(N<<21&4294967295|N>>>11),N=E+(S^(C|~D))+R[8]+1873313359&4294967295,E=C+(N<<6&4294967295|N>>>26),N=D+(C^(E|~S))+R[15]+4264355552&4294967295,D=E+(N<<10&4294967295|N>>>22),N=S+(E^(D|~C))+R[6]+2734768916&4294967295,S=D+(N<<15&4294967295|N>>>17),N=C+(D^(S|~E))+R[13]+1309151649&4294967295,C=S+(N<<21&4294967295|N>>>11),N=E+(S^(C|~D))+R[4]+4149444226&4294967295,E=C+(N<<6&4294967295|N>>>26),N=D+(C^(E|~S))+R[11]+3174756917&4294967295,D=E+(N<<10&4294967295|N>>>22),N=S+(E^(D|~C))+R[2]+718787259&4294967295,S=D+(N<<15&4294967295|N>>>17),N=C+(D^(S|~E))+R[9]+3951481745&4294967295,w.g[0]=w.g[0]+E&4294967295,w.g[1]=w.g[1]+(S+(N<<21&4294967295|N>>>11))&4294967295,w.g[2]=w.g[2]+S&4294967295,w.g[3]=w.g[3]+D&4294967295}r.prototype.v=function(w,E){E===void 0&&(E=w.length);const C=E-this.blockSize,R=this.C;let S=this.h,D=0;for(;D<E;){if(S==0)for(;D<=C;)i(this,w,D),D+=this.blockSize;if(typeof w=="string"){for(;D<E;)if(R[S++]=w.charCodeAt(D++),S==this.blockSize){i(this,R),S=0;break}}else for(;D<E;)if(R[S++]=w[D++],S==this.blockSize){i(this,R),S=0;break}}this.h=S,this.o+=E},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var E=1;E<w.length-8;++E)w[E]=0;E=this.o*8;for(var C=w.length-8;C<w.length;++C)w[C]=E&255,E/=256;for(this.v(w),w=Array(16),E=0,C=0;C<4;++C)for(let R=0;R<32;R+=8)w[E++]=this.g[C]>>>R&255;return w};function o(w,E){var C=l;return Object.prototype.hasOwnProperty.call(C,w)?C[w]:C[w]=E(w)}function s(w,E){this.h=E;const C=[];let R=!0;for(let S=w.length-1;S>=0;S--){const D=w[S]|0;R&&D==E||(C[S]=D,R=!1)}this.g=C}var l={};function u(w){return-128<=w&&w<128?o(w,function(E){return new s([E|0],E<0?-1:0)}):new s([w|0],w<0?-1:0)}function f(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return L(f(-w));const E=[];let C=1;for(let R=0;w>=C;R++)E[R]=w/C|0,C*=4294967296;return new s(E,0)}function h(w,E){if(w.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(w.charAt(0)=="-")return L(h(w.substring(1),E));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=f(Math.pow(E,8));let R=p;for(let D=0;D<w.length;D+=8){var S=Math.min(8,w.length-D);const N=parseInt(w.substring(D,D+S),E);S<8?(S=f(Math.pow(E,S)),R=R.j(S).add(f(N))):(R=R.j(C),R=R.add(f(N)))}return R}var p=u(0),m=u(1),v=u(16777216);t=s.prototype,t.m=function(){if(k(this))return-L(this).m();let w=0,E=1;for(let C=0;C<this.g.length;C++){const R=this.i(C);w+=(R>=0?R:4294967296+R)*E,E*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(P(this))return"0";if(k(this))return"-"+L(this).toString(w);const E=f(Math.pow(w,6));var C=this;let R="";for(;;){const S=M(C,E).g;C=A(C,S.j(E));let D=((C.g.length>0?C.g[0]:C.h)>>>0).toString(w);if(C=S,P(C))return D+R;for(;D.length<6;)D="0"+D;R=D+R}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function P(w){if(w.h!=0)return!1;for(let E=0;E<w.g.length;E++)if(w.g[E]!=0)return!1;return!0}function k(w){return w.h==-1}t.l=function(w){return w=A(this,w),k(w)?-1:P(w)?0:1};function L(w){const E=w.g.length,C=[];for(let R=0;R<E;R++)C[R]=~w.g[R];return new s(C,~w.h).add(m)}t.abs=function(){return k(this)?L(this):this},t.add=function(w){const E=Math.max(this.g.length,w.g.length),C=[];let R=0;for(let S=0;S<=E;S++){let D=R+(this.i(S)&65535)+(w.i(S)&65535),N=(D>>>16)+(this.i(S)>>>16)+(w.i(S)>>>16);R=N>>>16,D&=65535,N&=65535,C[S]=N<<16|D}return new s(C,C[C.length-1]&-2147483648?-1:0)};function A(w,E){return w.add(L(E))}t.j=function(w){if(P(this)||P(w))return p;if(k(this))return k(w)?L(this).j(L(w)):L(L(this).j(w));if(k(w))return L(this.j(L(w)));if(this.l(v)<0&&w.l(v)<0)return f(this.m()*w.m());const E=this.g.length+w.g.length,C=[];for(var R=0;R<2*E;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(let S=0;S<w.g.length;S++){const D=this.i(R)>>>16,N=this.i(R)&65535,he=w.i(S)>>>16,Ye=w.i(S)&65535;C[2*R+2*S]+=N*Ye,T(C,2*R+2*S),C[2*R+2*S+1]+=D*Ye,T(C,2*R+2*S+1),C[2*R+2*S+1]+=N*he,T(C,2*R+2*S+1),C[2*R+2*S+2]+=D*he,T(C,2*R+2*S+2)}for(w=0;w<E;w++)C[w]=C[2*w+1]<<16|C[2*w];for(w=E;w<2*E;w++)C[w]=0;return new s(C,0)};function T(w,E){for(;(w[E]&65535)!=w[E];)w[E+1]+=w[E]>>>16,w[E]&=65535,E++}function x(w,E){this.g=w,this.h=E}function M(w,E){if(P(E))throw Error("division by zero");if(P(w))return new x(p,p);if(k(w))return E=M(L(w),E),new x(L(E.g),L(E.h));if(k(E))return E=M(w,L(E)),new x(L(E.g),E.h);if(w.g.length>30){if(k(w)||k(E))throw Error("slowDivide_ only works with positive integers.");for(var C=m,R=E;R.l(w)<=0;)C=V(C),R=V(R);var S=F(C,1),D=F(R,1);for(R=F(R,2),C=F(C,2);!P(R);){var N=D.add(R);N.l(w)<=0&&(S=S.add(C),D=N),R=F(R,1),C=F(C,1)}return E=A(w,S.j(E)),new x(S,E)}for(S=p;w.l(E)>=0;){for(C=Math.max(1,Math.floor(w.m()/E.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),D=f(C),N=D.j(E);k(N)||N.l(w)>0;)C-=R,D=f(C),N=D.j(E);P(D)&&(D=m),S=S.add(D),w=A(w,N)}return new x(S,w)}t.B=function(w){return M(this,w).h},t.and=function(w){const E=Math.max(this.g.length,w.g.length),C=[];for(let R=0;R<E;R++)C[R]=this.i(R)&w.i(R);return new s(C,this.h&w.h)},t.or=function(w){const E=Math.max(this.g.length,w.g.length),C=[];for(let R=0;R<E;R++)C[R]=this.i(R)|w.i(R);return new s(C,this.h|w.h)},t.xor=function(w){const E=Math.max(this.g.length,w.g.length),C=[];for(let R=0;R<E;R++)C[R]=this.i(R)^w.i(R);return new s(C,this.h^w.h)};function V(w){const E=w.g.length+1,C=[];for(let R=0;R<E;R++)C[R]=w.i(R)<<1|w.i(R-1)>>>31;return new s(C,w.h)}function F(w,E){const C=E>>5;E%=32;const R=w.g.length-C,S=[];for(let D=0;D<R;D++)S[D]=E>0?w.i(D+C)>>>E|w.i(D+C+1)<<32-E:w.i(D+C);return new s(S,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,qE=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=h,ir=s}).apply(typeof by<"u"?by:typeof self<"u"?self:typeof window<"u"?window:{});var Tl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HE,Go,$E,zl,Md,zE,WE,KE;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tl=="object"&&Tl];for(var g=0;g<d.length;++g){var _=d[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(d,g){if(g)e:{var _=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var b=d[I];if(!(b in _))break e;_=_[b]}d=d[d.length-1],I=_[d],g=g(I),g!=I&&g!=null&&e(_,d,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(g){var _=[],I;for(I in g)Object.prototype.hasOwnProperty.call(g,I)&&_.push([I,g[I]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},s=this||self;function l(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function u(d,g,_){return d.call.apply(d.bind,arguments)}function f(d,g,_){return f=u,f.apply(null,arguments)}function h(d,g){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function p(d,g){function _(){}_.prototype=g.prototype,d.Z=g.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(I,b,U){for(var H=Array(arguments.length-2),re=2;re<arguments.length;re++)H[re-2]=arguments[re];return g.prototype[b].apply(I,H)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function v(d){const g=d.length;if(g>0){const _=Array(g);for(let I=0;I<g;I++)_[I]=d[I];return _}return[]}function P(d,g){for(let I=1;I<arguments.length;I++){const b=arguments[I];var _=typeof b;if(_=_!="object"?_:b?Array.isArray(b)?"array":_:"null",_=="array"||_=="object"&&typeof b.length=="number"){_=d.length||0;const U=b.length||0;d.length=_+U;for(let H=0;H<U;H++)d[_+H]=b[H]}else d.push(b)}}class k{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function L(d){s.setTimeout(()=>{throw d},0)}function A(){var d=w;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class T{constructor(){this.h=this.g=null}add(g,_){const I=x.get();I.set(g,_),this.h?this.h.next=I:this.g=I,this.h=I}}var x=new k(()=>new M,d=>d.reset());class M{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let V,F=!1,w=new T,E=()=>{const d=Promise.resolve(void 0);V=()=>{d.then(C)}};function C(){for(var d;d=A();){try{d.h.call(d.g)}catch(_){L(_)}var g=x;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}F=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};s.addEventListener("test",_,g),s.removeEventListener("test",_,g)}catch{}return d}();function N(d){return/^[\s\xa0]*$/.test(d)}function he(d,g){S.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}p(he,S),he.prototype.init=function(d,g){const _=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(_=="mouseover"?g=d.fromElement:_=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ye="closure_listenable_"+(Math.random()*1e6|0),J=0;function ie(d,g,_,I,b){this.listener=d,this.proxy=null,this.src=g,this.type=_,this.capture=!!I,this.ha=b,this.key=++J,this.da=this.fa=!1}function O(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Q(d,g,_){for(const I in d)g.call(_,d[I],I,d)}function X(d,g){for(const _ in d)g.call(void 0,d[_],_,d)}function de(d){const g={};for(const _ in d)g[_]=d[_];return g}const ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qt(d,g){let _,I;for(let b=1;b<arguments.length;b++){I=arguments[b];for(_ in I)d[_]=I[_];for(let U=0;U<ge.length;U++)_=ge[U],Object.prototype.hasOwnProperty.call(I,_)&&(d[_]=I[_])}}function Mt(d){this.src=d,this.g={},this.h=0}Mt.prototype.add=function(d,g,_,I,b){const U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);const H=Ht(d,g,I,b);return H>-1?(g=d[H],_||(g.fa=!1)):(g=new ie(g,this.src,U,!!I,b),g.fa=_,d.push(g)),g};function Ir(d,g){const _=g.type;if(_ in d.g){var I=d.g[_],b=Array.prototype.indexOf.call(I,g,void 0),U;(U=b>=0)&&Array.prototype.splice.call(I,b,1),U&&(O(g),d.g[_].length==0&&(delete d.g[_],d.h--))}}function Ht(d,g,_,I){for(let b=0;b<d.length;++b){const U=d[b];if(!U.da&&U.listener==g&&U.capture==!!_&&U.ha==I)return b}return-1}var Mn="closure_lm_"+(Math.random()*1e6|0),Iu={};function Bh(d,g,_,I,b){if(Array.isArray(g)){for(let U=0;U<g.length;U++)Bh(d,g[U],_,I,b);return null}return _=$h(_),d&&d[Ye]?d.J(g,_,l(I)?!!I.capture:!1,b):yI(d,g,_,!1,I,b)}function yI(d,g,_,I,b,U){if(!g)throw Error("Invalid event type");const H=l(b)?!!b.capture:!!b;let re=Su(d);if(re||(d[Mn]=re=new Mt(d)),_=re.add(g,_,I,H,U),_.proxy)return _;if(I=_I(),_.proxy=I,I.src=d,I.listener=_,d.addEventListener)D||(b=H),b===void 0&&(b=!1),d.addEventListener(g.toString(),I,b);else if(d.attachEvent)d.attachEvent(Hh(g.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function _I(){function d(_){return g.call(d.src,d.listener,_)}const g=vI;return d}function qh(d,g,_,I,b){if(Array.isArray(g))for(var U=0;U<g.length;U++)qh(d,g[U],_,I,b);else I=l(I)?!!I.capture:!!I,_=$h(_),d&&d[Ye]?(d=d.i,U=String(g).toString(),U in d.g&&(g=d.g[U],_=Ht(g,_,I,b),_>-1&&(O(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete d.g[U],d.h--)))):d&&(d=Su(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Ht(g,_,I,b)),(_=d>-1?g[d]:null)&&wu(_))}function wu(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Ye])Ir(g.i,d);else{var _=d.type,I=d.proxy;g.removeEventListener?g.removeEventListener(_,I,d.capture):g.detachEvent?g.detachEvent(Hh(_),I):g.addListener&&g.removeListener&&g.removeListener(I),(_=Su(g))?(Ir(_,d),_.h==0&&(_.src=null,g[Mn]=null)):O(d)}}}function Hh(d){return d in Iu?Iu[d]:Iu[d]="on"+d}function vI(d,g){if(d.da)d=!0;else{g=new he(g,this);const _=d.listener,I=d.ha||d.src;d.fa&&wu(d),d=_.call(I,g)}return d}function Su(d){return d=d[Mn],d instanceof Mt?d:null}var Cu="__closure_events_fn_"+(Math.random()*1e9>>>0);function $h(d){return typeof d=="function"?d:(d[Cu]||(d[Cu]=function(g){return d.handleEvent(g)}),d[Cu])}function rt(){R.call(this),this.i=new Mt(this),this.M=this,this.G=null}p(rt,R),rt.prototype[Ye]=!0,rt.prototype.removeEventListener=function(d,g,_,I){qh(this,d,g,_,I)};function ft(d,g){var _,I=d.G;if(I)for(_=[];I;I=I.G)_.push(I);if(d=d.M,I=g.type||g,typeof g=="string")g=new S(g,d);else if(g instanceof S)g.target=g.target||d;else{var b=g;g=new S(I,d),qt(g,b)}b=!0;let U,H;if(_)for(H=_.length-1;H>=0;H--)U=g.g=_[H],b=$s(U,I,!0,g)&&b;if(U=g.g=d,b=$s(U,I,!0,g)&&b,b=$s(U,I,!1,g)&&b,_)for(H=0;H<_.length;H++)U=g.g=_[H],b=$s(U,I,!1,g)&&b}rt.prototype.N=function(){if(rt.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const _=d.g[g];for(let I=0;I<_.length;I++)O(_[I]);delete d.g[g],d.h--}}this.G=null},rt.prototype.J=function(d,g,_,I){return this.i.add(String(d),g,!1,_,I)},rt.prototype.K=function(d,g,_,I){return this.i.add(String(d),g,!0,_,I)};function $s(d,g,_,I){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let b=!0;for(let U=0;U<g.length;++U){const H=g[U];if(H&&!H.da&&H.capture==_){const re=H.listener,qe=H.ha||H.src;H.fa&&Ir(d.i,H),b=re.call(qe,I)!==!1&&b}}return b&&!I.defaultPrevented}function EI(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:s.setTimeout(d,g||0)}function zh(d){d.g=EI(()=>{d.g=null,d.i&&(d.i=!1,zh(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class TI extends R{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:zh(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function so(d){R.call(this),this.h=d,this.g={}}p(so,R);var Wh=[];function Kh(d){Q(d.g,function(g,_){this.g.hasOwnProperty(_)&&wu(g)},d),d.g={}}so.prototype.N=function(){so.Z.N.call(this),Kh(this)},so.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xu=s.JSON.stringify,II=s.JSON.parse,wI=class{stringify(d){return s.JSON.stringify(d,void 0)}parse(d){return s.JSON.parse(d,void 0)}};function Jh(){}function Qh(){}var lo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Au(){S.call(this,"d")}p(Au,S);function Ru(){S.call(this,"c")}p(Ru,S);var wr={},Yh=null;function zs(){return Yh=Yh||new rt}wr.Ia="serverreachability";function Xh(d){S.call(this,wr.Ia,d)}p(Xh,S);function ao(d){const g=zs();ft(g,new Xh(g))}wr.STAT_EVENT="statevent";function jh(d,g){S.call(this,wr.STAT_EVENT,d),this.stat=g}p(jh,S);function ht(d){const g=zs();ft(g,new jh(g,d))}wr.Ja="timingevent";function Zh(d,g){S.call(this,wr.Ja,d),this.size=g}p(Zh,S);function uo(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){d()},g)}function co(){this.g=!0}co.prototype.ua=function(){this.g=!1};function SI(d,g,_,I,b,U){d.info(function(){if(d.g)if(U){var H="",re=U.split("&");for(let ye=0;ye<re.length;ye++){var qe=re[ye].split("=");if(qe.length>1){const We=qe[0];qe=qe[1];const tn=We.split("_");H=tn.length>=2&&tn[1]=="type"?H+(We+"="+qe+"&"):H+(We+"=redacted&")}}}else H=null;else H=U;return"XMLHTTP REQ ("+I+") [attempt "+b+"]: "+g+`
`+_+`
`+H})}function CI(d,g,_,I,b,U,H){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+b+"]: "+g+`
`+_+`
`+U+" "+H})}function Zr(d,g,_,I){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+AI(d,_)+(I?" "+I:"")})}function xI(d,g){d.info(function(){return"TIMEOUT: "+g})}co.prototype.info=function(){};function AI(d,g){if(!d.g)return g;if(!g)return null;try{const U=JSON.parse(g);if(U){for(d=0;d<U.length;d++)if(Array.isArray(U[d])){var _=U[d];if(!(_.length<2)){var I=_[1];if(Array.isArray(I)&&!(I.length<1)){var b=I[0];if(b!="noop"&&b!="stop"&&b!="close")for(let H=1;H<I.length;H++)I[H]=""}}}}return xu(U)}catch{return g}}var Ws={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ep={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},tp;function Nu(){}p(Nu,Jh),Nu.prototype.g=function(){return new XMLHttpRequest},tp=new Nu;function fo(d){return encodeURIComponent(String(d))}function RI(d){var g=1;d=d.split(":");const _=[];for(;g>0&&d.length;)_.push(d.shift()),g--;return d.length&&_.push(d.join(":")),_}function Vn(d,g,_,I){this.j=d,this.i=g,this.l=_,this.S=I||1,this.V=new so(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new np}function np(){this.i=null,this.g="",this.h=!1}var rp={},Pu={};function ku(d,g,_){d.M=1,d.A=Js(en(g)),d.u=_,d.R=!0,ip(d,null)}function ip(d,g){d.F=Date.now(),Ks(d),d.B=en(d.A);var _=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),yp(_.i,"t",I),d.C=0,_=d.j.L,d.h=new np,d.g=Lp(d.j,_?g:null,!d.u),d.P>0&&(d.O=new TI(f(d.Y,d,d.g),d.P)),g=d.V,_=d.g,I=d.ba;var b="readystatechange";Array.isArray(b)||(b&&(Wh[0]=b.toString()),b=Wh);for(let U=0;U<b.length;U++){const H=Bh(_,b[U],I||g.handleEvent,!1,g.h||g);if(!H)break;g.g[H.key]=H}g=d.J?de(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),ao(),SI(d.i,d.v,d.B,d.l,d.S,d.u)}Vn.prototype.ba=function(d){d=d.target;const g=this.O;g&&Fn(d)==3?g.j():this.Y(d)},Vn.prototype.Y=function(d){try{if(d==this.g)e:{const re=Fn(this.g),qe=this.g.ya(),ye=this.g.ca();if(!(re<3)&&(re!=3||this.g&&(this.h.h||this.g.la()||Sp(this.g)))){this.K||re!=4||qe==7||(qe==8||ye<=0?ao(3):ao(2)),Du(this);var g=this.g.ca();this.X=g;var _=NI(this);if(this.o=g==200,CI(this.i,this.v,this.B,this.l,this.S,re,g),this.o){if(this.U&&!this.L){t:{if(this.g){var I,b=this.g;if((I=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(I)){var U=I;break t}}U=null}if(d=U)Zr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mu(this,d);else{this.o=!1,this.m=3,ht(12),Sr(this),ho(this);break e}}if(this.R){d=!0;let We;for(;!this.K&&this.C<_.length;)if(We=PI(this,_),We==Pu){re==4&&(this.m=4,ht(14),d=!1),Zr(this.i,this.l,null,"[Incomplete Response]");break}else if(We==rp){this.m=4,ht(15),Zr(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else Zr(this.i,this.l,We,null),Mu(this,We);if(op(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),re!=4||_.length!=0||this.h.h||(this.m=1,ht(16),d=!1),this.o=this.o&&d,!d)Zr(this.i,this.l,_,"[Invalid Chunked Response]"),Sr(this),ho(this);else if(_.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Bu(H),H.P=!0,ht(11))}}else Zr(this.i,this.l,_,null),Mu(this,_);re==4&&Sr(this),this.o&&!this.K&&(re==4?kp(this.j,this):(this.o=!1,Ks(this)))}else $I(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),Sr(this),ho(this)}}}catch{}finally{}};function NI(d){if(!op(d))return d.g.la();const g=Sp(d.g);if(g==="")return"";let _="";const I=g.length,b=Fn(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Sr(d),ho(d),"";d.h.i=new s.TextDecoder}for(let U=0;U<I;U++)d.h.h=!0,_+=d.h.i.decode(g[U],{stream:!(b&&U==I-1)});return g.length=0,d.h.g+=_,d.C=0,d.h.g}function op(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function PI(d,g){var _=d.C,I=g.indexOf(`
`,_);return I==-1?Pu:(_=Number(g.substring(_,I)),isNaN(_)?rp:(I+=1,I+_>g.length?Pu:(g=g.slice(I,I+_),d.C=I+_,g)))}Vn.prototype.cancel=function(){this.K=!0,Sr(this)};function Ks(d){d.T=Date.now()+d.H,sp(d,d.H)}function sp(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=uo(f(d.aa,d),g)}function Du(d){d.D&&(s.clearTimeout(d.D),d.D=null)}Vn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(xI(this.i,this.B),this.M!=2&&(ao(),ht(17)),Sr(this),this.m=2,ho(this)):sp(this,this.T-d)};function ho(d){d.j.I==0||d.K||kp(d.j,d)}function Sr(d){Du(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,Kh(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function Mu(d,g){try{var _=d.j;if(_.I!=0&&(_.g==d||Vu(_.h,d))){if(!d.L&&Vu(_.h,d)&&_.I==3){try{var I=_.Ba.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var b=I;if(b[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)Zs(_),Xs(_);else break e;Gu(_),ht(18)}}else _.xa=b[1],0<_.xa-_.K&&b[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=uo(f(_.Va,_),6e3));up(_.h)<=1&&_.ta&&(_.ta=void 0)}else xr(_,11)}else if((d.L||_.g==d)&&Zs(_),!N(g))for(b=_.Ba.g.parse(g),g=0;g<b.length;g++){let ye=b[g];const We=ye[0];if(!(We<=_.K))if(_.K=We,ye=ye[1],_.I==2)if(ye[0]=="c"){_.M=ye[1],_.ba=ye[2];const tn=ye[3];tn!=null&&(_.ka=tn,_.j.info("VER="+_.ka));const Ar=ye[4];Ar!=null&&(_.za=Ar,_.j.info("SVER="+_.za));const Un=ye[5];Un!=null&&typeof Un=="number"&&Un>0&&(I=1.5*Un,_.O=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const On=d.g;if(On){const tl=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tl){var U=I.h;U.g||tl.indexOf("spdy")==-1&&tl.indexOf("quic")==-1&&tl.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(Lu(U,U.h),U.h=null))}if(I.G){const qu=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;qu&&(I.wa=qu,Ie(I.J,I.G,qu))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),I=_;var H=d;if(I.na=Vp(I,I.L?I.ba:null,I.W),H.L){cp(I.h,H);var re=H,qe=I.O;qe&&(re.H=qe),re.D&&(Du(re),Ks(re)),I.g=H}else Np(I);_.i.length>0&&js(_)}else ye[0]!="stop"&&ye[0]!="close"||xr(_,7);else _.I==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?xr(_,7):Ou(_):ye[0]!="noop"&&_.l&&_.l.qa(ye),_.A=0)}}ao(4)}catch{}}var kI=class{constructor(d,g){this.g=d,this.map=g}};function lp(d){this.l=d||10,s.PerformanceNavigationTiming?(d=s.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ap(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function up(d){return d.h?1:d.g?d.g.size:0}function Vu(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Lu(d,g){d.g?d.g.add(g):d.h=g}function cp(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}lp.prototype.cancel=function(){if(this.i=dp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function dp(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const _ of d.g.values())g=g.concat(_.G);return g}return v(d.i)}var fp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function DI(d,g){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const I=d[_].indexOf("=");let b,U=null;I>=0?(b=d[_].substring(0,I),U=d[_].substring(I+1)):b=d[_],g(b,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ln(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof Ln?(this.l=d.l,po(this,d.j),this.o=d.o,this.g=d.g,mo(this,d.u),this.h=d.h,bu(this,_p(d.i)),this.m=d.m):d&&(g=String(d).match(fp))?(this.l=!1,po(this,g[1]||"",!0),this.o=go(g[2]||""),this.g=go(g[3]||"",!0),mo(this,g[4]),this.h=go(g[5]||"",!0),bu(this,g[6]||"",!0),this.m=go(g[7]||"")):(this.l=!1,this.i=new _o(null,this.l))}Ln.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(yo(g,hp,!0),":");var _=this.g;return(_||g=="file")&&(d.push("//"),(g=this.o)&&d.push(yo(g,hp,!0),"@"),d.push(fo(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(yo(_,_.charAt(0)=="/"?LI:VI,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",yo(_,FI)),d.join("")},Ln.prototype.resolve=function(d){const g=en(this);let _=!!d.j;_?po(g,d.j):_=!!d.o,_?g.o=d.o:_=!!d.g,_?g.g=d.g:_=d.u!=null;var I=d.h;if(_)mo(g,d.u);else if(_=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var b=g.h.lastIndexOf("/");b!=-1&&(I=g.h.slice(0,b+1)+I)}if(b=I,b==".."||b==".")I="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){I=b.lastIndexOf("/",0)==0,b=b.split("/");const U=[];for(let H=0;H<b.length;){const re=b[H++];re=="."?I&&H==b.length&&U.push(""):re==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),I&&H==b.length&&U.push("")):(U.push(re),I=!0)}I=U.join("/")}else I=b}return _?g.h=I:_=d.i.toString()!=="",_?bu(g,_p(d.i)):_=!!d.m,_&&(g.m=d.m),g};function en(d){return new Ln(d)}function po(d,g,_){d.j=_?go(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function mo(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function bu(d,g,_){g instanceof _o?(d.i=g,UI(d.i,d.l)):(_||(g=yo(g,bI)),d.i=new _o(g,d.l))}function Ie(d,g,_){d.i.set(g,_)}function Js(d){return Ie(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function go(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function yo(d,g,_){return typeof d=="string"?(d=encodeURI(d).replace(g,MI),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function MI(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var hp=/[#\/\?@]/g,VI=/[#\?:]/g,LI=/[#\?]/g,bI=/[#\?@]/g,FI=/#/g;function _o(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Cr(d){d.g||(d.g=new Map,d.h=0,d.i&&DI(d.i,function(g,_){d.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}t=_o.prototype,t.add=function(d,g){Cr(this),this.i=null,d=ei(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(g),this.h+=1,this};function pp(d,g){Cr(d),g=ei(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function mp(d,g){return Cr(d),g=ei(d,g),d.g.has(g)}t.forEach=function(d,g){Cr(this),this.g.forEach(function(_,I){_.forEach(function(b){d.call(g,b,I,this)},this)},this)};function gp(d,g){Cr(d);let _=[];if(typeof g=="string")mp(d,g)&&(_=_.concat(d.g.get(ei(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)_=_.concat(d[g]);return _}t.set=function(d,g){return Cr(this),this.i=null,d=ei(this,d),mp(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=gp(this,d),d.length>0?String(d[0]):g):g};function yp(d,g,_){pp(d,g),_.length>0&&(d.i=null,d.g.set(ei(d,g),v(_)),d.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let I=0;I<g.length;I++){var _=g[I];const b=fo(_);_=gp(this,_);for(let U=0;U<_.length;U++){let H=b;_[U]!==""&&(H+="="+fo(_[U])),d.push(H)}}return this.i=d.join("&")};function _p(d){const g=new _o;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function ei(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function UI(d,g){g&&!d.j&&(Cr(d),d.i=null,d.g.forEach(function(_,I){const b=I.toLowerCase();I!=b&&(pp(this,I),yp(this,b,_))},d)),d.j=g}function OI(d,g){const _=new co;if(s.Image){const I=new Image;I.onload=h(bn,_,"TestLoadImage: loaded",!0,g,I),I.onerror=h(bn,_,"TestLoadImage: error",!1,g,I),I.onabort=h(bn,_,"TestLoadImage: abort",!1,g,I),I.ontimeout=h(bn,_,"TestLoadImage: timeout",!1,g,I),s.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else g(!1)}function GI(d,g){const _=new co,I=new AbortController,b=setTimeout(()=>{I.abort(),bn(_,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:I.signal}).then(U=>{clearTimeout(b),U.ok?bn(_,"TestPingServer: ok",!0,g):bn(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(b),bn(_,"TestPingServer: error",!1,g)})}function bn(d,g,_,I,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),I(_)}catch{}}function BI(){this.g=new wI}function Fu(d){this.i=d.Sb||null,this.h=d.ab||!1}p(Fu,Jh),Fu.prototype.g=function(){return new Qs(this.i,this.h)};function Qs(d,g){rt.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Qs,rt),t=Qs.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,Eo(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||s).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vo(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Eo(this)),this.g&&(this.readyState=3,Eo(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vp(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function vp(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?vo(this):Eo(this),this.readyState==3&&vp(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,vo(this))},t.Na=function(d){this.g&&(this.response=d,vo(this))},t.ga=function(){this.g&&vo(this)};function vo(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Eo(d)}t.setRequestHeader=function(d,g){this.A.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=g.next();return d.join(`\r
`)};function Eo(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Qs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Ep(d){let g="";return Q(d,function(_,I){g+=I,g+=":",g+=_,g+=`\r
`}),g}function Uu(d,g,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Ep(_),typeof d=="string"?_!=null&&fo(_):Ie(d,g,_))}function Me(d){rt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Me,rt);var qI=/^https?$/i,HI=["POST","PUT"];t=Me.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,g,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():tp.g(),this.g.onreadystatechange=m(f(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(U){Tp(this,U);return}if(d=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var b in I)_.set(b,I[b]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const U of I.keys())_.set(U,I.get(U));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(U=>U.toLowerCase()=="content-type"),b=s.FormData&&d instanceof s.FormData,!(Array.prototype.indexOf.call(HI,g,void 0)>=0)||I||b||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,H]of _)this.g.setRequestHeader(U,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(U){Tp(this,U)}};function Tp(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,Ip(d),Ys(d)}function Ip(d){d.A||(d.A=!0,ft(d,"complete"),ft(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,ft(this,"complete"),ft(this,"abort"),Ys(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ys(this,!0)),Me.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?wp(this):this.Xa())},t.Xa=function(){wp(this)};function wp(d){if(d.h&&typeof o<"u"){if(d.v&&Fn(d)==4)setTimeout(d.Ca.bind(d),0);else if(ft(d,"readystatechange"),Fn(d)==4){d.h=!1;try{const U=d.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var I;if(I=U===0){let H=String(d.D).match(fp)[1]||null;!H&&s.self&&s.self.location&&(H=s.self.location.protocol.slice(0,-1)),I=!qI.test(H?H.toLowerCase():"")}_=I}if(_)ft(d,"complete"),ft(d,"success");else{d.o=6;try{var b=Fn(d)>2?d.g.statusText:""}catch{b=""}d.l=b+" ["+d.ca()+"]",Ip(d)}}finally{Ys(d)}}}}function Ys(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,g||ft(d,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Fn(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Fn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),II(g)}};function Sp(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function $I(d){const g={};d=(d.g&&Fn(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(N(d[I]))continue;var _=RI(d[I]);const b=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const U=g[b]||[];g[b]=U,U.push(_)}X(g,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function To(d,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||g}function Cp(d){this.za=0,this.i=[],this.j=new co,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=To("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=To("baseRetryDelayMs",5e3,d),this.Za=To("retryDelaySeedMs",1e4,d),this.Ta=To("forwardChannelMaxRetries",2,d),this.va=To("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new lp(d&&d.concurrentRequestLimit),this.Ba=new BI,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Cp.prototype,t.ka=8,t.I=1,t.connect=function(d,g,_,I){ht(0),this.W=d,this.H=g||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.J=Vp(this,null,this.W),js(this)};function Ou(d){if(xp(d),d.I==3){var g=d.V++,_=en(d.J);if(Ie(_,"SID",d.M),Ie(_,"RID",g),Ie(_,"TYPE","terminate"),Io(d,_),g=new Vn(d,d.j,g),g.M=2,g.A=Js(en(_)),_=!1,s.navigator&&s.navigator.sendBeacon)try{_=s.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&s.Image&&(new Image().src=g.A,_=!0),_||(g.g=Lp(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Ks(g)}Mp(d)}function Xs(d){d.g&&(Bu(d),d.g.cancel(),d.g=null)}function xp(d){Xs(d),d.v&&(s.clearTimeout(d.v),d.v=null),Zs(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&s.clearTimeout(d.m),d.m=null)}function js(d){if(!ap(d.h)&&!d.m){d.m=!0;var g=d.Ea;V||E(),F||(V(),F=!0),w.add(g,d),d.D=0}}function zI(d,g){return up(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=uo(f(d.Ea,d,g),Dp(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const b=new Vn(this,this.j,d);let U=this.o;if(this.U&&(U?(U=de(U),qt(U,this.U)):U=this.U),this.u!==null||this.R||(b.J=U,U=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Rp(this,b,g),_=en(this.J),Ie(_,"RID",d),Ie(_,"CVER",22),this.G&&Ie(_,"X-HTTP-Session-Id",this.G),Io(this,_),U&&(this.R?g="headers="+fo(Ep(U))+"&"+g:this.u&&Uu(_,this.u,U)),Lu(this.h,b),this.Ra&&Ie(_,"TYPE","init"),this.S?(Ie(_,"$req",g),Ie(_,"SID","null"),b.U=!0,ku(b,_,null)):ku(b,_,g),this.I=2}}else this.I==3&&(d?Ap(this,d):this.i.length==0||ap(this.h)||Ap(this))};function Ap(d,g){var _;g?_=g.l:_=d.V++;const I=en(d.J);Ie(I,"SID",d.M),Ie(I,"RID",_),Ie(I,"AID",d.K),Io(d,I),d.u&&d.o&&Uu(I,d.u,d.o),_=new Vn(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),g&&(d.i=g.G.concat(d.i)),g=Rp(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Lu(d.h,_),ku(_,I,g)}function Io(d,g){d.H&&Q(d.H,function(_,I){Ie(g,I,_)}),d.l&&Q({},function(_,I){Ie(g,I,_)})}function Rp(d,g,_){_=Math.min(d.i.length,_);const I=d.l?f(d.l.Ka,d.l,d):null;e:{var b=d.i;let re=-1;for(;;){const qe=["count="+_];re==-1?_>0?(re=b[0].g,qe.push("ofs="+re)):re=0:qe.push("ofs="+re);let ye=!0;for(let We=0;We<_;We++){var U=b[We].g;const tn=b[We].map;if(U-=re,U<0)re=Math.max(0,b[We].g-100),ye=!1;else try{U="req"+U+"_"||"";try{var H=tn instanceof Map?tn:Object.entries(tn);for(const[Ar,Un]of H){let On=Un;l(Un)&&(On=xu(Un)),qe.push(U+Ar+"="+encodeURIComponent(On))}}catch(Ar){throw qe.push(U+"type="+encodeURIComponent("_badmap")),Ar}}catch{I&&I(tn)}}if(ye){H=qe.join("&");break e}}H=void 0}return d=d.i.splice(0,_),g.G=d,H}function Np(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;V||E(),F||(V(),F=!0),w.add(g,d),d.A=0}}function Gu(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=uo(f(d.Da,d),Dp(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,Pp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=uo(f(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),Xs(this),Pp(this))};function Bu(d){d.B!=null&&(s.clearTimeout(d.B),d.B=null)}function Pp(d){d.g=new Vn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=en(d.na);Ie(g,"RID","rpc"),Ie(g,"SID",d.M),Ie(g,"AID",d.K),Ie(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&Ie(g,"TO",d.ia),Ie(g,"TYPE","xmlhttp"),Io(d,g),d.u&&d.o&&Uu(g,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=Js(en(g)),_.u=null,_.R=!0,ip(_,d)}t.Va=function(){this.C!=null&&(this.C=null,Xs(this),Gu(this),ht(19))};function Zs(d){d.C!=null&&(s.clearTimeout(d.C),d.C=null)}function kp(d,g){var _=null;if(d.g==g){Zs(d),Bu(d),d.g=null;var I=2}else if(Vu(d.h,g))_=g.G,cp(d.h,g),I=1;else return;if(d.I!=0){if(g.o)if(I==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var b=d.D;I=zs(),ft(I,new Zh(I,_)),js(d)}else Np(d);else if(b=g.m,b==3||b==0&&g.X>0||!(I==1&&zI(d,g)||I==2&&Gu(d)))switch(_&&_.length>0&&(g=d.h,g.i=g.i.concat(_)),b){case 1:xr(d,5);break;case 4:xr(d,10);break;case 3:xr(d,6);break;default:xr(d,2)}}}function Dp(d,g){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*g}function xr(d,g){if(d.j.info("Error code "+g),g==2){var _=f(d.bb,d),I=d.Ua;const b=!I;I=new Ln(I||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||po(I,"https"),Js(I),b?OI(I.toString(),_):GI(I.toString(),_)}else ht(2);d.I=0,d.l&&d.l.pa(g),Mp(d),xp(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Mp(d){if(d.I=0,d.ja=[],d.l){const g=dp(d.h);(g.length!=0||d.i.length!=0)&&(P(d.ja,g),P(d.ja,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.oa()}}function Vp(d,g,_){var I=_ instanceof Ln?en(_):new Ln(_);if(I.g!="")g&&(I.g=g+"."+I.g),mo(I,I.u);else{var b=s.location;I=b.protocol,g=g?g+"."+b.hostname:b.hostname,b=+b.port;const U=new Ln(null);I&&po(U,I),g&&(U.g=g),b&&mo(U,b),_&&(U.h=_),I=U}return _=d.G,g=d.wa,_&&g&&Ie(I,_,g),Ie(I,"VER",d.ka),Io(d,I),I}function Lp(d,g,_){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new Me(new Fu({ab:_})):new Me(d.ma),g.Fa(d.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bp(){}t=bp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function el(){}el.prototype.g=function(d,g){return new Ct(d,g)};function Ct(d,g){rt.call(this),this.g=new Cp(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!N(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!N(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new ti(this)}p(Ct,rt),Ct.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){Ou(this.g)},Ct.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=xu(d),d=_);g.i.push(new kI(g.Ya++,d)),g.I==3&&js(g)},Ct.prototype.N=function(){this.g.l=null,delete this.j,Ou(this.g),delete this.g,Ct.Z.N.call(this)};function Fp(d){Au.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const _ in g){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}p(Fp,Au);function Up(){Ru.call(this),this.status=1}p(Up,Ru);function ti(d){this.g=d}p(ti,bp),ti.prototype.ra=function(){ft(this.g,"a")},ti.prototype.qa=function(d){ft(this.g,new Fp(d))},ti.prototype.pa=function(d){ft(this.g,new Up)},ti.prototype.oa=function(){ft(this.g,"b")},el.prototype.createWebChannel=el.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,KE=function(){return new el},WE=function(){return zs()},zE=wr,Md={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ws.NO_ERROR=0,Ws.TIMEOUT=8,Ws.HTTP_ERROR=6,zl=Ws,ep.COMPLETE="complete",$E=ep,Qh.EventType=lo,lo.OPEN="a",lo.CLOSE="b",lo.ERROR="c",lo.MESSAGE="d",rt.prototype.listen=rt.prototype.J,Go=Qh,Me.prototype.listenOnce=Me.prototype.K,Me.prototype.getLastError=Me.prototype.Ha,Me.prototype.getLastErrorCode=Me.prototype.ya,Me.prototype.getStatus=Me.prototype.ca,Me.prototype.getResponseJson=Me.prototype.La,Me.prototype.getResponseText=Me.prototype.la,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Fa,HE=Me}).apply(typeof Tl<"u"?Tl:typeof self<"u"?self:typeof window<"u"?window:{});const Fy="@firebase/firestore",Uy="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let to="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new bE("@firebase/firestore");function ii(){return $r.logLevel}function W(t,...e){if($r.logLevel<=ue.DEBUG){const n=e.map(oh);$r.debug(`Firestore (${to}): ${t}`,...n)}}function Rn(t,...e){if($r.logLevel<=ue.ERROR){const n=e.map(oh);$r.error(`Firestore (${to}): ${t}`,...n)}}function qi(t,...e){if($r.logLevel<=ue.WARN){const n=e.map(oh);$r.warn(`Firestore (${to}): ${t}`,...n)}}function oh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,JE(t,r,n)}function JE(t,e,n){let r=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Rn(r),new Error(r)}function pe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||JE(e,i,r)}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends eo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}}class CD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class xD{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new or;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new or,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new or)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string",31837,{l:r}),new QE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string",2055,{h:e}),new lt(e)}}class AD{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class RD{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new AD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Oy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ND{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lD(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){pe(this.o===void 0,3512);const r=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,W("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Oy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Oy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=PD(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function se(t,e){return t<e?-1:t>e?1:0}function Vd(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return vc(i)===vc(o)?se(i,o):vc(i)?1:-1}return se(t.length,e.length)}const kD=55296,DD=57343;function vc(t){const e=t.charCodeAt(0);return e>=kD&&e<=DD}function Hi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="__name__";class sn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=sn.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return se(e.length,n.length)}static compareSegments(e,n){const r=sn.isNumericId(e),i=sn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?sn.extractNumericId(e).compare(sn.extractNumericId(n)):Vd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ir.fromString(e.substring(4,e.length-2))}}class Ee extends sn{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const MD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends sn{construct(e,n,r){return new Ze(e,n,r)}static isValidIdentifier(e){return MD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Gy}static keyField(){return new Ze([Gy])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new z(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new z(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new z(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ee.fromString(e))}static fromName(e){return new Y(Ee.fromString(e).popFirst(5))}static empty(){return new Y(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ee(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(t,e,n){if(!n)throw new z(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VD(t,e,n,r){if(e===!0&&r===!0)throw new z(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function By(t){if(!Y.isDocumentKey(t))throw new z(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qy(t){if(Y.isDocumentKey(t))throw new z(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function XE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function lu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function ur(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lu(t);throw new z(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t,e){const n={typeString:t};return e&&(n.value=e),n}function Fs(t,e){if(!XE(t))throw new z(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new z(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=-62135596800,$y=1e6;class xe{static now(){return xe.fromMillis(Date.now())}static fromDate(e){return xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*$y);return new xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Hy)throw new z(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$y}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Fs(e,xe._jsonSchema))return new xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Hy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xe._jsonSchemaVersion="firestore/timestamp/1.0",xe._jsonSchema={type:Ge("string",xe._jsonSchemaVersion),seconds:Ge("number"),nanoseconds:Ge("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{static fromTimestamp(e){return new ee(e)}static min(){return new ee(new xe(0,0))}static max(){return new ee(new xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=-1;function LD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new xe(n+1,0):new xe(n,r));return new cr(i,Y.empty(),e)}function bD(t){return new cr(t.readTime,t.key,ws)}class cr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new cr(ee.min(),Y.empty(),ws)}static max(){return new cr(ee.max(),Y.empty(),ws)}}function FD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==UD)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let i=0,o=0,s=!1;e.forEach(l=>{++i,l.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(i=>i?B.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new B((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let u=0;u<o;u++){const f=u;n(e[f]).next(h=>{s[f]=h,++l,l===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new B((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function GD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ro(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}au.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh=-1;function uu(t){return t==null}function Pa(t){return t===0&&1/t==-1/0}function BD(t){return typeof t=="number"&&Number.isInteger(t)&&!Pa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="";function qD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=zy(e)),e=HD(t.get(n),e);return zy(e)}function HD(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case jE:n+="";break;default:n+=o}}return n}function zy(t){return t+jE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Er(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ZE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||je.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,je.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Il(this.root,e,this.comparator,!1)}getReverseIterator(){return new Il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Il(this.root,e,this.comparator,!0)}}class Il{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class je{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??je.RED,this.left=i??je.EMPTY,this.right=o??je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new je(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return je.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}je.EMPTY=null,je.RED=!0,je.BLACK=!1;je.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ky(this.data.getIterator())}getIteratorFrom(e){return new Ky(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class Ky{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new Rt([])}unionWith(e){let n=new ze(Ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Hi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new eT("Invalid base64 string: "+o):o}}(e);return new nt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const $D=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(t){if(pe(!!t,39018),typeof t=="string"){let e=0;const n=$D.exec(t);if(pe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fr(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="server_timestamp",nT="__type__",rT="__previous_value__",iT="__local_write_time__";function ah(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[nT])==null?void 0:r.stringValue)===tT}function cu(t){const e=t.mapValue.fields[rT];return ah(e)?cu(e):e}function Ss(t){const e=dr(t.mapValue.fields[iT].timestampValue);return new xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,n,r,i,o,s,l,u,f,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=h}}const Ld="(default)";class Cs{constructor(e,n){this.projectId=e,this.database=n||Ld}static empty(){return new Cs("","")}get isDefaultDatabase(){return this.database===Ld}isEqual(e){return e instanceof Cs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="__type__",WD="__max__",wl={mapValue:{}},sT="__vector__",ka="value";function hr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ah(t)?4:JD(t)?9007199254740991:KD(t)?10:11:Z(28295,{value:t})}function mn(t,e){if(t===e)return!0;const n=hr(t);if(n!==hr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ss(t).isEqual(Ss(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=dr(i.timestampValue),l=dr(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return fr(i.bytesValue).isEqual(fr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Le(i.geoPointValue.latitude)===Le(o.geoPointValue.latitude)&&Le(i.geoPointValue.longitude)===Le(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Le(i.integerValue)===Le(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Le(i.doubleValue),l=Le(o.doubleValue);return s===l?Pa(s)===Pa(l):isNaN(s)&&isNaN(l)}return!1}(t,e);case 9:return Hi(t.arrayValue.values||[],e.arrayValue.values||[],mn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(Wy(s)!==Wy(l))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(l[u]===void 0||!mn(s[u],l[u])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function xs(t,e){return(t.values||[]).find(n=>mn(n,e))!==void 0}function $i(t,e){if(t===e)return 0;const n=hr(t),r=hr(e);if(n!==r)return se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return se(t.booleanValue,e.booleanValue);case 2:return function(o,s){const l=Le(o.integerValue||o.doubleValue),u=Le(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Jy(t.timestampValue,e.timestampValue);case 4:return Jy(Ss(t),Ss(e));case 5:return Vd(t.stringValue,e.stringValue);case 6:return function(o,s){const l=fr(o),u=fr(s);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const l=o.split("/"),u=s.split("/");for(let f=0;f<l.length&&f<u.length;f++){const h=se(l[f],u[f]);if(h!==0)return h}return se(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const l=se(Le(o.latitude),Le(s.latitude));return l!==0?l:se(Le(o.longitude),Le(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Qy(t.arrayValue,e.arrayValue);case 10:return function(o,s){var m,v,P,k;const l=o.fields||{},u=s.fields||{},f=(m=l[ka])==null?void 0:m.arrayValue,h=(v=u[ka])==null?void 0:v.arrayValue,p=se(((P=f==null?void 0:f.values)==null?void 0:P.length)||0,((k=h==null?void 0:h.values)==null?void 0:k.length)||0);return p!==0?p:Qy(f,h)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===wl.mapValue&&s===wl.mapValue)return 0;if(o===wl.mapValue)return 1;if(s===wl.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),f=s.fields||{},h=Object.keys(f);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const m=Vd(u[p],h[p]);if(m!==0)return m;const v=$i(l[u[p]],f[h[p]]);if(v!==0)return v}return se(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{he:n})}}function Jy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return se(t,e);const n=dr(t),r=dr(e),i=se(n.seconds,r.seconds);return i!==0?i:se(n.nanos,r.nanos)}function Qy(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=$i(n[i],r[i]);if(o)return o}return se(n.length,r.length)}function zi(t){return bd(t)}function bd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=dr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return fr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=bd(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${bd(n.fields[s])}`;return i+"}"}(t.mapValue):Z(61005,{value:t})}function Wl(t){switch(hr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cu(t);return e?16+Wl(e):16;case 5:return 2*t.stringValue.length;case 6:return fr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Wl(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Er(r.fields,(o,s)=>{i+=o.length+Wl(s)}),i}(t.mapValue);default:throw Z(13486,{value:t})}}function Yy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Fd(t){return!!t&&"integerValue"in t}function uh(t){return!!t&&"arrayValue"in t}function Xy(t){return!!t&&"nullValue"in t}function jy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kl(t){return!!t&&"mapValue"in t}function KD(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[oT])==null?void 0:r.stringValue)===sT}function es(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Er(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=es(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=es(t.arrayValue.values[n]);return e}return{...t}}function JD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===WD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.value=e}static empty(){return new Et({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=es(n)}setAll(e){let n=Ze.emptyPath(),r={},i=[];e.forEach((s,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=es(s):i.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Kl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Kl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Er(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Et(es(this.value))}}function lT(t){const e=[];return Er(t.fields,(n,r)=>{const i=new Ze([n]);if(Kl(r)){const o=lT(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Rt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,i,o,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new ut(e,0,ee.min(),ee.min(),ee.min(),Et.empty(),0)}static newFoundDocument(e,n,r,i){return new ut(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new ut(e,2,n,ee.min(),ee.min(),Et.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,ee.min(),ee.min(),Et.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n){this.position=e,this.inclusive=n}}function Zy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Y.comparator(Y.fromName(s.referenceValue),n.key):r=$i(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function e_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n="asc"){this.field=e,this.dir=n}}function QD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{}class Oe extends aT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new XD(e,n,r):n==="array-contains"?new eM(e,r):n==="in"?new tM(e,r):n==="not-in"?new nM(e,r):n==="array-contains-any"?new rM(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jD(e,r):new ZD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($i(n,this.value)):n!==null&&hr(this.value)===hr(n)&&this.matchesComparison($i(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jt extends aT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new jt(e,n)}matches(e){return uT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uT(t){return t.op==="and"}function cT(t){return YD(t)&&uT(t)}function YD(t){for(const e of t.filters)if(e instanceof jt)return!1;return!0}function Ud(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+zi(t.value);if(cT(t))return t.filters.map(e=>Ud(e)).join(",");{const e=t.filters.map(n=>Ud(n)).join(",");return`${t.op}(${e})`}}function dT(t,e){return t instanceof Oe?function(r,i){return i instanceof Oe&&r.op===i.op&&r.field.isEqual(i.field)&&mn(r.value,i.value)}(t,e):t instanceof jt?function(r,i){return i instanceof jt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,l)=>o&&dT(s,i.filters[l]),!0):!1}(t,e):void Z(19439)}function fT(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${zi(n.value)}`}(t):t instanceof jt?function(n){return n.op.toString()+" {"+n.getFilters().map(fT).join(" ,")+"}"}(t):"Filter"}class XD extends Oe{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class jD extends Oe{constructor(e,n){super(e,"in",n),this.keys=hT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ZD extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=hT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hT(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class eM extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return uh(n)&&xs(n.arrayValue,this.value)}}class tM extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xs(this.value.arrayValue,n)}}class nM extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(xs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xs(this.value.arrayValue,n)}}class rM extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!uh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xs(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.Te=null}}function t_(t,e=null,n=[],r=[],i=null,o=null,s=null){return new iM(t,e,n,r,i,o,s)}function ch(t){const e=te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ud(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),uu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zi(r)).join(",")),e.Te=n}return e.Te}function dh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!e_(t.startAt,e.startAt)&&e_(t.endAt,e.endAt)}function Od(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n=null,r=[],i=[],o=null,s="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oM(t,e,n,r,i,o,s,l){return new io(t,e,n,r,i,o,s,l)}function pT(t){return new io(t)}function n_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mT(t){return t.collectionGroup!==null}function ts(t){const e=te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new ze(Ze.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new As(o,r))}),n.has(Ze.keyField().canonicalString())||e.Ie.push(new As(Ze.keyField(),r))}return e.Ie}function cn(t){const e=te(t);return e.Ee||(e.Ee=sM(e,ts(t))),e.Ee}function sM(t,e){if(t.limitType==="F")return t_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new As(i.field,o)});const n=t.endAt?new Da(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Da(t.startAt.position,t.startAt.inclusive):null;return t_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Gd(t,e){const n=t.filters.concat([e]);return new io(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Bd(t,e,n){return new io(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function du(t,e){return dh(cn(t),cn(e))&&t.limitType===e.limitType}function gT(t){return`${ch(cn(t))}|lt:${t.limitType}`}function oi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>fT(i)).join(", ")}]`),uu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>zi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>zi(i)).join(",")),`Target(${r})`}(cn(t))}; limitType=${t.limitType})`}function fu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Y.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of ts(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,l,u){const f=Zy(s,l,u);return s.inclusive?f<=0:f<0}(r.startAt,ts(r),i)||r.endAt&&!function(s,l,u){const f=Zy(s,l,u);return s.inclusive?f>=0:f>0}(r.endAt,ts(r),i))}(t,e)}function lM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yT(t){return(e,n)=>{let r=!1;for(const i of ts(t)){const o=aM(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function aM(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(o,s,l){const u=s.data.field(o),f=l.data.field(o);return u!==null&&f!==null?$i(u,f):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Er(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return ZE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=new De(Y.comparator);function Nn(){return uM}const _T=new De(Y.comparator);function Bo(...t){let e=_T;for(const n of t)e=e.insert(n.key,n);return e}function vT(t){let e=_T;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function br(){return ns()}function ET(){return ns()}function ns(){return new Yr(t=>t.toString(),(t,e)=>t.isEqual(e))}const cM=new De(Y.comparator),dM=new ze(Y.comparator);function le(...t){let e=dM;for(const n of t)e=e.add(n);return e}const fM=new ze(se);function hM(){return fM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pa(e)?"-0":e}}function TT(t){return{integerValue:""+t}}function pM(t,e){return BD(e)?TT(e):fh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(){this._=void 0}}function mM(t,e,n){return t instanceof Ma?function(i,o){const s={fields:{[nT]:{stringValue:tT},[iT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ah(o)&&(o=cu(o)),o&&(s.fields[rT]=o),{mapValue:s}}(n,e):t instanceof Rs?wT(t,e):t instanceof Ns?ST(t,e):function(i,o){const s=IT(i,o),l=r_(s)+r_(i.Ae);return Fd(s)&&Fd(i.Ae)?TT(l):fh(i.serializer,l)}(t,e)}function gM(t,e,n){return t instanceof Rs?wT(t,e):t instanceof Ns?ST(t,e):n}function IT(t,e){return t instanceof Va?function(r){return Fd(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Ma extends hu{}class Rs extends hu{constructor(e){super(),this.elements=e}}function wT(t,e){const n=CT(e);for(const r of t.elements)n.some(i=>mn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ns extends hu{constructor(e){super(),this.elements=e}}function ST(t,e){let n=CT(e);for(const r of t.elements)n=n.filter(i=>!mn(i,r));return{arrayValue:{values:n}}}class Va extends hu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function r_(t){return Le(t.integerValue||t.doubleValue)}function CT(t){return uh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function yM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Rs&&i instanceof Rs||r instanceof Ns&&i instanceof Ns?Hi(r.elements,i.elements,mn):r instanceof Va&&i instanceof Va?mn(r.Ae,i.Ae):r instanceof Ma&&i instanceof Ma}(t.transform,e.transform)}class _M{constructor(e,n){this.version=e,this.transformResults=n}}class Yt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yt}static exists(e){return new Yt(void 0,e)}static updateTime(e){return new Yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pu{}function xT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hh(t.key,Yt.none()):new Us(t.key,t.data,Yt.none());{const n=t.data,r=Et.empty();let i=new ze(Ze.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Tr(t.key,r,new Rt(i.toArray()),Yt.none())}}function vM(t,e,n){t instanceof Us?function(i,o,s){const l=i.value.clone(),u=o_(i.fieldTransforms,o,s.transformResults);l.setAll(u),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Tr?function(i,o,s){if(!Jl(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=o_(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(AT(i)),u.setAll(l),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function rs(t,e,n,r){return t instanceof Us?function(o,s,l,u){if(!Jl(o.precondition,s))return l;const f=o.value.clone(),h=s_(o.fieldTransforms,u,s);return f.setAll(h),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Tr?function(o,s,l,u){if(!Jl(o.precondition,s))return l;const f=s_(o.fieldTransforms,u,s),h=s.data;return h.setAll(AT(o)),h.setAll(f),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,l){return Jl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(t,e,n)}function EM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=IT(r.transform,i||null);o!=null&&(n===null&&(n=Et.empty()),n.set(r.field,o))}return n||null}function i_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Hi(r,i,(o,s)=>yM(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Us extends pu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Tr extends pu{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function AT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function o_(t,e,n){const r=new Map;pe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,gM(s,l,n[i]))}return r}function s_(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,mM(o,s,e))}return r}class hh extends pu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TM extends pu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&vM(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=rs(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=rs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ET();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(i.key)?null:l;const u=xT(s,l);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&Hi(this.mutations,e.mutations,(n,r)=>i_(n,r))&&Hi(this.baseMutations,e.baseMutations,(n,r)=>i_(n,r))}}class ph{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return cM}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new ph(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,ae;function CM(t){switch(t){case G.OK:return Z(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function RT(t){if(t===void 0)return Rn("GRPC error has no .code"),G.UNKNOWN;switch(t){case Fe.OK:return G.OK;case Fe.CANCELLED:return G.CANCELLED;case Fe.UNKNOWN:return G.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return G.INTERNAL;case Fe.UNAVAILABLE:return G.UNAVAILABLE;case Fe.UNAUTHENTICATED:return G.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case Fe.NOT_FOUND:return G.NOT_FOUND;case Fe.ALREADY_EXISTS:return G.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return G.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case Fe.ABORTED:return G.ABORTED;case Fe.OUT_OF_RANGE:return G.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return G.UNIMPLEMENTED;case Fe.DATA_LOSS:return G.DATA_LOSS;default:return Z(39323,{code:t})}}(ae=Fe||(Fe={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=new ir([4294967295,4294967295],0);function l_(t){const e=xM().encode(t),n=new qE;return n.update(e),new Uint8Array(n.digest())}function a_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ir([n,r],0),new ir([i,o],0)]}class mh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qo(`Invalid padding: ${n}`);if(r<0)throw new qo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ir.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ir.fromNumber(r)));return i.compare(AM)===1&&(i=new ir([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=l_(e),[r,i]=a_(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new mh(o,i,n);return r.forEach(l=>s.insert(l)),s}insert(e){if(this.ge===0)return;const n=l_(e),[r,i]=a_(n);for(let o=0;o<this.hashCount;o++){const s=this.ye(r,i,o);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Os.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mu(ee.min(),i,new De(se),Nn(),le())}}class Os{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Os(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class NT{constructor(e,n){this.targetId=e,this.Ce=n}}class PT{constructor(e,n,r=nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class u_{constructor(){this.ve=0,this.Fe=c_(),this.Me=nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=le(),n=le(),r=le();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z(38017,{changeType:o})}}),new Os(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=c_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class RM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Nn(),this.Je=Sl(),this.He=Sl(),this.Ye=new De(se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(Od(o))if(r===0){const s=new Y(o.path);this.et(n,s,ut.newNoDocument(s,ee.min()))}else pe(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const l=this.ut(e),u=l?this.ct(l,e,s):1;if(u!==0){this.it(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,l;try{s=fr(r).toUint8Array()}catch(u){if(u instanceof eT)return qi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new mh(s,i,o)}catch(u){return qi(u instanceof qo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Ge.ht(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(n,o,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((o,s)=>{const l=this.ot(s);if(l){if(o.current&&Od(l.target)){const u=new Y(l.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,ut.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=le();this.He.forEach((o,s)=>{let l=!0;s.forEachWhile(u=>{const f=this.ot(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));const i=new mu(e,n,this.Ye,this.je,r);return this.je=Nn(),this.Je=Sl(),this.He=Sl(),this.Ye=new De(se),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new u_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ze(se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ze(se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new u_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Sl(){return new De(Y.comparator)}function c_(){return new De(Y.comparator)}const NM={asc:"ASCENDING",desc:"DESCENDING"},PM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kM={and:"AND",or:"OR"};class DM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qd(t,e){return t.useProto3Json||uu(e)?e:{value:e}}function La(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MM(t,e){return La(t,e.toTimestamp())}function dn(t){return pe(!!t,49232),ee.fromTimestamp(function(n){const r=dr(n);return new xe(r.seconds,r.nanos)}(t))}function gh(t,e){return Hd(t,e).canonicalString()}function Hd(t,e){const n=function(i){return new Ee(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function DT(t){const e=Ee.fromString(t);return pe(FT(e),10190,{key:e.toString()}),e}function $d(t,e){return gh(t.databaseId,e.path)}function Ec(t,e){const n=DT(e);if(n.get(1)!==t.databaseId.projectId)throw new z(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(VT(n))}function MT(t,e){return gh(t.databaseId,e)}function VM(t){const e=DT(t);return e.length===4?Ee.emptyPath():VT(e)}function zd(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VT(t){return pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function d_(t,e,n){return{name:$d(t,e),fields:n.value.mapValue.fields}}function LM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Z(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,h){return f.useProto3Json?(pe(h===void 0||typeof h=="string",58123),nt.fromBase64String(h||"")):(pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),nt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(f){const h=f.code===void 0?G.UNKNOWN:RT(f.code);return new z(h,f.message||"")}(s);n=new PT(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ec(t,r.document.name),o=dn(r.document.updateTime),s=r.document.createTime?dn(r.document.createTime):ee.min(),l=new Et({mapValue:{fields:r.document.fields}}),u=ut.newFoundDocument(i,o,s,l),f=r.targetIds||[],h=r.removedTargetIds||[];n=new Ql(f,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ec(t,r.document),o=r.readTime?dn(r.readTime):ee.min(),s=ut.newNoDocument(i,o),l=r.removedTargetIds||[];n=new Ql([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ec(t,r.document),o=r.removedTargetIds||[];n=new Ql([],o,i,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new SM(i,o),l=r.targetId;n=new NT(l,s)}}return n}function bM(t,e){let n;if(e instanceof Us)n={update:d_(t,e.key,e.value)};else if(e instanceof hh)n={delete:$d(t,e.key)};else if(e instanceof Tr)n={update:d_(t,e.key,e.data),updateMask:zM(e.fieldMask)};else{if(!(e instanceof TM))return Z(16599,{Vt:e.type});n={verify:$d(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const l=s.transform;if(l instanceof Ma)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Rs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ns)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Va)return{fieldPath:s.field.canonicalString(),increment:l.Ae};throw Z(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:MM(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Z(27497)}(t,e.precondition)),n}function FM(t,e){return t&&t.length>0?(pe(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?dn(i.updateTime):dn(o);return s.isEqual(ee.min())&&(s=dn(o)),new _M(s,i.transformResults||[])}(n,e))):[]}function UM(t,e){return{documents:[MT(t,e.path)]}}function OM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=MT(t,i);const o=function(f){if(f.length!==0)return bT(jt.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(f){if(f.length!==0)return f.map(h=>function(m){return{field:si(m.field),direction:qM(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=qd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:i}}function GM(t){let e=VM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){pe(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){const m=LT(p);return m instanceof jt&&cT(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(P){return new As(li(P.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,uu(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,v=p.values||[];return new Da(v,m)}(n.startAt));let f=null;return n.endAt&&(f=function(p){const m=!p.before,v=p.values||[];return new Da(v,m)}(n.endAt)),oM(e,i,s,o,l,"F",u,f)}function BM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function LT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=li(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=li(n.unaryFilter.field);return Oe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=li(n.unaryFilter.field);return Oe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=li(n.unaryFilter.field);return Oe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(li(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return jt.create(n.compositeFilter.filters.map(r=>LT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function qM(t){return NM[t]}function HM(t){return PM[t]}function $M(t){return kM[t]}function si(t){return{fieldPath:t.canonicalString()}}function li(t){return Ze.fromServerFormat(t.fieldPath)}function bT(t){return t instanceof Oe?function(n){if(n.op==="=="){if(jy(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NAN"}};if(Xy(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jy(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NAN"}};if(Xy(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:si(n.field),op:HM(n.op),value:n.value}}}(t):t instanceof jt?function(n){const r=n.getFilters().map(i=>bT(i));return r.length===1?r[0]:{compositeFilter:{op:$M(n.op),filters:r}}}(t):Z(54877,{filter:t})}function zM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n,r,i,o=ee.min(),s=ee.min(),l=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Kn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.yt=e}}function KM(t){const e=GM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this.Cn=new QM}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(cr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(cr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class QM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ze(Ee.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ze(Ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UT=41943040;class _t{static withCacheSize(e){return new _t(e,_t.DEFAULT_COLLECTION_PERCENTILE,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_t.DEFAULT_COLLECTION_PERCENTILE=10,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_t.DEFAULT=new _t(UT,_t.DEFAULT_COLLECTION_PERCENTILE,_t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_t.DISABLED=new _t(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Wi(0)}static cr(){return new Wi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="LruGarbageCollector",YM=1048576;function p_([t,e],[n,r]){const i=se(t,n);return i===0?se(e,r):i}class XM{constructor(e){this.Ir=e,this.buffer=new ze(p_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();p_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){W(h_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ro(n)?W(h_,"Ignoring IndexedDB error during garbage collection: ",n):await no(n)}await this.Vr(3e5)})}}class ZM{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(au.ce);const r=new XM(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(f_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,l,u,f;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(f=Date.now(),ii()<=ue.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(f-u)+`ms
Total Duration: ${f-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}}function eV(t,e){return new ZM(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(){this.changes=new Yr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&rs(r.mutation,i,Rt.empty(),xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const i=br();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Bo();return o.forEach((l,u)=>{s=s.insert(l,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=br();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,l)=>{n.set(s,l)})})}computeViews(e,n,r,i){let o=Nn();const s=ns(),l=function(){return ns()}();return n.forEach((u,f)=>{const h=r.get(f.key);i.has(f.key)&&(h===void 0||h.mutation instanceof Tr)?o=o.insert(f.key,f):h!==void 0?(s.set(f.key,h.mutation.getFieldMask()),rs(h.mutation,f,h.mutation.getFieldMask(),xe.now())):s.set(f.key,Rt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,h)=>s.set(f,h)),n.forEach((f,h)=>l.set(f,new nV(h,s.get(f)??null))),l))}recalculateAndSaveOverlays(e,n){const r=ns();let i=new De((s,l)=>s-l),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const l of s)l.keys().forEach(u=>{const f=n.get(u);if(f===null)return;let h=r.get(u)||Rt.empty();h=l.applyToLocalView(f,h),r.set(u,h);const p=(i.get(l.batchId)||le()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,h=u.value,p=ET();h.forEach(m=>{if(!o.has(m)){const v=xT(n.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,f,p))}return B.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Y.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):B.resolve(br());let l=ws,u=o;return s.next(f=>B.forEach(f,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),o.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,le())).next(h=>({batchId:l,changes:vT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=Bo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Bo();return this.indexManager.getCollectionParents(e,o).next(l=>B.forEach(l,u=>{const f=function(p,m){return new io(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,f)=>{const h=f.getKey();s.get(h)===null&&(s=s.insert(h,ut.newInvalidDocument(h)))});let l=Bo();return s.forEach((u,f)=>{const h=o.get(u);h!==void 0&&rs(h.mutation,f,Rt.empty(),xe.now()),fu(n,f)&&(l=l.insert(u,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:dn(i.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:KM(i.bundledQuery),readTime:dn(i.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.overlays=new De(Y.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=br();return B.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const i=br(),o=n.length+1,s=new Y(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return B.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new De((f,h)=>f-h);const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let h=o.get(f.largestBatchId);h===null&&(h=br(),o=o.insert(f.largestBatchId,h)),h.set(f.getKey(),f)}}const l=br(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,h)=>l.set(f,h)),!(l.size()>=i)););return B.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new wM(n,r));let o=this.qr.get(n);o===void 0&&(o=le(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(){this.Qr=new ze(Ke.$r),this.Ur=new ze(Ke.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ke(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ke(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Y(new Ee([])),r=new Ke(n,e),i=new Ke(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Y(new Ee([])),r=new Ke(n,e),i=new Ke(n,e+1);let o=le();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Ke(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ke{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Y.comparator(e.key,n.key)||se(e.Yr,n.Yr)}static Kr(e,n){return se(e.Yr,n.Yr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ze(Ke.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new IM(o,n,r,i);this.mutationQueue.push(s);for(const l of i)this.Zr=this.Zr.add(new Ke(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(s)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?lh:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ke(n,0),i=new Ke(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{const l=this.Xr(s.Yr);o.push(l)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(se);return n.forEach(i=>{const o=new Ke(i,0),s=new Ke(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],l=>{r=r.add(l.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Y.isDocumentKey(o)||(o=o.child(""));const s=new Ke(new Y(o),0);let l=new ze(se);return this.Zr.forEachWhile(u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(l=l.add(u.Yr)),!0)},s),B.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){pe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,i=>{const o=new Ke(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ke(n,0),i=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.ri=e,this.docs=function(){return new De(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=Nn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ut.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Nn();const s=n.path,l=new Y(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:h}}=u.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||FD(bD(h),r)<=0||(i.has(h.key)||fu(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Z(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new uV(this)}getSize(e){return B.resolve(this.size)}}class uV extends tV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.persistence=e,this.si=new Yr(n=>ch(n),dh),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.oi=0,this._i=new yh,this.targetCount=0,this.ai=Wi.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Wi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),B.waitFor(o).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n){this.ui={},this.overlays={},this.ci=new au(0),this.li=!1,this.li=!0,this.hi=new sV,this.referenceDelegate=e(this),this.Pi=new cV(this),this.indexManager=new JM,this.remoteDocumentCache=function(i){return new aV(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new WM(n),this.Ii=new iV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new lV(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new dV(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class dV extends OD{constructor(e){super(),this.currentSequenceNumber=e}}class _h{constructor(e){this.persistence=e,this.Ri=new yh,this.Vi=null}static mi(e){return new _h(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const i=Y.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,ee.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ba{constructor(e,n){this.persistence=e,this.pi=new Yr(r=>qD(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=eV(this,n)}static mi(e,n){return new ba(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?B.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(l=>{l||(r++,o.removeEntry(s,ee.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Wl(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return B.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=le(),i=le();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new vh(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ik()?8:GD(nk())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new fV;return this.Ss(e,n,s).next(l=>{if(o.result=l,this.Vs)return this.bs(e,n,s,l.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(ii()<=ue.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",oi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(ii()<=ue.DEBUG&&W("QueryEngine","Query:",oi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ii()<=ue.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",oi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cn(n))):B.resolve())}ys(e,n){if(n_(n))return B.resolve(null);let r=cn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Bd(n,null,"F"),r=cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=le(...o);return this.ps.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const f=this.Ds(n,l);return this.Cs(n,f,s,u.readTime)?this.ys(e,Bd(n,null,"F")):this.vs(e,f,n,u)}))})))}ws(e,n,r,i){return n_(n)||i.isEqual(ee.min())?B.resolve(null):this.ps.getDocuments(e,r).next(o=>{const s=this.Ds(n,o);return this.Cs(n,s,r,i)?B.resolve(null):(ii()<=ue.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),oi(n)),this.vs(e,s,n,LD(i,ws)).next(l=>l))})}Ds(e,n){let r=new ze(yT(e));return n.forEach((i,o)=>{fu(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return ii()<=ue.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",oi(n)),this.ps.getDocumentsMatchingQuery(e,n,cr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh="LocalStore",pV=3e8;class mV{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new De(se),this.xs=new Yr(o=>ch(o),dh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function gV(t,e,n,r){return new mV(t,e,n,r)}async function GT(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],l=[];let u=le();for(const f of i){s.push(f.batchId);for(const h of f.mutations)u=u.add(h.key)}for(const f of o){l.push(f.batchId);for(const h of f.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(f=>({Ls:f,removedBatchIds:s,addedBatchIds:l}))})})}function yV(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,f,h){const p=f.batch,m=p.keys();let v=B.resolve();return m.forEach(P=>{v=v.next(()=>h.getEntry(u,P)).next(k=>{const L=f.docVersions.get(P);pe(L!==null,48541),k.version.compareTo(L)<0&&(p.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),h.addEntry(k)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=le();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function BT(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function _V(t,e){const n=te(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(nt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(k,L,A){return k.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=pV?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,v,h)&&l.push(n.Pi.updateTargetData(o,v))});let u=Nn(),f=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),l.push(vV(o,s,e.documentUpdates).next(h=>{u=h.ks,f=h.qs})),!r.isEqual(ee.min())){const h=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(h)}return B.waitFor(l).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(n.Ms=i,o))}function vV(t,e,n){let r=le(),i=le();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Nn();return n.forEach((l,u)=>{const f=o.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(l,u.readTime),s=s.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),s=s.insert(l,u)):W(Eh,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)}),{ks:s,qs:i}})}function EV(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=lh),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function TV(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,B.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new Kn(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Wd(t,e,n){const r=te(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!ro(s))throw s;W(Eh,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function m_(t,e,n){const r=te(t);let i=ee.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,f,h){const p=te(u),m=p.xs.get(h);return m!==void 0?B.resolve(p.Ms.get(m)):p.Pi.getTargetData(f,h)}(r,s,cn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,l.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:ee.min(),n?o:le())).next(l=>(IV(r,lM(e),l),{documents:l,Qs:o})))}function IV(t,e,n){let r=t.Os.get(e)||ee.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class g_{constructor(){this.activeTargetIds=hM()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wV{constructor(){this.Mo=new g_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new g_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="ConnectivityMonitor";class __{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(y_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){W(y_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cl=null;function Kd(){return Cl===null?Cl=function(){return 268435456+Math.round(2147483648*Math.random())}():Cl++,"0x"+Cl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="RestConnection",CV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ld?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const s=Kd(),l=this.zo(e,n.toUriEncodedString());W(Tc,`Sending RPC '${e}' ${s}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);const{host:f}=new URL(l),h=rh(f);return this.Jo(e,l,u,r,h).then(p=>(W(Tc,`Received RPC '${e}' ${s}: `,p),p),p=>{throw qi(Tc,`RPC '${e}' ${s} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+to}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){const r=CV[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="WebChannelConnection";class RV extends xV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const s=Kd();return new Promise((l,u)=>{const f=new HE;f.setWithCredentials(!0),f.listenOnce($E.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case zl.NO_ERROR:const p=f.getResponseJson();W(st,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),l(p);break;case zl.TIMEOUT:W(st,`RPC '${e}' ${s} timed out`),u(new z(G.DEADLINE_EXCEEDED,"Request time out"));break;case zl.HTTP_ERROR:const m=f.getStatus();if(W(st,`RPC '${e}' ${s} failed with status:`,m,"response text:",f.getResponseText()),m>0){let v=f.getResponseJson();Array.isArray(v)&&(v=v[0]);const P=v==null?void 0:v.error;if(P&&P.status&&P.message){const k=function(A){const T=A.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(T)>=0?T:G.UNKNOWN}(P.status);u(new z(k,P.message))}else u(new z(G.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new z(G.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:s,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{W(st,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);W(st,`RPC '${e}' ${s} sending request:`,i),f.send(n,"POST",h,r,15)})}T_(e,n,r){const i=Kd(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=KE(),l=WE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=o.join("");W(st,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=s.createWebChannel(h,u);this.I_(p);let m=!1,v=!1;const P=new AV({Yo:L=>{v?W(st,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(m||(W(st,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),W(st,`RPC '${e}' stream ${i} sending:`,L),p.send(L))},Zo:()=>p.close()}),k=(L,A,T)=>{L.listen(A,x=>{try{T(x)}catch(M){setTimeout(()=>{throw M},0)}})};return k(p,Go.EventType.OPEN,()=>{v||(W(st,`RPC '${e}' stream ${i} transport opened.`),P.o_())}),k(p,Go.EventType.CLOSE,()=>{v||(v=!0,W(st,`RPC '${e}' stream ${i} transport closed`),P.a_(),this.E_(p))}),k(p,Go.EventType.ERROR,L=>{v||(v=!0,qi(st,`RPC '${e}' stream ${i} transport errored. Name:`,L.name,"Message:",L.message),P.a_(new z(G.UNAVAILABLE,"The operation could not be completed")))}),k(p,Go.EventType.MESSAGE,L=>{var A;if(!v){const T=L.data[0];pe(!!T,16349);const x=T,M=(x==null?void 0:x.error)||((A=x[0])==null?void 0:A.error);if(M){W(st,`RPC '${e}' stream ${i} received error:`,M);const V=M.status;let F=function(C){const R=Fe[C];if(R!==void 0)return RT(R)}(V),w=M.message;F===void 0&&(F=G.INTERNAL,w="Unknown error status: "+V+" with message "+M.message),v=!0,P.a_(new z(F,w)),p.close()}else W(st,`RPC '${e}' stream ${i} received:`,T),P.u_(T)}}),k(l,zE.STAT_EVENT,L=>{L.stat===Md.PROXY?W(st,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===Md.NOPROXY&&W(st,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.__()},0),P}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Ic(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t){return new DM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="PersistentStream";class HT{constructor(e,n,r,i,o,s,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Rn(n.toString()),Rn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new z(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(v_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(W(v_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class NV extends HT{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=LM(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?dn(s.readTime):ee.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=zd(this.serializer),n.addTarget=function(o,s){let l;const u=s.target;if(l=Od(u)?{documents:UM(o,u)}:{query:OM(o,u).ft},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=kT(o,s.resumeToken);const f=qd(o,s.expectedCount);f!==null&&(l.expectedCount=f)}else if(s.snapshotVersion.compareTo(ee.min())>0){l.readTime=La(o,s.snapshotVersion.toTimestamp());const f=qd(o,s.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,e);const r=BM(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=zd(this.serializer),n.removeTarget=e,this.q_(n)}}class PV extends HT{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=FM(e.writeResults,e.commitTime),r=dn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=zd(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bM(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{}class DV extends kV{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new z(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,Hd(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(G.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Ho(e,Hd(n,r),i,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(G.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class MV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rn(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="RemoteStore";class VV{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{Xr(this)&&(W(zr,"Restarting streams for network reachability change."),await async function(u){const f=te(u);f.Ea.add(4),await Gs(f),f.Ra.set("Unknown"),f.Ea.delete(4),await yu(f)}(this))})}),this.Ra=new MV(r,i)}}async function yu(t){if(Xr(t))for(const e of t.da)await e(!0)}async function Gs(t){for(const e of t.da)await e(!1)}function $T(t,e){const n=te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Sh(n)?wh(n):oo(n).O_()&&Ih(n,e))}function Th(t,e){const n=te(t),r=oo(n);n.Ia.delete(e),r.O_()&&zT(n,e),n.Ia.size===0&&(r.O_()?r.L_():Xr(n)&&n.Ra.set("Unknown"))}function Ih(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oo(t).Y_(e)}function zT(t,e){t.Va.Ue(e),oo(t).Z_(e)}function wh(t){t.Va=new RM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),oo(t).start(),t.Ra.ua()}function Sh(t){return Xr(t)&&!oo(t).x_()&&t.Ia.size>0}function Xr(t){return te(t).Ea.size===0}function WT(t){t.Va=void 0}async function LV(t){t.Ra.set("Online")}async function bV(t){t.Ia.forEach((e,n)=>{Ih(t,e)})}async function FV(t,e){WT(t),Sh(t)?(t.Ra.ha(e),wh(t)):t.Ra.set("Unknown")}async function UV(t,e,n){if(t.Ra.set("Online"),e instanceof PT&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const l of o.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){W(zr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fa(t,r)}else if(e instanceof Ql?t.Va.Ze(e):e instanceof NT?t.Va.st(e):t.Va.tt(e),!n.isEqual(ee.min()))try{const r=await BT(t.localStore);n.compareTo(r)>=0&&await function(o,s){const l=o.Va.Tt(s);return l.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const h=o.Ia.get(f);h&&o.Ia.set(f,h.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,f)=>{const h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(nt.EMPTY_BYTE_STRING,h.snapshotVersion)),zT(o,u);const p=new Kn(h.target,u,f,h.sequenceNumber);Ih(o,p)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W(zr,"Failed to raise snapshot:",r),await Fa(t,r)}}async function Fa(t,e,n){if(!ro(e))throw e;t.Ea.add(1),await Gs(t),t.Ra.set("Offline"),n||(n=()=>BT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(zr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await yu(t)})}function KT(t,e){return e().catch(n=>Fa(t,n,e))}async function _u(t){const e=te(t),n=pr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:lh;for(;OV(e);)try{const i=await EV(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,GV(e,i)}catch(i){await Fa(e,i)}JT(e)&&QT(e)}function OV(t){return Xr(t)&&t.Ta.length<10}function GV(t,e){t.Ta.push(e);const n=pr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function JT(t){return Xr(t)&&!pr(t).x_()&&t.Ta.length>0}function QT(t){pr(t).start()}async function BV(t){pr(t).ra()}async function qV(t){const e=pr(t);for(const n of t.Ta)e.ea(n.mutations)}async function HV(t,e,n){const r=t.Ta.shift(),i=ph.from(r,e,n);await KT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await _u(t)}async function $V(t,e){e&&pr(t).X_&&await async function(r,i){if(function(s){return CM(s)&&s!==G.ABORTED}(i.code)){const o=r.Ta.shift();pr(r).B_(),await KT(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await _u(r)}}(t,e),JT(t)&&QT(t)}async function E_(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),W(zr,"RemoteStore received new credentials");const r=Xr(n);n.Ea.add(3),await Gs(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await yu(n)}async function zV(t,e){const n=te(t);e?(n.Ea.delete(2),await yu(n)):e||(n.Ea.add(2),await Gs(n),n.Ra.set("Unknown"))}function oo(t){return t.ma||(t.ma=function(n,r,i){const o=te(n);return o.sa(),new NV(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:LV.bind(null,t),t_:bV.bind(null,t),r_:FV.bind(null,t),H_:UV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Sh(t)?wh(t):t.Ra.set("Unknown")):(await t.ma.stop(),WT(t))})),t.ma}function pr(t){return t.fa||(t.fa=function(n,r,i){const o=te(n);return o.sa(),new PV(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:BV.bind(null,t),r_:$V.bind(null,t),ta:qV.bind(null,t),na:HV.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await _u(t)):(await t.fa.stop(),t.Ta.length>0&&(W(zr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,l=new Ch(e,n,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xh(t,e){if(Rn("AsyncQueue",`${e}: ${t}`),ro(t))return new z(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{static emptySet(e){return new Di(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Bo(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Di)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Di;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this.ga=new De(Y.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ki{constructor(e,n,r,i,o,s,l,u,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(l=>{s.push({type:0,doc:l})}),new Ki(e,n,Di.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&du(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class KV{constructor(){this.queries=I_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=te(n),o=i.queries;i.queries=I_(),o.forEach((s,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new z(G.ABORTED,"Firestore shutting down"))}}function I_(){return new Yr(t=>gT(t),du)}async function JV(t,e){const n=te(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new WV,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const l=xh(s,`Initialization of query '${oi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Ah(n)}async function QV(t,e){const n=te(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function YV(t,e){const n=te(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const l of s.Sa)l.Fa(i)&&(r=!0);s.wa=i}}r&&Ah(n)}function XV(t,e,n){const r=te(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function Ah(t){t.Ca.forEach(e=>{e.next()})}var Jd,w_;(w_=Jd||(Jd={})).Ma="default",w_.Cache="cache";class jV{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ki(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ki.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.key=e}}class XT{constructor(e){this.key=e}}class ZV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=le(),this.mutatedKeys=le(),this.eu=yT(e),this.tu=new Di(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new T_,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),v=fu(this.query,p)?p:null,P=!!m&&this.mutatedKeys.has(m.key),k=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let L=!1;m&&v?m.data.isEqual(v.data)?P!==k&&(r.track({type:3,doc:v}),L=!0):this.su(m,v)||(r.track({type:2,doc:v}),L=!0,(u&&this.eu(v,u)>0||f&&this.eu(v,f)<0)&&(l=!0)):!m&&v?(r.track({type:0,doc:v}),L=!0):m&&!v&&(r.track({type:1,doc:m}),L=!0,(u||f)&&(l=!0)),L&&(v?(s=s.add(v),o=k?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:l,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((h,p)=>function(v,P){const k=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:L})}};return k(v)-k(P)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,f=u!==this.Za;return this.Za=u,s.length!==0||f?{snapshot:new Ki(this.query,e.tu,o,s,e.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new T_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new XT(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new YT(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ki.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Rh="SyncEngine";class eL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class tL{constructor(e){this.key=e,this.hu=!1}}class nL{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Yr(l=>gT(l),du),this.Iu=new Map,this.Eu=new Set,this.du=new De(Y.comparator),this.Au=new Map,this.Ru=new yh,this.Vu={},this.mu=new Map,this.fu=Wi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rL(t,e,n=!0){const r=rI(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await jT(r,e,n,!0),i}async function iL(t,e){const n=rI(t);await jT(n,e,!0,!1)}async function jT(t,e,n,r){const i=await TV(t.localStore,cn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await oL(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&$T(t.remoteStore,i),l}async function oL(t,e,n,r,i){t.pu=(p,m,v)=>async function(k,L,A,T){let x=L.view.ru(A);x.Cs&&(x=await m_(k.localStore,L.query,!1).then(({documents:w})=>L.view.ru(w,x)));const M=T&&T.targetChanges.get(L.targetId),V=T&&T.targetMismatches.get(L.targetId)!=null,F=L.view.applyChanges(x,k.isPrimaryClient,M,V);return C_(k,L.targetId,F.au),F.snapshot}(t,p,m,v);const o=await m_(t.localStore,e,!0),s=new ZV(e,o.Qs),l=s.ru(o.documents),u=Os.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=s.applyChanges(l,t.isPrimaryClient,u);C_(t,n,f.au);const h=new eL(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function sL(t,e,n){const r=te(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!du(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Wd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Th(r.remoteStore,i.targetId),Qd(r,i.targetId)}).catch(no)):(Qd(r,i.targetId),await Wd(r.localStore,i.targetId,!0))}async function lL(t,e){const n=te(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Th(n.remoteStore,r.targetId))}async function aL(t,e,n){const r=mL(t);try{const i=await function(s,l){const u=te(s),f=xe.now(),h=l.reduce((v,P)=>v.add(P.key),le());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let P=Nn(),k=le();return u.Ns.getEntries(v,h).next(L=>{P=L,P.forEach((A,T)=>{T.isValidDocument()||(k=k.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,P)).next(L=>{p=L;const A=[];for(const T of l){const x=EM(T,p.get(T.key).overlayedDocument);x!=null&&A.push(new Tr(T.key,x,lT(x.value.mapValue),Yt.exists(!0)))}return u.mutationQueue.addMutationBatch(v,f,A,l)}).next(L=>{m=L;const A=L.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(v,L.batchId,A)})}).then(()=>({batchId:m.batchId,changes:vT(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,u){let f=s.Vu[s.currentUser.toKey()];f||(f=new De(se)),f=f.insert(l,u),s.Vu[s.currentUser.toKey()]=f}(r,i.batchId,n),await Bs(r,i.changes),await _u(r.remoteStore)}catch(i){const o=xh(i,"Failed to persist write");n.reject(o)}}async function ZT(t,e){const n=te(t);try{const r=await _V(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Au.get(o);s&&(pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?pe(s.hu,14607):i.removedDocuments.size>0&&(pe(s.hu,42227),s.hu=!1))}),await Bs(n,r,e)}catch(r){await no(r)}}function S_(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((o,s)=>{const l=s.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(s,l){const u=te(s);u.onlineState=l;let f=!1;u.queries.forEach((h,p)=>{for(const m of p.Sa)m.va(l)&&(f=!0)}),f&&Ah(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uL(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let s=new De(Y.comparator);s=s.insert(o,ut.newNoDocument(o,ee.min()));const l=le().add(o),u=new mu(ee.min(),new Map,new De(se),s,l);await ZT(r,u),r.du=r.du.remove(o),r.Au.delete(e),Nh(r)}else await Wd(r.localStore,e,!1).then(()=>Qd(r,e,n)).catch(no)}async function cL(t,e){const n=te(t),r=e.batch.batchId;try{const i=await yV(n.localStore,e);tI(n,r,null),eI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Bs(n,i)}catch(i){await no(i)}}async function dL(t,e,n){const r=te(t);try{const i=await function(s,l){const u=te(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let h;return u.mutationQueue.lookupMutationBatch(f,l).next(p=>(pe(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(f,p))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,h)).next(()=>u.localDocuments.getDocuments(f,h))})}(r.localStore,e);tI(r,e,n),eI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Bs(r,i)}catch(i){await no(i)}}function eI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function tI(t,e,n){const r=te(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Qd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||nI(t,r)})}function nI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Th(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Nh(t))}function C_(t,e,n){for(const r of n)r instanceof YT?(t.Ru.addReference(r.key,e),fL(t,r)):r instanceof XT?(W(Rh,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||nI(t,r.key)):Z(19791,{wu:r})}function fL(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(W(Rh,"New document in limbo: "+n),t.Eu.add(r),Nh(t))}function Nh(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Y(Ee.fromString(e)),r=t.fu.next();t.Au.set(r,new tL(n)),t.du=t.du.insert(n,r),$T(t.remoteStore,new Kn(cn(pT(n.path)),r,"TargetPurposeLimboResolution",au.ce))}}async function Bs(t,e,n){const r=te(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{s.push(r.pu(u,e,n).then(f=>{var h;if((f||n)&&r.isPrimaryClient){const p=f?!f.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(f){i.push(f);const p=vh.As(u.targetId,f);o.push(p)}}))}),await Promise.all(s),r.Pu.H_(i),await async function(u,f){const h=te(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(f,m=>B.forEach(m.Es,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>B.forEach(m.ds,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!ro(p))throw p;W(Eh,"Failed to update sequence numbers: "+p)}for(const p of f){const m=p.targetId;if(!p.fromCache){const v=h.Ms.get(m),P=v.snapshotVersion,k=v.withLastLimboFreeSnapshotVersion(P);h.Ms=h.Ms.insert(m,k)}}}(r.localStore,o))}async function hL(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){W(Rh,"User change. New user:",e.toKey());const r=await GT(n.localStore,e);n.currentUser=e,function(o,s){o.mu.forEach(l=>{l.forEach(u=>{u.reject(new z(G.CANCELLED,s))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bs(n,r.Ls)}}function pL(t,e){const n=te(t),r=n.Au.get(e);if(r&&r.hu)return le().add(r.key);{let i=le();const o=n.Iu.get(e);if(!o)return i;for(const s of o){const l=n.Tu.get(s);i=i.unionWith(l.view.nu)}return i}}function rI(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uL.bind(null,e),e.Pu.H_=YV.bind(null,e.eventManager),e.Pu.yu=XV.bind(null,e.eventManager),e}function mL(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dL.bind(null,e),e}class Ua{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return gV(this.persistence,new hV,e.initialUser,this.serializer)}Cu(e){return new OT(_h.mi,this.serializer)}Du(e){return new wV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ua.provider={build:()=>new Ua};class gL extends Ua{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){pe(this.persistence.referenceDelegate instanceof ba,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new jM(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?_t.withCacheSize(this.cacheSizeBytes):_t.DEFAULT;return new OT(r=>ba.mi(r,n),this.serializer)}}class Yd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>S_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hL.bind(null,this.syncEngine),await zV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new KV}()}createDatastore(e){const n=gu(e.databaseInfo.databaseId),r=function(o){return new RV(o)}(e.databaseInfo);return function(o,s,l,u){return new DV(o,s,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,l){return new VV(r,i,o,s,l)}(this.localStore,this.datastore,e.asyncQueue,n=>S_(this.syncEngine,n,0),function(){return __.v()?new __:new SV}())}createSyncEngine(e,n){return function(i,o,s,l,u,f,h){const p=new nL(i,o,s,l,u,f);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=te(i);W(zr,"RemoteStore shutting down."),o.Ea.add(5),await Gs(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Yd.provider={build:()=>new Yd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr="FirestoreClient";class _L{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=lt.UNAUTHENTICATED,this.clientId=sh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{W(mr,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(W(mr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wc(t,e){t.asyncQueue.verifyOperationInProgress(),W(mr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await GT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function x_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vL(t);W(mr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>E_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>E_(e.remoteStore,i)),t._onlineComponents=e}async function vL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(mr,"Using user provided OfflineComponentProvider");try{await wc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===G.FAILED_PRECONDITION||i.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;qi("Error using user provided cache. Falling back to memory cache: "+n),await wc(t,new Ua)}}else W(mr,"Using default OfflineComponentProvider"),await wc(t,new gL(void 0));return t._offlineComponents}async function iI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(mr,"Using user provided OnlineComponentProvider"),await x_(t,t._uninitializedComponentsProvider._online)):(W(mr,"Using default OnlineComponentProvider"),await x_(t,new Yd))),t._onlineComponents}function EL(t){return iI(t).then(e=>e.syncEngine)}async function TL(t){const e=await iI(t),n=e.eventManager;return n.onListen=rL.bind(null,e.syncEngine),n.onUnlisten=sL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lL.bind(null,e.syncEngine),n}function IL(t,e,n={}){const r=new or;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,l,u,f){const h=new yL({next:m=>{h.Nu(),s.enqueueAndForget(()=>QV(o,p)),m.fromCache&&u.source==="server"?f.reject(new z(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(m)},error:m=>f.reject(m)}),p=new jV(l,h,{includeMetadataChanges:!0,qa:!0});return JV(o,p)}(await TL(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="firestore.googleapis.com",R_=!0;class N_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sI,this.ssl=R_}else this.host=e.host,this.ssl=e.ssl??R_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<YM)throw new z(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oI(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new z(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new z(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new z(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new SD;switch(r.type){case"firstParty":return new RD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=A_.get(n);r&&(W("ComponentProvider","Removing Datastore"),A_.delete(n),r.terminate())}(this),Promise.resolve()}}function wL(t,e,n,r={}){var f;t=ur(t,vu);const i=rh(e),o=t._getSettings(),s={...o,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(X2(`https://${l}`),tk("Firestore",!0)),o.host!==sI&&o.host!==l&&qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...o,host:l,ssl:i,emulatorOptions:r};if(!Aa(u,s)&&(t._setSettings(u),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=lt.MOCK_USER;else{h=j2(r.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new z(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new lt(m)}t._authCredentials=new CD(new QE(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jr(this.firestore,e,this._query)}}class Be{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Be(this.firestore,e,this._key)}toJSON(){return{type:Be._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Fs(n,Be._jsonSchema))return new Be(e,r||null,new Y(Ee.fromString(n.referencePath)))}}Be._jsonSchemaVersion="firestore/documentReference/1.0",Be._jsonSchema={type:Ge("string",Be._jsonSchemaVersion),referencePath:Ge("string")};class sr extends jr{constructor(e,n,r){super(e,n,pT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Be(this.firestore,null,new Y(e))}withConverter(e){return new sr(this.firestore,e,this._path)}}function SL(t,e,...n){if(t=xn(t),YE("collection","path",e),t instanceof vu){const r=Ee.fromString(e,...n);return qy(r),new sr(t,null,r)}{if(!(t instanceof Be||t instanceof sr))throw new z(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return qy(r),new sr(t.firestore,null,r)}}function xl(t,e,...n){if(t=xn(t),arguments.length===1&&(e=sh.newId()),YE("doc","path",e),t instanceof vu){const r=Ee.fromString(e,...n);return By(r),new Be(t,null,new Y(r))}{if(!(t instanceof Be||t instanceof sr))throw new z(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return By(r),new Be(t.firestore,t instanceof sr?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="AsyncQueue";class k_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qT(this,"async_queue_retry"),this._c=()=>{const r=Ic();r&&W(P_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Ic();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ic();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new or;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ro(e))throw e;W(P_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Rn("INTERNAL UNHANDLED ERROR: ",D_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Ch.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Z(47125,{Pc:D_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function D_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class qs extends vu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new k_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new k_(e),this._firestoreClient=void 0,await e}}}function CL(t,e){const n=typeof t=="object"?t:dD(),r=typeof t=="string"?t:e,i=sD(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=Q2("firestore");o&&wL(i,...o)}return i}function lI(t){if(t._terminated)throw new z(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||xL(t),t._firestoreClient}function xL(t){var r,i,o;const e=t._freezeSettings(),n=function(l,u,f,h){return new zD(l,u,f,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,oI(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new _L(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bt(nt.fromBase64String(e))}catch(n){throw new z(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bt(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Fs(e,bt._jsonSchema))return bt.fromBase64String(e.bytes)}}bt._jsonSchemaVersion="firestore/bytes/1.0",bt._jsonSchema={type:Ge("string",bt._jsonSchemaVersion),bytes:Ge("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fn._jsonSchemaVersion}}static fromJSON(e){if(Fs(e,fn._jsonSchema))return new fn(e.latitude,e.longitude)}}fn._jsonSchemaVersion="firestore/geoPoint/1.0",fn._jsonSchema={type:Ge("string",fn._jsonSchemaVersion),latitude:Ge("number"),longitude:Ge("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:hn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Fs(e,hn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new hn(e.vectorValues);throw new z(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hn._jsonSchemaVersion="firestore/vectorValue/1.0",hn._jsonSchema={type:Ge("string",hn._jsonSchemaVersion),vectorValues:Ge("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=/^__.*__$/;class RL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Us(e,this.data,n,this.fieldTransforms)}}class aI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function uI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:t})}}class kh{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new kh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Oa(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(uI(this.Ac)&&AL.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class NL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gu(e)}Cc(e,n,r,i=!1){return new kh({Ac:e,methodName:n,Dc:r,path:Ze.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dh(t){const e=t._freezeSettings(),n=gu(t._databaseId);return new NL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PL(t,e,n,r,i,o={}){const s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);Mh("Data must be an object, but it was:",s,r);const l=cI(r,s);let u,f;if(o.merge)u=new Rt(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const m=Xd(e,p,n);if(!s.contains(m))throw new z(G.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);fI(h,m)||h.push(m)}u=new Rt(h),f=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,f=s.fieldTransforms;return new RL(new Et(l),u,f)}class Tu extends Ph{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tu}}function kL(t,e,n,r){const i=t.Cc(1,e,n);Mh("Data must be an object, but it was:",i,r);const o=[],s=Et.empty();Er(r,(u,f)=>{const h=Vh(e,u,n);f=xn(f);const p=i.yc(h);if(f instanceof Tu)o.push(h);else{const m=Hs(f,p);m!=null&&(o.push(h),s.set(h,m))}});const l=new Rt(o);return new aI(s,l,i.fieldTransforms)}function DL(t,e,n,r,i,o){const s=t.Cc(1,e,n),l=[Xd(e,r,n)],u=[i];if(o.length%2!=0)throw new z(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)l.push(Xd(e,o[m])),u.push(o[m+1]);const f=[],h=Et.empty();for(let m=l.length-1;m>=0;--m)if(!fI(f,l[m])){const v=l[m];let P=u[m];P=xn(P);const k=s.yc(v);if(P instanceof Tu)f.push(v);else{const L=Hs(P,k);L!=null&&(f.push(v),h.set(v,L))}}const p=new Rt(f);return new aI(h,p,s.fieldTransforms)}function ML(t,e,n,r=!1){return Hs(n,t.Cc(r?4:3,e))}function Hs(t,e){if(dI(t=xn(t)))return Mh("Unsupported field value:",e,t),cI(t,e);if(t instanceof Ph)return function(r,i){if(!uI(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const l of r){let u=Hs(l,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=xn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return pM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=xe.fromDate(r);return{timestampValue:La(i.serializer,o)}}if(r instanceof xe){const o=new xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:La(i.serializer,o)}}if(r instanceof fn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bt)return{bytesValue:kT(i.serializer,r._byteString)};if(r instanceof Be){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:gh(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof hn)return function(s,l){return{mapValue:{fields:{[oT]:{stringValue:sT},[ka]:{arrayValue:{values:s.toArray().map(f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return fh(l.serializer,f)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${lu(r)}`)}(t,e)}function cI(t,e){const n={};return ZE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Er(t,(r,i)=>{const o=Hs(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function dI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xe||t instanceof fn||t instanceof bt||t instanceof Be||t instanceof Ph||t instanceof hn)}function Mh(t,e,n){if(!dI(n)||!XE(n)){const r=lu(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Xd(t,e,n){if((e=xn(e))instanceof Eu)return e._internalPath;if(typeof e=="string")return Vh(t,e);throw Oa("Field path arguments must be of type string or ",t,!1,void 0,n)}const VL=new RegExp("[~\\*/\\[\\]]");function Vh(t,e,n){if(e.search(VL)>=0)throw Oa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Eu(...e.split("."))._internalPath}catch{throw Oa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Oa(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new z(G.INVALID_ARGUMENT,l+t+u)}function fI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Be(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LL extends hI{data(){return super.data()}}function Lh(t,e){return typeof e=="string"?Vh(t,e):e instanceof Eu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bh{}class pI extends bh{}function FL(t,e,...n){let r=[];e instanceof bh&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof Uh).length,l=o.filter(u=>u instanceof Fh).length;if(s>1||s>0&&l>0)throw new z(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Fh extends pI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fh(e,n,r)}_apply(e){const n=this._parse(e);return mI(e._query,n),new jr(e.firestore,e.converter,Gd(e._query,n))}_parse(e){const n=Dh(e.firestore);return function(o,s,l,u,f,h,p){let m;if(f.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){V_(p,h);const P=[];for(const k of p)P.push(M_(u,o,k));m={arrayValue:{values:P}}}else m=M_(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||V_(p,h),m=ML(l,s,p,h==="in"||h==="not-in");return Oe.create(f,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Uh extends bh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Uh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:jt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const l=o.getFlattenedFilters();for(const u of l)mI(s,u),s=Gd(s,u)}(e._query,n),new jr(e.firestore,e.converter,Gd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Oh extends pI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Oh(e,n)}_apply(e){const n=function(i,o,s){if(i.startAt!==null)throw new z(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new z(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new As(o,s)}(e._query,this._field,this._direction);return new jr(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new io(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function UL(t,e="asc"){const n=e,r=Lh("orderBy",t);return Oh._create(r,n)}function M_(t,e,n){if(typeof(n=xn(n))=="string"){if(n==="")throw new z(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mT(e)&&n.indexOf("/")!==-1)throw new z(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!Y.isDocumentKey(r))throw new z(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yy(t,new Y(r))}if(n instanceof Be)return Yy(t,n._key);throw new z(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lu(n)}.`)}function V_(t,e){if(!Array.isArray(t)||t.length===0)throw new z(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mI(t,e){const n=function(i,o){for(const s of i)for(const l of s.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class OL{convertValue(e,n="none"){switch(hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Er(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[ka].arrayValue)==null?void 0:i.values)==null?void 0:o.map(s=>Le(s.doubleValue));return new hn(n)}convertGeoPoint(e){return new fn(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ss(e));default:return null}}convertTimestamp(e){const n=dr(e);return new xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);pe(FT(r),9688,{name:e});const i=new Cs(r.get(1),r.get(3)),o=new Y(r.popFirst(5));return i.isEqual(n)||Rn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Al{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mi extends hI{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Lh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Mi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Mi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mi._jsonSchema={type:Ge("string",Mi._jsonSchemaVersion),bundleSource:Ge("string","DocumentSnapshot"),bundleName:Ge("string"),bundle:Ge("string")};class Yl extends Mi{data(e={}){return super.data(e)}}class Vi{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Al(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yl(this._firestore,this._userDataWriter,r.key,r,new Al(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>{const u=new Yl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Al(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new Yl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Al(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,h=-1;return l.type!==0&&(f=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),h=s.indexOf(l.doc.key)),{type:BL(l.type),doc:u,oldIndex:f,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function BL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}Vi._jsonSchemaVersion="firestore/querySnapshot/1.0",Vi._jsonSchema={type:Ge("string",Vi._jsonSchemaVersion),bundleSource:Ge("string","QuerySnapshot"),bundleName:Ge("string"),bundle:Ge("string")};class qL extends OL{constructor(e){super(),this.firestore=e}convertBytes(e){return new bt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Be(this.firestore,null,n)}}function HL(t){t=ur(t,jr);const e=ur(t.firestore,qs),n=lI(e),r=new qL(e);return bL(t._query),IL(n,t._query).then(i=>new Vi(e,r,t,i))}function $L(t,e,n){t=ur(t,Be);const r=ur(t.firestore,qs),i=GL(t.converter,e);return Gh(r,[PL(Dh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Yt.none())])}function L_(t,e,n,...r){t=ur(t,Be);const i=ur(t.firestore,qs),o=Dh(i);let s;return s=typeof(e=xn(e))=="string"||e instanceof Eu?DL(o,"updateDoc",t._key,e,n,r):kL(o,"updateDoc",t._key,e),Gh(i,[s.toMutation(t._key,Yt.exists(!0))])}function zL(t){return Gh(ur(t.firestore,qs),[new hh(t._key,Yt.none())])}function Gh(t,e){return function(r,i){const o=new or;return r.asyncQueue.enqueueAndForget(async()=>aL(await EL(r),i,o)),o.promise}(lI(t),e)}(function(e,n=!0){(function(i){to=i})(cD),Na(new Ts("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new qs(new xD(r.getProvider("auth-internal")),new ND(s,r.getProvider("app-check-internal")),function(f,h){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new z(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cs(f.options.projectId,h)}(s,i),s);return o={useFetchStreams:n,...o},l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),ki(Fy,Uy,e),ki(Fy,Uy,"esm2020")})();const WL={projectId:"my-vertex-demo-477402",appId:"1:951182156991:web:f3d9a719d286edb79d120a",storageBucket:"my-vertex-demo-477402.firebasestorage.app",apiKey:"AIzaSyBMrcD659wimRmDjztaq0g1WPcCdVdv7pE",authDomain:"my-vertex-demo-477402.firebaseapp.com",messagingSenderId:"951182156991",measurementId:"G-X9MG3S33N4"},KL=OE(WL),Mo=CL(KL,"workflow111"),Vo="tasks",Dr={getAllTasks:async()=>{try{const t=FL(SL(Mo,Vo),UL("createdAt","desc"));return(await HL(t)).docs.map(n=>n.data())}catch(t){return console.error("Error fetching tasks:",t),[]}},createTask:async t=>{const e={...t,createdAt:Date.now(),updatedAt:Date.now()};try{return await $L(xl(Mo,Vo,e.id),e),e}catch(n){throw console.error("Error creating task:",n),n}},updateTask:async t=>{const e={...t,updatedAt:Date.now()};try{return await L_(xl(Mo,Vo,t.id),e),e}catch(n){throw console.error("Error updating task:",n),n}},deleteTask:async t=>{try{await zL(xl(Mo,Vo,t))}catch(e){throw console.error("Error deleting task:",e),e}},updateStatus:async(t,e)=>{try{const n=xl(Mo,Vo,t);return await L_(n,{status:e,updatedAt:Date.now()}),{id:t,status:e}}catch(n){throw console.error("Error updating status:",n),n}},exportTasks:async()=>{const t=await Dr.getAllTasks(),e=JSON.stringify(t,null,2),n=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`baro-ai-tasks-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}},JL='# Baro.ai Design System\n\n## 1. Design Philosophy ( )\n**"Tech Minimalist & Clarity"**\nBaro.ai  Google    A-GO   .   , **"     "** .\n\n*   **Clean ():**     , White & Light Grey     .\n*   **Fluid ():**  (Rounded Corners)       ,     .\n*   **Tech-Native:**    (Dot Matrix)     .\n\n---\n\n## 2. Typography ()\n\n### Font Family\n*   **Primary (Korean):** `Pretendard` (Web Font) -     \n*   **Primary (English):** `Inter` (Google Fonts) - UI   \n*   **Fallbacks:** `sans-serif`\n\n### Scale & Usage\n| Role | Size | Weight | Letter Spacing | Usage |\n| :--- | :--- | :--- | :--- | :--- |\n| **Display** | `text-2xl` (24px) | Bold (700) | `tracking-tight` |  ,  , KPI  |\n| **Heading 1** | `text-xl` (20px) | Bold (700) | `leading-tight` | /  |\n| **Heading 2** | `text-lg` (18px) | Bold (700) | Default |   |\n| **Body** | `text-base` (16px) | Regular (400) | `leading-relaxed` | ,    |\n| **UI Label** | `text-sm` (14px) | Medium (500) | Default | ,  ,   |\n| **Caption** | `text-xs` (12px) | Medium (500) | Default |  , , , KPI  |\n\n---\n\n## 3. Color Palette ( )\n\n### Neutral (Grayscale)\n*   **Background:** `#FFFFFF` (Pure White) -   \n*   **Canvas:** `#F8F9FA` (Google Grey 50) - ,   \n*   **Primary Text:** `#202124` (Google Grey 900) -  \n*   **Secondary Text:** `#5F6368` (Google Grey 700) - ,  \n*   **Border:** `#E8EAED`, `#DADCE0` - \n\n### Brand & Accent\n*   **Brand Blue:** `#1A73E8` (Primary Action, Links)\n*   **Brand Black:** `#000000` (Primary CTA Button)\n*   **Brand Teal:** `#306364` (Workload Charts) -    \n*   **Insights Dark:** `#111827` (bg-gray-900) - AI      ( )\n\n### State Colors\n*   **Success:** `text-green-600` / `bg-green-50`\n*   **Warning:** `text-orange-600` / `bg-orange-50`\n*   **Danger:** `text-red-600` / `bg-red-50`\n\n---\n\n## 4. UI Components ( )\n\n### A. Background Pattern ( )\n          .\n```css\nbody {\n  background-color: #ffffff;\n  background-image: radial-gradient(#E1E3E6 1.5px, transparent 1.5px);\n  background-size: 32px 32px;\n}\n```\n\n### B. Cards (Clean Card)\n  ,        .\n*   **Background:** `rgba(255, 255, 255, 0.8)` + `backdrop-filter: blur(8px)`\n*   **Border:** `1px solid #E8EAED`\n*   **Shadow (Default):** `box-shadow: 0 1px 2px rgba(60,64,67,0.05), 0 2px 6px 2px rgba(60,64,67,0.05)`\n*   **Hover Effect:** `transform: translateY(-1px)`, Shadow .\n*   **Radius:** `rounded-2xl`\n\n### C. Buttons ()\n*   **Shape:** `rounded-full` ( , Pill Shape)\n*   **Primary CTA:** `bg-black text-white` ( )\n*   **Secondary:** `bg-blue-50 text-blue-700`\n*   **Ghost/Nav:** `text-gray-500 hover:bg-gray-50`\n\n### D. StatCard ( )\n*   **Style:**         .\n*   **Icon Box:** `w-10 h-10`, `bg-gray-900`, `text-white`\n*   **Badge:** `text-xs`, `bg-gray-900`, `text-white`\n\n### E. Sidebar Logo\n*   **Type:** Image (`public/logo.png`)\n*   **Size:** `h-8` (Height 32px), Width `auto`\n*   **Fit:** `object-contain`  \n\n---\n\n## 5. Motion & Effects (  )\n\n### Transitions\n    .\n*   **Duration:** `0.2s` ~ `0.3s`\n*   **Ease:** `ease-out`\n*   **Properties:** `transform`, `box-shadow`, `background-color`, `color`\n\n### Animations\n*   **Fade In:**      .\n*   **Pulse:** AI     UI   .\n\n---\n\n## 6. Iconography ()\n*   **Library:** Lucide React\n*   **Style:** Stroke width `2px` ()\n*   **Usage:**     ,      .\n',QL=`# Nexus AI Developer Guide

  Nexus AI  ,  ,    .
  **"Vite + React Standard Architecture"** ,    .

##  1.   (Project Structure)

\`\`\`
/
 components/        # UI  ( )
    Layout.tsx     #   (, )
    Kanban.tsx     #    (TaskCard, Column, Toolbar )
    TaskCard.tsx   #    
    KanbanColumn.tsx  #     
    KanbanToolbar.tsx # , ,  
    Insights.tsx   #    (KPI  )
    SettingsPage.tsx #     
    AIModal.tsx    # AI    
    GeminiPage.tsx #  AI  
    Icons.tsx      #   (Lucide wrapper)
    AIViews.tsx    #      (Draft, Strategy )
 services/          #    API  
    geminiService.ts # Google GenAI API  
    taskService.ts   #   CRUD (LocalStorage )
    prompts.ts       # AI   
 utils/             #   
    taskHelpers.ts   # ,     
    formatters.ts    #     
 types.ts           #    (Interface, Enum)
 constants.ts       # , Mock ,  
 App.tsx            #     (Composition Root)
 index.css          #    Tailwind 
\`\`\`

##  2.   

### A.   (Separation of Concerns)
*   **UI Components**:      . \`Kanban.tsx\` \`TaskCard\`, \`Column\`, \`Toolbar\`   .
*   **Services**:  , AI ,    .  \`localStorage\`      .
*   **Types**:  (\`Task\`, \`User\` ) \`types.ts\`     .

### B.    (Prompt Management)
*   \`services/prompts.ts\`    .
*   ' (SettingsPage)'              .

### C.   (Styling Strategy)
*   **Tailwind CSS**:     .
*   **Design System**: \`index.css\` \`DESIGN_SYSTEM.md\`     (Pretendard, Inter) .

##  3.   (Conventions)

### Naming
*   **Components**: PascalCase (: \`KanbanBoard.tsx\`)
*   **Functions/Variables**: camelCase (: \`handleTaskClick\`, \`isLoading\`)
*   **Interfaces**: PascalCase (: \`Task\`, \`AIAnalysis\`)
*   **Constants**: UPPER_SNAKE_CASE (: \`MAX_TOKENS\`, \`INITIAL_TASKS\`)

### State Management
*    UI  \`useState\` .
*     \`App.tsx\` \`taskService\`       .
*   \`taskService\`  \`localStorage\`   , ,    .

### AI Integration Rules
*   \`@google/genai\` SDK .
*   API   \`process.env.API_KEY\`  .
*   \`Insights.tsx\`     AI  ,    UI    .

##  4.   (Data Flow Example: Insights)

1.  **Page Load**:  ''    \`Insights.tsx\` .
2.  **Effect**: \`useEffect\` \`getWeeklyInsight\` .
3.  **Service**: \`geminiService\`   (\`tasks\`)   .
4.  **API Call**: Google Gemini   .
5.  **Response**: AI    .
6.  **UI Update**:  UI    .

---
  : 2025-11-22
`,Sc=(t,e)=>{const n=new Blob([t],{type:"text/markdown"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},YL=()=>{const t=()=>{let e=`# Baro.ai - AI Prompt Engineering Document

`;e+=`This document is auto-generated based on \`services/prompts.ts\` (Single Source of Truth).

---

`,on.forEach(n=>{const r=n.promptGenerator.toString();e+=`## ${n.name} (${n.id})
`,e+=`- **Description**: ${n.description}
`,e+=`- **Model**: ${n.model}
`,e+=`- **Tags**: ${n.tags.join(", ")}

`,e+=`### Prompt Logic
`,e+="```javascript\n",e+=`${r}
`,e+=`\`\`\`

---

`}),Sc(e,"Baro.ai-Prompts-Documentation.md")};return y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[y.jsxs("div",{className:"space-y-8",children:[y.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(pn,{className:"w-6 h-6 text-blue-600"}),y.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"AI Features Registry"})]}),y.jsxs("button",{onClick:t,className:"px-3 py-1.5 bg-gray-900 text-white text-xs font-bold rounded-full flex items-center gap-2 hover:bg-gray-700 transition-colors",children:[y.jsx(vl,{className:"w-3 h-3"}),y.jsx("span",{children:"AI   (.md)"})]})]}),y.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"  AI  .         ."}),y.jsx("div",{className:"space-y-3",children:on.map(e=>y.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100 hover:border-gray-200 transition-colors",children:[y.jsxs("div",{className:"flex justify-between items-start mb-3",children:[y.jsxs("div",{className:"flex flex-col gap-0.5",children:[y.jsx("p",{className:"font-bold text-sm text-gray-800",children:e.name}),y.jsx("p",{className:"text-xs text-gray-400 font-mono",children:e.model})]}),y.jsx("span",{className:"text-[10px] font-bold text-green-600 bg-green-100 px-2 py-0.5 rounded-full border border-green-200 shrink-0 ml-2",children:"Active"})]}),y.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.tags.map(n=>y.jsx("span",{className:"px-2 py-1 bg-white border border-gray-200 text-gray-500 text-[10px] rounded-md font-medium",children:n},n))})]},e.id))})]}),y.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx(RC,{className:"w-6 h-6 text-indigo-600"}),y.jsx("h3",{className:"text-lg font-bold text-gray-900",children:" "})]}),y.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"      JSON     ."}),y.jsxs("button",{onClick:()=>Dr.exportTasks(),className:"w-full px-4 py-2.5 bg-indigo-50 border border-indigo-100 text-indigo-600 text-sm font-bold rounded-lg hover:bg-indigo-100 transition-colors flex items-center justify-center gap-2",children:[y.jsx(vl,{className:"w-4 h-4"}),"   (.json)"]})]})]}),y.jsxs("div",{className:"space-y-8",children:[y.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx(Bl,{className:"w-6 h-6 text-purple-600"}),y.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"UI Components Registry"})]}),y.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Baro.ai  UI  ."}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("p",{className:"font-bold text-sm text-gray-800",children:"Kanban Board"}),y.jsx("span",{className:"text-xs font-bold text-gray-500 bg-gray-200 px-2.5 py-1 rounded-full",children:"Rendered"})]}),y.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"HTML5 Drag & Drop API, TaskStatus Enum "})]}),y.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("p",{className:"font-bold text-sm text-gray-800",children:"Insights Dashboard"}),y.jsx("span",{className:"text-xs font-bold text-gray-500 bg-gray-200 px-2.5 py-1 rounded-full",children:"Rendered"})]}),y.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"    KPI "})]})]})]}),y.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsx(Ei,{className:"w-6 h-6 text-emerald-600"}),y.jsx("h3",{className:"text-lg font-bold text-gray-900",children:" "})]}),y.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"      ."}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("button",{onClick:()=>Sc(JL,"DESIGN_SYSTEM.md"),className:"w-full px-4 py-2.5 bg-emerald-50 border border-emerald-100 text-emerald-600 text-sm font-bold rounded-lg hover:bg-emerald-100 transition-colors flex items-center justify-center gap-2",children:[y.jsx(vl,{className:"w-4 h-4"}),"   (.md)"]}),y.jsxs("button",{onClick:()=>Sc(QL,"DEVELOPER_GUIDE.md"),className:"w-full px-4 py-2.5 bg-emerald-50 border border-emerald-100 text-emerald-600 text-sm font-bold rounded-lg hover:bg-emerald-100 transition-colors flex items-center justify-center gap-2",children:[y.jsx(vl,{className:"w-4 h-4"}),"  (.md)"]})]})]})]})]})},XL=({changelog:t})=>{const[e,n]=j.useState([]);j.useEffect(()=>{t.length>0&&n([t[0].version])},[t]);const r=i=>{n(o=>o.includes(i)?o.filter(s=>s!==i):[...o,i])};return y.jsx("div",{className:"relative border-l-2 border-gray-200/80 ml-4 space-y-8",children:t.map(i=>{const o=e.includes(i.version);return y.jsxs("div",{className:"pl-8 relative",children:[y.jsx("div",{className:"absolute -left-[9px] top-1.5 w-4 h-4 bg-white rounded-full border-4 border-blue-500"}),y.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden transition-all hover:shadow-md",children:[y.jsxs("div",{className:"p-5 cursor-pointer flex items-center justify-between bg-gray-50/50",onClick:()=>r(i.version),children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("span",{className:"text-xs font-bold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-full border border-blue-100",children:["v",i.version]}),y.jsx("span",{className:"text-xs text-gray-400 font-medium",children:i.date})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("h3",{className:"text-sm font-bold text-gray-800",children:i.title}),y.jsx(X0,{className:`w-4 h-4 text-gray-400 transition-transform ${o?"rotate-180":""}`})]})]}),o&&y.jsx("div",{className:"p-6 pt-2 prose prose-sm max-w-none text-gray-600 leading-relaxed border-t border-gray-100",dangerouslySetInnerHTML:{__html:i.description}})]})]},i.version)})})},jL=()=>{const[t,e]=j.useState("DOC_HUB"),[n,r]=j.useState([]);return j.useEffect(()=>{r(U2)},[]),y.jsx("div",{className:"h-full overflow-y-auto custom-scrollbar p-8 bg-gray-50/50 font-sans",children:y.jsxs("div",{className:"max-w-5xl mx-auto",children:[y.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[y.jsx("div",{className:"w-12 h-12 bg-gray-900 rounded-2xl flex items-center justify-center shadow-lg",children:y.jsx(rE,{className:"w-6 h-6 text-white"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"Settings & Documentation"}),y.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"     ."})]})]}),y.jsxs("div",{className:"flex items-center gap-2 mb-8 border-b border-gray-200",children:[y.jsxs("button",{onClick:()=>e("DOC_HUB"),className:`px-4 py-3 text-sm font-bold border-b-2 transition-colors flex items-center gap-2
                    ${t==="DOC_HUB"?"border-gray-900 text-gray-900":"border-transparent text-gray-400 hover:text-gray-600"}`,children:[y.jsx(Ei,{className:"w-4 h-4"})," "]}),y.jsxs("button",{onClick:()=>e("CHANGELOG"),className:`px-4 py-3 text-sm font-bold border-b-2 transition-colors flex items-center gap-2
                    ${t==="CHANGELOG"?"border-gray-900 text-gray-900":"border-transparent text-gray-400 hover:text-gray-600"}`,children:[y.jsx(NC,{className:"w-4 h-4"})," "]})]}),y.jsxs("div",{className:"animate-fade-in",children:[t==="DOC_HUB"&&y.jsx(YL,{}),t==="CHANGELOG"&&y.jsx(XL,{changelog:n})]})]})})},ZL=({tasks:t})=>{var M;const[e,n]=j.useState(""),[r,i]=j.useState(!0),o=Date.now(),s=24*60*60*1e3,l=7*s,u=t.filter(V=>V.status===Se.DONE?!1:new Date(V.dueDate).getTime()<o).length,f=t.filter(V=>V.status===Se.DONE&&V.updatedAt&&V.updatedAt>=o-l).length,h=t.filter(V=>V.status===Se.DONE&&V.updatedAt&&V.updatedAt>=o-2*l&&V.updatedAt<o-l).length;let p=0;h===0?p=f>0?100:0:p=Math.round((f-h)/h*100);const m=p>0?`+${p}%`:`${p}%`,v=t.filter(V=>{if(V.status===Se.DONE)return!1;const F=V.updatedAt||V.createdAt||0;return o-F>2*s}).length,P=t.filter(V=>V.priority===_e.HIGH).length,k=t.filter(V=>V.priority===_e.HIGH&&V.status===Se.DONE).length,L=P>0?Math.round(k/P*100):0,A=t.reduce((V,F)=>{const w=WC.find(C=>C.id===F.assigneeId),E=w?w.name:"";return V[E]=(V[E]||0)+1,V},{}),T=Math.max(...Object.values(A),1),x=((M=Object.entries(A).sort((V,F)=>F[1]-V[1])[0])==null?void 0:M[0])||" ";return j.useEffect(()=>{(async()=>{i(!0);try{const F={total:t.length,completionRate:t.length>0?Math.round(t.filter(E=>E.status===Se.DONE).length/t.length*100):0,inProgress:t.filter(E=>E.status===Se.WIP).length,overdue:u,busiestMember:x},w=await M2(t,F);n(w)}catch{n("AI      .")}finally{i(!1)}})()},[t,u,x]),y.jsx("div",{className:"h-full overflow-y-auto custom-scrollbar p-8 bg-gray-50/50 font-sans",children:y.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 animate-fade-in",children:[y.jsx("div",{className:"flex items-center justify-between",children:y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:" "}),y.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"      ."})]})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[y.jsx(Rl,{title:"Overdue Tasks",value:`${u} `,subText:"  ",icon:y.jsx(Q0,{className:"w-5 h-5"}),iconBg:"bg-gray-900",iconColor:"text-white",badgeText:u>0?"Warning":"Good",badgeBg:"bg-gray-900",badgeColor:"text-white"}),y.jsx(Rl,{title:"Weekly Velocity",value:`${f} tasks`,subText:"  ",icon:y.jsx(HC,{className:"w-5 h-5"}),iconBg:"bg-gray-900",iconColor:"text-white",badgeText:m,badgeBg:"bg-gray-900",badgeColor:"text-white"}),y.jsx(Rl,{title:"Stuck Tasks",value:`${v} `,subText:"2   ",icon:y.jsx(UC,{className:"w-5 h-5"}),iconBg:"bg-gray-900",iconColor:"text-white",badgeText:v>0?"Check":"Stable",badgeBg:"bg-gray-900",badgeColor:"text-white"}),y.jsx(Rl,{title:"High Pri. Resolution",value:`${L}%`,subText:`of ${P}  `,icon:y.jsx(FC,{className:"w-5 h-5"}),iconBg:"bg-gray-900",iconColor:"text-white",badgeText:"Quality",badgeBg:"bg-gray-900",badgeColor:"text-white"})]}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[y.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[y.jsx(VC,{className:"w-5 h-5 text-gray-400"}),y.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"  "})]}),y.jsx("div",{className:"space-y-5",children:[Se.REQUESTED,Se.WIP,Se.CHECKED,Se.DONE].map(V=>{const F=t.length,w=t.filter(S=>S.status===V).length,E=F>0?w/F*100:0;let C="bg-gray-400",R="";switch(V){case Se.REQUESTED:C="bg-gray-400",R="";break;case Se.WIP:C="bg-blue-500",R=" ";break;case Se.CHECKED:C="bg-purple-500",R="/";break;case Se.DONE:C="bg-green-500",R="";break}return y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between text-sm",children:[y.jsxs("span",{className:"font-medium text-gray-600 flex items-center gap-2",children:[y.jsx("div",{className:`w-2 h-2 rounded-full ${C}`}),R]}),y.jsxs("span",{className:"font-bold text-gray-800",children:[w," ",y.jsxs("span",{className:"text-gray-400 font-normal ml-1",children:["(",Math.round(E),"%)"]})]})]}),y.jsx("div",{className:"h-2.5 w-full bg-gray-100 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full rounded-full ${C} transition-all duration-1000 ease-out`,style:{width:`${E}%`}})})]},V)})})]}),y.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm flex flex-col",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[y.jsx(GC,{className:"w-5 h-5 text-gray-400"}),y.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"  (Workload)"})]}),y.jsxs("div",{className:"flex-1 flex items-end justify-around gap-4 pb-2 min-h-[200px]",children:[Object.entries(A).map(([V,F])=>{const w=F/T*100,E=Math.max(w,5);return y.jsxs("div",{className:"flex flex-col items-center gap-3 w-full group cursor-default",children:[y.jsxs("div",{className:"relative w-full max-w-[40px] flex items-end justify-center h-[180px] bg-gray-50 rounded-t-lg overflow-hidden",children:[y.jsx("div",{className:"w-full bg-[#306364]/80 group-hover:bg-[#306364] transition-all duration-500 rounded-t-lg relative group-hover:shadow-lg",style:{height:`${E}%`}}),y.jsx("span",{className:"absolute bottom-2 text-xs font-bold text-[#306364] bg-white/80 px-1.5 py-0.5 rounded shadow-sm backdrop-blur-sm",children:F})]}),y.jsx("span",{className:"text-[11px] font-medium text-gray-500 truncate w-full text-center px-1",title:V,children:V})]},V)}),Object.keys(A).length===0&&y.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm",children:" ."})]})]})]}),y.jsxs("div",{className:"bg-gray-900 rounded-2xl p-8 text-white relative overflow-hidden shadow-xl ring-1 ring-white/10 min-h-[180px]",children:[y.jsx("div",{className:"absolute top-0 right-0 p-10 opacity-10 transform translate-x-10 -translate-y-10",children:y.jsx(pn,{className:"w-64 h-64 text-white"})}),y.jsxs("div",{className:"relative z-10",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[y.jsxs("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center backdrop-blur-md border border-white/20",children:[y.jsx(pn,{className:"w-4 h-4 text-white"})," "]}),y.jsx("h3",{className:"text-lg font-bold text-white",children:"Weekly AI Insight"})]}),y.jsx("div",{className:"space-y-4 max-w-3xl",children:r?y.jsxs("div",{className:"animate-pulse space-y-3",children:[y.jsx("div",{className:"h-4 bg-white/10 rounded w-3/4"}),y.jsx("div",{className:"h-4 bg-white/10 rounded w-1/2"}),y.jsx("div",{className:"h-4 bg-white/10 rounded w-5/6"}),y.jsx("span",{className:"text-xs text-gray-400 mt-2 block animate-pulse",children:"AI   ..."})]}):y.jsx("p",{className:"text-gray-300 leading-relaxed text-sm whitespace-pre-line",children:e})})]})]})]})})},Rl=({title:t,value:e,subText:n,icon:r,iconBg:i,iconColor:o,badgeText:s,badgeBg:l,badgeColor:u})=>y.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-all duration-300 group",children:[y.jsxs("div",{className:"flex items-start justify-between mb-4",children:[y.jsx("div",{className:`w-10 h-10 rounded-xl ${i} flex items-center justify-center ${o} group-hover:scale-110 transition-transform`,children:r}),y.jsxs("div",{className:`flex items-center gap-1.5 text-xs font-bold px-2.5 py-1 rounded-full ${l} ${u}`,children:[s==="Warning"||s==="Check"?y.jsx(Q0,{className:"w-3.5 h-3.5"}):y.jsx(OC,{className:"w-3.5 h-3.5"}),y.jsx("span",{children:s})]})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("span",{className:"text-gray-500 text-xs font-bold tracking-wide uppercase block",children:t}),y.jsx("h4",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:e}),y.jsx("p",{className:"text-xs text-gray-500 font-medium",children:n})]})]});function e4(){const[t,e]=j.useState("BOARD"),[n,r]=j.useState([]),[i,o]=j.useState(null),[s,l]=j.useState(!1),[u,f]=j.useState(null);j.useEffect(()=>{h()},[]);const h=async()=>{try{const T=await Dr.getAllTasks();r(T)}catch(T){console.error("Failed to load tasks",T)}},p=T=>{o(T),f(null),l(!0)},m=async T=>{if(u)f(T);else{r(x=>x.map(M=>M.id===T.id?T:M)),o(T);try{await Dr.updateTask(T)}catch(x){console.error("Failed to update task",x),alert("  ."),h()}}},v=async(T,x)=>{r(M=>M.map(V=>V.id===T?{...V,status:x}:V));try{await Dr.updateStatus(T,x)}catch(M){console.error("Failed to update status",M),alert("  ."),h()}},P=async T=>{const x=[...n];r(M=>M.filter(V=>V.id!==T)),(i==null?void 0:i.id)===T&&(l(!1),o(null));try{await Dr.deleteTask(T)}catch(M){console.error("Failed to delete task",M),alert(" ."),r(x)}},k=()=>{const T={id:`t${Date.now()}`,title:"  ",description:"",product:"",type:"",priority:_e.MEDIUM,status:Se.REQUESTED,dueDate:new Date().toISOString(),assigneeId:"u1",requesterId:"u2",subtasks:[],createdAt:Date.now(),updatedAt:Date.now()};f(T),o(null),l(!0)},L=async T=>{try{const x=await Dr.createTask(T);r(M=>[...M,x]),l(!1),f(null)}catch(x){console.error("Failed to create task",x),alert(` : ${x.message}`)}},A=()=>{switch(t){case"INSIGHT":return y.jsx(ZL,{tasks:n});case"BOARD":return y.jsxs(y.Fragment,{children:[y.jsxs("header",{className:"h-20 flex items-center justify-between px-8 z-10 shrink-0 backdrop-blur-sm bg-white/50 sticky top-0",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:" "}),y.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"   AI  ."})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("button",{onClick:k,className:"flex items-center gap-2 bg-black hover:bg-gray-800 text-white px-6 py-2.5 rounded-full text-sm font-medium transition-all shadow-md hover:shadow-lg active:scale-95",children:[y.jsx(LC,{className:"w-4 h-4"}),y.jsx("span",{children:"  "})]}),y.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 border border-gray-200 flex items-center justify-center text-gray-600 font-medium text-sm",children:"ME"})]})]}),y.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden p-8 pt-4",children:y.jsx(XC,{tasks:n,onTaskClick:p,onStatusChange:v,onDeleteTask:P})})]});case"GEMINI":return y.jsx(F2,{});case"SETTINGS":return y.jsx(jL,{});default:return null}};return y.jsxs($C,{currentView:t,onNavigate:e,children:[A(),(i||u)&&y.jsx(L2,{task:i||u,isOpen:s,onClose:()=>{l(!1),f(null)},onUpdateTask:m,onCreateTask:u?L:void 0})]})}const gI=document.getElementById("root");if(!gI)throw new Error("Could not find root element to mount to");const t4=Cc.createRoot(gI);t4.render(y.jsx(W_.StrictMode,{children:y.jsx(e4,{})}));
